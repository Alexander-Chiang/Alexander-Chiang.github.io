<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Alex&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.jiangyayu.cn/"/>
  <updated>2017-03-06T15:20:39.167Z</updated>
  <id>https://blog.jiangyayu.cn/</id>
  
  <author>
    <name>Alexander Chiang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>相册</title>
    <link href="https://blog.jiangyayu.cn//archives/photos.html"/>
    <id>https://blog.jiangyayu.cn//archives/photos.html</id>
    <published>2017-03-06T13:50:47.987Z</published>
    <updated>2017-03-06T15:20:39.167Z</updated>
    
    <content type="html"><![CDATA[<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/33.小溪.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/33.小溪.jpg" title="小溪"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/32.玄武湖日出.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/32.玄武湖日出.jpg" title="玄武湖日出"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/30.上海.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/30.上海.jpg" title="上海外滩夜景"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/29.南师雪景.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/29.南师雪景.jpg" title="南师雪景"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/27.南师随园.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/27.南师随园.jpg" title="南师随园"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/25.如琴湖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/25.如琴湖.jpg" title="如琴湖"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/31.上海外滩夜景.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/31.上海外滩夜景.jpg" title="上海外滩夜景"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/28.昙花.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/28.昙花.jpg" title="昙花"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/24.三叠泉.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/24.三叠泉.jpg" title="三叠泉"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/23.五老峰.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/23.五老峰.jpg" title="五老峰"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/22.五老峰-悬崖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/22.五老峰-悬崖.jpg" title="五老峰-悬崖"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/19.庐山恋-御碑亭.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/19.庐山恋-御碑亭.jpg" title="庐山-御碑亭"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/17.庐山-芦林湖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/17.庐山-芦林湖.jpg" title="庐山-芦林湖"></a></div></div></div></div>
<p><img src="http://source.jiangyayu.cn/photos/26.女儿城.JPG" title="女儿城"></p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/21.庐山悬索桥.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/21.庐山悬索桥.jpg" title="庐山悬索桥"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/20.庐山险峰.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/20.庐山险峰.jpg" title="庐山险峰"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/18.庐山-龙首崖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/18.庐山-龙首崖.jpg" title="庐山-龙首崖"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/14.庐山险峰.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/14.庐山险峰.jpg" title="庐山险峰"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/17.庐山-险峰金锁关.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/17.庐山-险峰金锁关.jpg" title="庐山-险峰金锁关"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/16.庐山-五老峰.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/16.庐山-五老峰.jpg" title="庐山-五老峰"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/15.庐山-如琴湖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/15.庐山-如琴湖.jpg" title="庐山-如琴湖"></a></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/12.家乡日落.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/12.家乡日落.jpg" title="家乡日落"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/10.秦淮人家.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/10.秦淮人家.jpg" title="秦淮人家"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/9.北京某郊.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/9.北京某郊.jpg" title="北京某郊"></a></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/8.海河.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/8.海河.jpg" title="海河"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/7.长城.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/7.长城.jpg" title="长城"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/6.颐和园.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/6.颐和园.jpg" title="颐和园"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/5.人民大会堂.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/5.人民大会堂.jpg" title="人民大会堂"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/4.故宫鸟瞰.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/4.故宫鸟瞰.jpg" title="故宫鸟瞰"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/2.天科大桃花.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/2.天科大桃花.jpg" title="天科大桃花"></a></div><div class="group-picture-column" style="width: 25%;"><a href="http://source.jiangyayu.cn/photos/11.栖霞山夕阳余晖.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/11.栖霞山夕阳余晖.jpg" title="栖霞山夕阳余晖"></a></div></div></div></div>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/13.南师一角.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/13.南师一角.jpg" title="南师一角"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/3.天科大桃花.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/3.天科大桃花.jpg" title="天科大桃花"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/photos/1.塘沽外滩公园.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/photos/1.塘沽外滩公园.jpg" title="塘沽外滩公园"></a></div></div></div></div>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;group-picture&quot;&gt;&lt;div class=&quot;group-picture-container&quot;&gt;&lt;div class=&quot;group-picture-row&quot;&gt;&lt;div class=&quot;group-picture-column&quot; style=&quot;widt
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>基于Arcobject二次开发的Excel数据转换Shape文件的C#批处理应用程序</title>
    <link href="https://blog.jiangyayu.cn//archives/csharp-excel-to-shape.html"/>
    <id>https://blog.jiangyayu.cn//archives/csharp-excel-to-shape.html</id>
    <published>2017-03-04T00:40:38.000Z</published>
    <updated>2017-03-24T02:41:02.561Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="ArcGIS" scheme="https://blog.jiangyayu.cn/tags/ArcGIS/"/>
    
      <category term="C#" scheme="https://blog.jiangyayu.cn/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>CAS4.0单点登录服务器的配置</title>
    <link href="https://blog.jiangyayu.cn//archives/CAS-Single-Sign-On.html"/>
    <id>https://blog.jiangyayu.cn//archives/CAS-Single-Sign-On.html</id>
    <published>2016-10-06T02:01:02.000Z</published>
    <updated>2017-03-02T14:50:12.951Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SSO和CAS"><a href="#SSO和CAS" class="headerlink" title="SSO和CAS"></a>SSO和CAS</h2><p>&emsp;&emsp;单点登录（SingleSign On , 简称 SSO ）是目前比较流行的服务于企业业务整合的解决方案之一， SSO使得在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。<br><a id="more"></a><br>&emsp;&emsp;CAS是中央认证服务Central Authentication Service的简称，是对单点登录SSO（Single Sign On）的一种实现。最初由耶鲁大学的Shawn Bayern 开发，后由Jasig社区维护，经过十多年发展，目前已成为影响最大、广泛使用的、基于Java实现的、开源SSO解决方案。CAS由Cas Server和Cas Client两部分组成，Cas Server是核心，而Cas Client通常就对应于我们的应用。一个Cas Server可以对应于多个Cas Client。它允许我们在一个Client进行登录以后无需再让用户输入用户名和密码进行认证即可访问其它Client应用。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>安装JDK和Tomcat：<br>&emsp;&emsp;已经配置好Tomcat的可以跳过此步骤，未安装配置的可以参考另外一篇博客：<a href="https://blog.jiangyayu.cn//archives/tomcat-install">CentOS6.5中Tomcat的安装配置</a></p>
<h2 id="启用HTTPS传输协议"><a href="#启用HTTPS传输协议" class="headerlink" title="启用HTTPS传输协议"></a>启用HTTPS传输协议</h2><p>（1）    生成证书<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -alias tomcat -keyalg RSA -keystore /root/keystore</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/1.png"></p>
<p><strong>注：</strong> 名字与姓氏一项需输入域名。<br>（2）    导出证书文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -export -file /opt/tomcat.crt -alias tomcat -keystore /root/keystore</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/2.png"></p>
<p>（3）    将证书tomcat.crt导入到JVM中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -import -keystore /usr/java/jdk1.8.0_101/jre/lib/security/cacerts -file /opt/tomcat.crt -alias tomcat</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/3.png"></p>
<p>（4）    tomcat中配置https传输<br>&emsp;&emsp;在tomcat下找到<code>/conf/server.xml</code>,默认tomcat是没有打开https的:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">SSLEnabled</span>=<span class="string">"true"</span> <span class="attr">clientAuth</span>=<span class="string">"false"</span> <span class="attr">keystoreFile</span>=<span class="string">"/root/keystore"</span> <span class="attr">keystorePass</span>=<span class="string">"changeit"</span> <span class="attr">maxThreads</span>=<span class="string">"150"</span> <span class="attr">port</span>=<span class="string">"443"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> <span class="attr">scheme</span>=<span class="string">"https"</span> <span class="attr">secure</span>=<span class="string">"true"</span> <span class="attr">sslProtocol</span>=<span class="string">"TLS"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>（5）    配置域名<br>&emsp;&emsp;在测试环境中，为了能使用域名<a href="https://www.jiangyayu.com" target="_blank" rel="external">https://www.jiangyayu.com</a> 访问CAS服务器，需要简单配置一下客户端的<code>hosts</code>文件，在<code>hosts</code>文件末添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.31.110 www.jiangyayu.com</div></pre></td></tr></table></figure></p>
<p>（6）    启动tomcat，在客户端访问：<a href="https://www.jiangyayu.com" target="_blank" rel="external">https://www.jiangyayu.com</a><br>&emsp;&emsp;浏览器给出警告：<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/4.png"><br>选择高级-&gt;继续前往，则通过HTTPS加密协议访问到tomcat的主页：<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/5.png"></p>
<h2 id="配置CAS服务器"><a href="#配置CAS服务器" class="headerlink" title="配置CAS服务器"></a>配置CAS服务器</h2><p>（1）    CAS服务器端配置<br>&emsp;&emsp;CAS服务端下载：<a href="https://developer.jasig.org/cas/" target="_blank" rel="external">https://developer.jasig.org/cas/</a><br>&emsp;&emsp;下载完成后将<code>cas-server-4.0.0-release.zip</code>解压，解压<code>cas-server-4.0.0-release/modules/cas-server-webapp-4.0.0.war</code>，改名为<code>cas.war</code>，然后复制cas目录到你的<code>tomcat/webapp</code>目录下。<br>（2）    访问CAS应用<br>&emsp;&emsp;<a href="https://www.jiangyayu.com/cas" target="_blank" rel="external">https://www.jiangyayu.com/cas</a><br>&emsp;&emsp;打开了CAS服务器的页面输入账户/密码：casuser/Mellon<br><strong>注：</strong>cas4.0后默认的密码验证不是简单的相同了。在配置文件里， 默认是 casuser：Mellon。<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/6.png"></p>
<h2 id="配置应用服务器"><a href="#配置应用服务器" class="headerlink" title="配置应用服务器"></a>配置应用服务器</h2><p>（1）配置环境<br>&emsp;&emsp;再应用服务器上安装配置好JDK、Tomcat，并启用HTTPS传输协议，并在客户端<code>hosts</code>文件中为客户端服务器指定域名：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.31.110 www.app1.com</div></pre></td></tr></table></figure></p>
<p>（2）    部署客户端webapp<br>&emsp;&emsp;此处使用Tomcat自带的<code>examples</code>。进入Tomcat安装目录下的<code>webapp</code>文件夹，将其中的<code>examples</code>文件夹复制一份并重命名为<code>test</code>。<br>（3）    下载<code>cas-client-3.3.3-release.zip</code>。<br>（4）    添加所需jar<br>&emsp;&emsp;进入<code>test</code>文件夹，删除<code>WEB-INF/lib</code>中的所有jar包。解压<code>cas-client-3.3.3-release.zip</code>，将<code>modules</code>中的所有jar文件复制到<code>WEB-INF</code>中。<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/7.png"><br>（5）    修改<code>WEB-INF/web.xml</code>，添加以下内容：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- ==================== 单点登录开始 ===================== --&gt;</span></div><div class="line">    <span class="comment">&lt;!--用于单点退出，该过滤器用于实现单点登出功能，可选配置 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.jasig.cas.client.session.SingleSignOutHttpSessionListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--该过滤器用于实现单点登出功能，可选配置。 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASSingle Sign OutFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.jasig.cas.client.session.SingleSignOutFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASSingle Sign OutFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.jasig.cas.client.authentication.AuthenticationFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>casServerLoginUrl<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>https://www.jiangyayu.com/cas/login<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>serverName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>https://www.app1.com<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--该过滤器负责对Ticket的校验工作，必须启用它 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASValidationFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></div><div class="line">            org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter</div><div class="line">        <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>casServerUrlPrefix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>https://www.jiangyayu.com/cas<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>serverName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>https://www.app1.com<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASValidationFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 该过滤器负责实现HttpServletRequest请求的包裹， 比如允许开发者通过HttpServletRequest的getRemoteUser()方法获得SSO登录用户的登录名，可选配置。 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASHttpServletRequest WrapperFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></div><div class="line">            org.jasig.cas.client.util.HttpServletRequestWrapperFilter</div><div class="line">        <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASHttpServletRequest WrapperFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 该过滤器使得开发者可以通过org.jasig.cas.client.util.AssertionHolder来获取用户的登录名。 比如AssertionHolder.getAssertion().getPrincipal().getName()。 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASAssertion Thread LocalFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.jasig.cas.client.util.AssertionThreadLocalFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CASAssertion Thread LocalFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- ========================单点登录结束 ======================== --&gt;</span></div></pre></td></tr></table></figure></p>
<p>（6）    重启Tomcat<br>（7）    测试<br>&emsp;&emsp;打开客户机浏览器，访问<a href="https://www.app1.com/test" target="_blank" rel="external">https://www.app1.com/test</a> ，跳转到地址：<a href="https://www.jiangyayu.com/cas/login?service=https%3A%2F%2Fwww.app1.com%2Ftest%2F" target="_blank" rel="external">https://www.jiangyayu.com/cas/login?service=https%3A%2F%2Fwww.app1.com%2Ftest%2F</a><br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/8.png"><br>&emsp;&emsp;输入CAS的用户/密码（casuser/Mellon），跳转回访问界面：<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/9.png"><br>&emsp;&emsp;表示CAS验证通过。此时新建标签页，再次访问<a href="https://www.app1.com/test，发现无需再次验证可以直接访问：" target="_blank" rel="external">https://www.app1.com/test，发现无需再次验证可以直接访问：</a><br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/10.png"></p>
<h2 id="通过数据库中的用户密码认证"><a href="#通过数据库中的用户密码认证" class="headerlink" title="通过数据库中的用户密码认证"></a>通过数据库中的用户密码认证</h2><p>（1）    mysql中创建用户数据库<br>&emsp;&emsp;创建用于存放用户数据的数据库：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> db_user;</div></pre></td></tr></table></figure></p>
<p>（2）    创建用户表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">` t_user`</span> (</div><div class="line"> 		 <span class="string">`Id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line"> 		 <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line"> 		 <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line"> 	 PRIMARY <span class="keyword">KEY</span> (<span class="string">`Id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=MyISAM <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div></pre></td></tr></table></figure></p>
<p>（3）    创建用户表<br>&emsp;&emsp;向表中插入以下数据：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`sso_t_user`</span> <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'admin'</span>,<span class="string">'96e79218965eb72c92a549dd5a330112'</span>);</div></pre></td></tr></table></figure></p>
<p><strong>注：</strong>密码以MD5 加密后存放数据库中为例<br>“111111”的MD5值为：“96e79218965eb72c92a549dd5a330112”<br>（4）    修改cas服务端配置<br>&emsp;&emsp;在<code>%tomcat_cas%/webapps/cas/WEB_INF/deployerConfigContext.xml</code> 找到如下信息：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"primaryAuthenticationHandler"</span></span></div><div class="line">          <span class="attr">class</span>=<span class="string">"org.jasig.cas.authentication.AcceptUsersAuthenticationHandler"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"users"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"casuser"</span> <span class="attr">value</span>=<span class="string">"Mellon"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;修改成如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"primaryAuthenticationHandler"</span> <span class="attr">class</span>=<span class="string">"org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sql"</span> <span class="attr">value</span>=<span class="string">"select password from t_user where username=?"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"passwordEncoder"</span> <span class="attr">ref</span>=<span class="string">"MD5PasswordEncoder"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;同时增加datasource和加密处理两个bean的定义：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span></span></div><div class="line">		<span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">" jdbc:mysql://localhost:3306/db_user"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"1qaz2wsx"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MD5PasswordEncoder"</span></span></div><div class="line">		<span class="attr">class</span>=<span class="string">"org.jasig.cas.authentication.handler.DefaultPasswordEncoder"</span>&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"MD5"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>（5）    添加相关的jar包<br>&emsp;&emsp;需要在cas的web项目lib文件夹下添加两个包：<code>cas-server-support-jdbc-x.x.x.jar</code> 和 <code>mysql-connector-java-x.x.x-bin.jar</code>。<br>（6）    访问CAS主页<br>&emsp;&emsp;通过账号密码：admin/111111访问CAS主页 通过验证<br><img src="http://source.jiangyayu.cn/CAS-Single-Sign-On/11.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SSO和CAS&quot;&gt;&lt;a href=&quot;#SSO和CAS&quot; class=&quot;headerlink&quot; title=&quot;SSO和CAS&quot;&gt;&lt;/a&gt;SSO和CAS&lt;/h2&gt;&lt;p&gt;&amp;emsp;&amp;emsp;单点登录（SingleSign On , 简称 SSO ）是目前比较流行的服务于企业业务整合的解决方案之一， SSO使得在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://blog.jiangyayu.cn/categories/Linux/"/>
    
    
      <category term="服务器" scheme="https://blog.jiangyayu.cn/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="单点登录" scheme="https://blog.jiangyayu.cn/tags/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"/>
    
      <category term="CAS" scheme="https://blog.jiangyayu.cn/tags/CAS/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.5中Tomcat的安装配置</title>
    <link href="https://blog.jiangyayu.cn//archives/tomcat-install.html"/>
    <id>https://blog.jiangyayu.cn//archives/tomcat-install.html</id>
    <published>2016-10-05T12:26:30.000Z</published>
    <updated>2017-03-02T14:50:20.411Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。<br><a id="more"></a></p>
<h2 id="JDK的安装配置"><a href="#JDK的安装配置" class="headerlink" title="JDK的安装配置"></a>JDK的安装配置</h2><p>&emsp;&emsp;tomcat的运行依赖于Java jdk，所以安装Tomcat前需要先安装jdk，已安装的可以跳过此步骤。判断主机是否安装jdk的方法：输入命令<code>java -version</code>，如果显示jdk版本号，则证明已经安装，如果不显示，则证明没有安装，如果没有安装则按照以下方法下载安装。</p>
<ol>
<li>下载对应版本的JDK：<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></li>
<li>解压或安装到指定路径<br><code>tar -zxv -f  jdk-8u65-linux-i586.gz</code></li>
<li><p>配置环境变量<br><code>vim /etc/profile</code><br>将下面的内容复制到<code>profile</code>文件的底部：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">JAVA_HOME=/usr/java/jdk1.8.0_101</div><div class="line">PATH=$JAVA_HOME/bin:$PATH</div><div class="line">CLASSPATH=$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jar</div><div class="line">export PATH JAVA_HOME CLASSPATH</div></pre></td></tr></table></figure>
</li>
<li><p>保存并退出</p>
</li>
<li>使<code>profile</code>文件立即生效：<br><code>source /etc/profile</code></li>
</ol>
<h2 id="Tomcat安装配置"><a href="#Tomcat安装配置" class="headerlink" title="Tomcat安装配置"></a>Tomcat安装配置</h2><ol>
<li>下载对应版本的Tomcat：<br> <a href="http://tomcat.apache.org/download-80.cgi" target="_blank" rel="external">http://tomcat.apache.org/download-80.cgi</a></li>
<li>解压到指定路径</li>
<li><p>关闭防火墙、关闭SELinux：<br><code>chkconfig iptables off</code><br><code>vim /etc/selinux/config</code><br>将<code>SELINUX</code>改为<code>disabled</code><br>&emsp;&emsp;通过以上设置，运行<code>/usr/local/ /tomcat/bin/startup.sh</code>，出现以下情况，表示已成功启动Tomcat<br><img src="http://source.jiangyayu.cn/tomcat-install/1.png"><br>此时，在浏览器中访问：localhost:8080，应有一下界面：<br><img src="http://source.jiangyayu.cn/tomcat-install/2.png"></p>
</li>
<li><p>设置tomcat的服务器启动和关闭<br>执行命令：<code>vim /etc/rc.d/init.d/tomcat</code>，创建脚本文件，在文件中写入如下代码，保存并且退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"># /etc/rc.d/init.d/tomcat</div><div class="line"># init script for tomcat precesses</div><div class="line"># processname: tomcat</div><div class="line"># description: tomcat is a j2se server</div><div class="line"># chkconfig: 2345 86 16</div><div class="line"># description: Start up the Tomcat servlet engine.</div><div class="line"></div><div class="line">if [ -f /etc/init.d/functions ]; then</div><div class="line">. /etc/init.d/functions</div><div class="line">elif [ -f /etc/rc.d/init.d/functions ]; then</div><div class="line">. /etc/rc.d/init.d/functions</div><div class="line">else</div><div class="line">echo -e &quot;\atomcat: unable to locate functions lib. Cannot continue.&quot;</div><div class="line">exit -1</div><div class="line">fi</div><div class="line">RETVAL=$?</div><div class="line">CATALINA_HOME=&quot;/usr/local /tomcat&quot;   </div><div class="line">#tomcat安装目录，你安装在什么目录下就复制什么目录</div><div class="line">case &quot;$1&quot; in</div><div class="line">start)</div><div class="line">if [ -f $CATALINA_HOME/bin/startup.sh ];</div><div class="line">then</div><div class="line">echo $&quot;Starting Tomcat&quot;</div><div class="line">$CATALINA_HOME/bin/startup.sh</div><div class="line">fi</div><div class="line">;;</div><div class="line">stop)</div><div class="line">if [ -f $CATALINA_HOME/bin/shutdown.sh ];</div><div class="line">then</div><div class="line">echo $&quot;Stopping Tomcat&quot;</div><div class="line">$CATALINA_HOME/bin/shutdown.sh</div><div class="line">fi</div><div class="line">;;</div><div class="line">*)</div><div class="line">echo $&quot;Usage: $0 &#123;start|stop&#125;&quot;</div><div class="line">exit 1</div><div class="line">;;</div><div class="line">esac</div><div class="line">exit $RETVAL </div><div class="line"></div><div class="line">Linux</div></pre></td></tr></table></figure>
</li>
<li><p>给文件添加权限，使得脚本文件可以执行，命令为 <code>chmod 755 /etc/rc.d/init.d/tomcat</code></p>
</li>
<li>将其添加到服务中，命令为 <code>chkconfig --add /etc/rc.d/init.d/tomcat</code></li>
<li><p>然后将下面的配置文件加到tomcat中的<code>catalina.sh</code>文件中的最后面，命令为：<br> <code>vim /usr/local/kencery/tomcat/bin/catalina.sh</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/java/jdk1.8.0_101</div><div class="line"># javajdk的安装路径，使用echo $JAVA_HOME命令可以读取</div><div class="line">export CATALINA_HOME=/usr/local/kencery/tomcat</div><div class="line">export CATALINA_BASE=/usr/local/kencery/tomcat</div><div class="line">export CATALINA_TMPDIR=/usr/local/kencery/tomcat/temp</div></pre></td></tr></table></figure>
</li>
</ol>
<p>&emsp;&emsp;通过以上设置，可以通过：<code>service tomcat start</code> 和 <code>service tomcat stop</code>来启动和停止tomcat服务了<br><img src="http://source.jiangyayu.cn/tomcat-install/3.png"></p>
<ol>
<li><p>设置tomcat的开机启动<br>打开linux设置开启启动的文件，将下面的配置文件写入此文件的最后，命令为：<br><code>vim /etc/rc.d/rc.local</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/java/jdk1.8.0_101</div><div class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line">export PATH=$PATH:$JAVA_HOME/bin</div><div class="line">export CATALINA_HOME=/usr/local/kencery/tomcat/</div><div class="line">#tomcat自启动</div><div class="line">/usr/local /tomcat/bin/startup</div></pre></td></tr></table></figure>
</li>
<li><p>设置tomcat用户名和密码<br> 在tomcat安装包下面的conf文件下含有一个<code>tomcat-user.xml</code>文件，修改此文件即可，命令为：<code>vim tomcat-users.xml</code><br>在打开的xml配置文件最后面写入下面这段配置文件之后保存并且退出即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"admin-gui"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-gui"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">"admin"</span> <span class="attr">password</span>=<span class="string">"admin"</span> <span class="attr">roles</span>=<span class="string">"manager-gui,admin-gui"</span>/&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://blog.jiangyayu.cn/categories/Linux/"/>
    
    
      <category term="服务器" scheme="https://blog.jiangyayu.cn/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="CentOS" scheme="https://blog.jiangyayu.cn/tags/CentOS/"/>
    
      <category term="Tomcat" scheme="https://blog.jiangyayu.cn/tags/Tomcat/"/>
    
  </entry>
  
  <entry>
    <title>C#实现定积分求解</title>
    <link href="https://blog.jiangyayu.cn//archives/Integrals.html"/>
    <id>https://blog.jiangyayu.cn//archives/Integrals.html</id>
    <published>2016-09-12T01:26:25.000Z</published>
    <updated>2017-03-20T14:06:36.213Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;在科学研究和实际生产中，经常遇到求积分的计算问题。我们知道在高等数学中，可以通过牛顿-莱布尼兹公式推导原函数的方法求得积分。而本篇博客中将从定积分的物理意义出发，通过原函数的图像的手段来近似地求解给定函数的定积分。<br><a id="more"></a></p>
<h2 id="随机投点法（蒙特卡洛算法）"><a href="#随机投点法（蒙特卡洛算法）" class="headerlink" title="随机投点法（蒙特卡洛算法）"></a>随机投点法（蒙特卡洛算法）</h2><p>&emsp;&emsp;在a到b和函数组成的矩形的范围内，随机投N个点，落到绿色阴影点的个数为M个，对于此图来说便可以容易得知积分的值（绿色阴影）为(M/N)*矩形面积。<br><img src="http://source.jiangyayu.cn/integrals/1.png" alter="蒙特卡洛算法原理"><br>&emsp;&emsp;考虑到积分的正负性，随机点落到积分面积内时，分为两种情况：当随机点落在x轴上方时，计数加一，随机点落在x轴下方时，计数减一。<br><img src="http://source.jiangyayu.cn/integrals/2.png" alter="蒙特卡洛算法原理"><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">methodMTK</span>(<span class="params"> <span class="keyword">double</span> upLimit, <span class="keyword">double</span> lowLimit</span>)</span></div><div class="line">&#123;</div><div class="line">    Random randx = <span class="keyword">new</span> Random();</div><div class="line">    Random randy = <span class="keyword">new</span> Random();</div><div class="line">    <span class="keyword">double</span> result = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> N = <span class="number">1000000</span>;  </div><div class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">double</span> x = lowLimit + (upLimit - lowLimit) * randx.NextDouble();</div><div class="line">        <span class="keyword">double</span> y = yMin + (yMax - yMin) * randx.NextDouble(); ;</div><div class="line">        <span class="keyword">if</span> (f(x) &gt; <span class="number">0</span> &amp;&amp; f(x) &gt;= y &amp;&amp; y &gt;= <span class="number">0</span>)</div><div class="line">            count++;</div><div class="line">        <span class="keyword">if</span> (f(x) &lt; <span class="number">0</span> &amp;&amp; f(x) &lt;= y &amp;&amp; y &lt;= <span class="number">0</span>)</div><div class="line">            count--;</div><div class="line">    &#125;</div><div class="line">    result = Math.Abs(((<span class="keyword">double</span>)count / N) * ((yMax-yMin)*(upLimit-lowLimit)));</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="定义法求积分"><a href="#定义法求积分" class="headerlink" title="定义法求积分"></a>定义法求积分</h2><p>&emsp;&emsp;把一块面积分解成N个小矩形，然后求面积和，最后求极限。我们就利用这种方式来实现它，但我们的N毕竟有限，为了结果更准确，把求矩形面积改成求梯形面积（当然矩形也是可以的），如下图：<br><img src="http://source.jiangyayu.cn/integrals/3.png" alter="定义法求解定积分"><br>&emsp;&emsp;把$\left(a,b\right)$分成$N$等分，积分值等于$S_{1}+S_{2}+….+S_{n}$，其中 $S_{i} = \left(f\left(x_{i}\right) + f\left(x_{i+1}\right)\right) * \left(b-a\right)/n / 2$ (矩形面积公式）。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">methodDY</span>(<span class="params"><span class="keyword">double</span> upLimit, <span class="keyword">double</span> lowLimit</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> N = <span class="number">1000000</span>;</div><div class="line">    <span class="keyword">double</span> step = (upLimit - lowLimit) / N;</div><div class="line">    <span class="keyword">double</span> result = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</div><div class="line">    &#123;</div><div class="line">        result += f(lowLimit+step*i) * step;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="变步长梯形求积分法"><a href="#变步长梯形求积分法" class="headerlink" title="变步长梯形求积分法"></a>变步长梯形求积分法</h2><p>&emsp;&emsp;用定义求积分法，要确定积分的误差是很难的，我们无法找到一个正好的N值符合我们要求的误差值，所以就需对定义法进行改进，改进的方式就是把原来固定的步长改为变化的步长，利用二分法，如下图：<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/integrals/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/integrals/4.png" alter="变步长梯形求定积分"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/integrals/5.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/integrals/5.png" alter="变步长梯形求定积分"></a></div><div class="group-picture-column" style="width: 33.333333333333336%;"><a href="http://source.jiangyayu.cn/integrals/6.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/integrals/6.png" alter="变步长梯形求定积分"></a></div></div></div></div><br>&emsp;&emsp;分到 <code>| 后一个面积和 - 前一个面积和 |  &lt; 规定误差</code> 时。这样我们就达到了精确的目的。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">methodBBCTX</span>(<span class="params"><span class="keyword">double</span> upLimit, <span class="keyword">double</span> lowLimit</span>)</span></div><div class="line">&#123; </div><div class="line">    <span class="keyword">double</span> e = <span class="number">0.0000001</span>;</div><div class="line">    <span class="keyword">double</span> s0 = <span class="number">0</span>;</div><div class="line">    <span class="keyword">double</span> s = <span class="number">05</span> * (f(upLimit) + f(lowLimit)) * (upLimit - lowLimit);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; Math.Abs(s - s0) &gt; e; i *= <span class="number">2</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">double</span> h = (upLimit - lowLimit) / i;</div><div class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> a = lowLimit;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)</div><div class="line">        &#123;</div><div class="line">            sum += <span class="number">0.5</span> * (f(a) + f(a + h)) * h;</div><div class="line">            a = a + h;</div><div class="line">        &#125;</div><div class="line">        s0 = s;</div><div class="line">        s = sum;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> s0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="C-实现"><a href="#C-实现" class="headerlink" title="C#实现"></a>C#实现</h2><p>&emsp;&emsp;应用程序主界面：<br><img src="http://source.jiangyayu.cn/integrals/7.png" style="zoom:0.7" alter="窗体程序"></p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><ol>
<li>输入参数<br>&emsp;&emsp;如下图所示，标识部分为程序的输入部分，包含以下几个必要的输入参数：<br>1) 被积函数：该部分为被积函数的表达式，变量需用x表示，如<code>0.5*x</code>、<code>0.5*x+0.25*x*x*x</code>。同时，该部分还支持C#的<code>Math</code>库中的函数，如<code>Math.Sqrt()</code>、<code>Math.Abs()</code>、<code>Math.Tan()</code>等。<br>2) 积分上限：定积分的积分上限。<br>3) 积分下限：定积分的积分下限。<br>4) 积分方法：该应用程序用来求解定积分所使用的算法，包括：蒙特卡洛算法(随机投点法)、定积分定义法、变步长梯形求积分法。<br><img src="http://source.jiangyayu.cn/integrals/8.png" style="zoom:0.7" alter="窗体程序"></li>
<li>函数表达式的动态编译<br>&emsp;&emsp;由于函数表达式是在程序运行后手动输入的，因此函数表达式不能被当做代码执行。这里提供的解决方案是使用动态编译技术，让函数表达式被动态编译到内存中，供主程序调用，具体实现如下：<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//动态编译代码</span></div><div class="line"> <span class="function"><span class="keyword">private</span> CompilerResults <span class="title">getCompilerResult</span>(<span class="params"><span class="keyword">string</span> expression</span>)</span></div><div class="line"> &#123;</div><div class="line">     <span class="comment">//动态编译函数表达式</span></div><div class="line">     CSharpCodeProvider provider = <span class="keyword">new</span> CSharpCodeProvider();</div><div class="line">     CompilerParameters parameter = <span class="keyword">new</span> CompilerParameters();</div><div class="line">     parameter.ReferencedAssemblies.Add(<span class="string">"System.dll"</span>);</div><div class="line">     parameter.GenerateExecutable = <span class="literal">false</span>;       <span class="comment">//&lt;--不生成exe</span></div><div class="line">     parameter.GenerateInMemory = <span class="literal">true</span>;          <span class="comment">//&lt;--直接在内存运行</span></div><div class="line">     CompilerResults result = provider.CompileAssemblyFromSource(parameter, GenerateCodeBlocks(expression));</div><div class="line">     <span class="comment">//动态编译</span></div><div class="line">     <span class="keyword">if</span> (result.Errors.Count &gt; <span class="number">0</span>)</div><div class="line">     &#123;</div><div class="line">         MessageBox.Show(<span class="string">"函数表达式错误！"</span>, <span class="string">"Error"</span>, MessageBoxButtons.OK);</div><div class="line">         <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">return</span> result;</div><div class="line"> &#125;</div><div class="line"> </div><div class="line"> <span class="comment">//拼接代码块</span></div><div class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">string</span> <span class="title">GenerateCodeBlocks</span>(<span class="params"><span class="keyword">string</span> formula</span>)</span></div><div class="line"> &#123;</div><div class="line">     <span class="keyword">string</span> code =</div><div class="line">         <span class="string">"using System;"</span> +</div><div class="line">         <span class="string">"namespace demo"</span> +</div><div class="line">         <span class="string">"&#123;"</span> +</div><div class="line">            <span class="string">"public static class calculation"</span> +</div><div class="line">            <span class="string">"&#123;"</span> +</div><div class="line">            <span class="string">"public static double dowork(double x, double y)"</span> +</div><div class="line">            <span class="string">"&#123; return "</span> + formula +</div><div class="line">            <span class="string">";&#125;&#125;&#125;"</span>; <span class="comment">//这里是将你的formula和代码片段拼接成完整的程序准备编译的过程。</span></div><div class="line">     <span class="keyword">return</span> code;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"><span class="comment">//实现函数表达式求值</span></div><div class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">private</span> <span class="keyword">double</span> <span class="title">f</span>(<span class="params"><span class="keyword">double</span> x</span>)</span></div><div class="line"> &#123;</div><div class="line">     <span class="keyword">if</span> (compResult == <span class="literal">null</span>)</div><div class="line">     &#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">else</span></div><div class="line">         <span class="keyword">return</span> Convert.ToDouble(compResult.CompiledAssembly.GetType(<span class="string">"demo.calculation"</span>).GetMethod(<span class="string">"dowork"</span>).Invoke(<span class="literal">null</span>, <span class="keyword">new</span> <span class="keyword">object</span>[] &#123; x, <span class="number">0</span> &#125;));</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>&emsp;&emsp;设置好输入参数后，点击下面的计算按钮，即可使用选定的方法计算所输入定积分的结果：<br><img src="http://source.jiangyayu.cn/integrals/9.png" style="zoom:0.7" alter="窗体程序"><br><strong>注：</strong><br>&emsp;&emsp;1)由于是近似求解，其结果与实际定积分的结果有一定偏差，但一般较小，在非精确计算的情况下可以忽略。<br>&emsp;&emsp;2)一般而言，蒙特卡洛算法的精确度随着投点数的增加而越来越接近真实值，但由于本程序兼顾计算效率问题，将投点数设置为1000000，有需要的可以修改。<br>&emsp;&emsp;3)定义法和变步长梯形求积分法在具有较高计算效率的同时有较好的精确度。<br>&emsp;&emsp;4)针对线性函数的定积分求解，由于算法的特性决定变步长梯形求解法效率最高，且没有误差。</p>
<h3 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h3><p>&emsp;&emsp;本应用程序在计算结果的同时，还能显示被积函数的函数图像：<br><img src="http://source.jiangyayu.cn/integrals/10.png" style="zoom:0.7" alter="窗体程序"><br>&emsp;&emsp;此处的函数图像的显示使用的是<a href="http://source.jiangyayu.cn/integrals/ZedGraph.dll" target="_blank" rel="external">ZedGraph</a>控件,其Sourceforge的下载地址为：<a href="https://sourceforge.net/projects/zedgraph/" target="_blank" rel="external">https://sourceforge.net/projects/zedgraph/</a><br>&emsp;&emsp;在点击计算按钮的时候调用绘图函数绘制函数图像，绘图部分的实现如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"><span class="keyword">double</span> upLimit,<span class="keyword">double</span> lowLimit</span>)</span></div><div class="line">&#123;</div><div class="line">    zedGraphControl1.GraphPane.CurveList.Clear();</div><div class="line"></div><div class="line">    <span class="keyword">double</span>[] Xs = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">1000</span>];</div><div class="line">    <span class="keyword">double</span>[] Ys = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">1000</span>];</div><div class="line">    Xs[<span class="number">0</span>] = lowLimit;</div><div class="line">    Ys[<span class="number">0</span>] = f(lowLimit);</div><div class="line">    <span class="keyword">double</span> step = (upLimit - lowLimit) / <span class="number">1000</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">1000</span>; i++)</div><div class="line">    &#123;</div><div class="line">        Xs[i] = Xs[i - <span class="number">1</span>] + step;</div><div class="line">        Ys[i] = f(Xs[i]);</div><div class="line">        yMin = Ys[i] &lt; yMin ? Ys[i] : yMin;</div><div class="line">        yMax = Ys[i] &gt; yMax ? Ys[i] : yMax;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    zedGraphControl1.GraphPane.AddCurve(<span class="string">"f(x)"</span>, Xs, Ys, Color.Blue, SymbolType.None);</div><div class="line">    zedGraphControl1.AxisChange();</div><div class="line">    zedGraphControl1.Invalidate();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="GitHub项目地址"><a href="#GitHub项目地址" class="headerlink" title="GitHub项目地址"></a>GitHub项目地址</h3><p><a href="https://github.com/Alexander-Chiang/Integrals" target="_blank" rel="external">https://github.com/Alexander-Chiang/Integrals</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;在科学研究和实际生产中，经常遇到求积分的计算问题。我们知道在高等数学中，可以通过牛顿-莱布尼兹公式推导原函数的方法求得积分。而本篇博客中将从定积分的物理意义出发，通过原函数的图像的手段来近似地求解给定函数的定积分。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://blog.jiangyayu.cn/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="C#" scheme="https://blog.jiangyayu.cn/tags/C/"/>
    
      <category term="定积分求解" scheme="https://blog.jiangyayu.cn/tags/%E5%AE%9A%E7%A7%AF%E5%88%86%E6%B1%82%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>NetCDF格式存储的栅格数据转换的MATLAB批处理程序</title>
    <link href="https://blog.jiangyayu.cn//archives/matlab-nc.html"/>
    <id>https://blog.jiangyayu.cn//archives/matlab-nc.html</id>
    <published>2016-04-20T04:53:40.000Z</published>
    <updated>2017-03-02T14:50:05.261Z</updated>
    
    <content type="html"><![CDATA[<h2 id="处理环境"><a href="#处理环境" class="headerlink" title="处理环境"></a>处理环境</h2><p>操作系统：Windows 10 64bit<br>软件：MATLAB R2016a<br>&emsp;&emsp;&emsp;ArcGIS Desktop 10.2<br>数据下载：链接：<a href="http://pan.baidu.com/s/1slIZ5nR" target="_blank" rel="external">http://pan.baidu.com/s/1slIZ5nR</a> 密码：2z3f<br><a id="more"></a></p>
<h2 id="MATLAB批量处理NetCDF文件"><a href="#MATLAB批量处理NetCDF文件" class="headerlink" title="MATLAB批量处理NetCDF文件"></a>MATLAB批量处理NetCDF文件</h2><h3 id="设置输入输出"><a href="#设置输入输出" class="headerlink" title="设置输入输出"></a>设置输入输出</h3><p>&emsp;&emsp;将待处理的*.nc文件统一放在NDVI文件夹中，在MATLAB中设置输入输出路径：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pathinput = <span class="string">'D:\Program Files\MATLAB\Work\NDVI'</span>;</div><div class="line">pathoutput = <span class="string">'D:\output\';</span></div></pre></td></tr></table></figure></p>
<h3 id="获取输入文件名"><a href="#获取输入文件名" class="headerlink" title="获取输入文件名"></a>获取输入文件名</h3><p>&emsp;&emsp;执行以下命令，可将输入文件夹NDVI中的所有文件信息存储到<code>files</code>变量中：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">filedir = dir(pathinput);</div><div class="line">files = filedir(<span class="number">3</span>:<span class="keyword">end</span>);</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/matlab-nc/1.png"></p>
<h3 id="查看NetCDF文件内部格式"><a href="#查看NetCDF文件内部格式" class="headerlink" title="查看NetCDF文件内部格式"></a>查看NetCDF文件内部格式</h3><p>&emsp;&emsp;查看NetCDF文件内部格式以读取其中存储的数据：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; ncdisp(files(<span class="number">1</span>).name);</div><div class="line">Source:</div><div class="line">           D:\Program Files\MATLAB\Work\NDVI\A_19810816.nc</div><div class="line">Format:</div><div class="line">           netcdf4</div><div class="line">Global Attributes:</div><div class="line">           title                                 = <span class="string">'Normalized Difference Vegetation Index parameters derived from NOAA-07 GAC data for day 1981/228'</span></div><div class="line">           institution                           = <span class="string">'NASA/GSFC/SED/ESD/HBSL/TIS/MODIS-LAND &gt; MODIS Land Science Team, Terrestrial Information Systems,  Hydrospheric and Biospheric Science Laboratory, Earth Sciences Division, Science and Exploration Directorate, Goddard Space Flight Center, NASA'</span></div><div class="line">           Conventions                           = <span class="string">'CF-1.6'</span></div><div class="line">           Metadata_Conventions                  = <span class="string">'CF-1.6, Unidata Dataset Discovery v1.0'</span></div><div class="line">           standard_name_vocabulary              = <span class="string">'CF Standard Name Table (v25, 05 July 2013)'</span></div><div class="line">           naming_authority                      = <span class="string">'gov.noaa.ncdc'</span></div><div class="line">           license                               = <span class="string">'No constraints on data access or use'</span></div><div class="line">           cdm_data_type                         = <span class="string">'Grid'</span></div><div class="line">           time_coverage_start                   = <span class="string">'1981-08-16T00:00:00Z'</span></div><div class="line">           time_coverage_end                     = <span class="string">'1981-08-16T23:59:00Z'</span></div><div class="line">           product_version                       = <span class="string">'v4r0'</span></div><div class="line">           platform                              = <span class="string">'NOAA-4 &gt; National Oceanic &amp; Atmospheric Administration-4'</span></div><div class="line">           sensor                                = <span class="string">'AVHRR &gt; Advanced Very High Resolution Radiometer'</span></div><div class="line">           keywords_vocabulary                   = <span class="string">'NASA Global Change Master Directory (GCMD) Earth Science Keywords, Version 8.0'</span></div><div class="line">           keywords                              = <span class="string">'EARTH SCIENCE &gt; BIOSPHERE &gt; VEGETATION &gt; VEGETATION INDEX'</span></div><div class="line">           source                                = <span class="string">'NSS.GHRR.NC.D81227.S2221.E0015.B0075556.GC, NSS.GHRR.NC.D81228.S0016.E0210.B0075657.WI, NSS.GHRR.NC.D81228.S0205.E0359.B0075758.WI, NSS.GHRR.NC.D81228.S0354.E0548.B0075859.WI, NSS.GHRR.NC.D81228.S0545.E0718.B0075960.WI, NSS.GHRR.NC.D81228.S0713.E0859.B0076061.WI, NSS.GHRR.NC.D81228.S0854.E1036.B0076162.GC, NSS.GHRR.NC.D81228.S1031.E1157.B0076263.GC, NSS.GHRR.NC.D81228.S1157.E1217.B0076363.GC, NSS.GHRR.NC.D81228.S1212.E1357.B0076364.GC, NSS.GHRR.NC.D81228.S1354.E1546.B0076465.WI, NSS.GHRR.NC.D81228.S1542.E1735.B0076566.WI, NSS.GHRR.NC.D81228.S1731.E1846.B0076667.WI, NSS.GHRR.NC.D81228.S1842.E2025.B0076768.WI, NSS.GHRR.NC.D81228.S2020.E2214.B0076769.GC, NSS.GHRR.NC.D81228.S2210.E2356.B0076970.GC, NSS.GHRR.NC.D81228.S2351.E0140.B0077071.GC, NCEP_REANALYSIS_SURFACE_1981228.hdf, NCEP_REANALYSIS_SURFACE_1981228.hdf, TOMS_1981228.hdf, GLOBAL_LAND_SEA.4KM, ephemeris.ccar.23Oct2007'</span></div><div class="line">           date_created                          = <span class="string">'2013-08-17T18:43:40Z'</span></div><div class="line">           spatial_resolution                    = <span class="string">'0.050000 degrees per pixel'</span></div><div class="line">           geospatial_lat_min                    = <span class="number">-90</span></div><div class="line">           geospatial_lat_max                    = <span class="number">90</span></div><div class="line">           geospatial_lon_min                    = <span class="number">-180</span></div><div class="line">           geospatial_lon_max                    = <span class="number">180</span></div><div class="line">           metadata_link                         = <span class="string">'gov.noaa.ncdc:C00813'</span></div><div class="line">           cdr_program                           = <span class="string">'NOAA Climate Data Record Program for satellites'</span></div><div class="line">           cdr_variable                          = <span class="string">'NDVI'</span></div><div class="line">           Process                               = <span class="string">'LTDR_GAPS'</span></div><div class="line">           PostProcessingVersion                 = <span class="string">'2.3'</span></div><div class="line">           PFIIVersion                           = <span class="string">'3.5.28'</span></div><div class="line">           Satellite                             = <span class="string">'NOAA-07'</span></div><div class="line">           Instrument                            = <span class="string">'AVHRR'</span></div><div class="line">           InputDataType                         = <span class="string">'GAC'</span></div><div class="line">           summary                               = <span class="string">'AVHRR GAC data from NOAA-07 for 1981, days 228 to 228, processed by the Long-Term Land Data Record (LTDR) project (v3.5.28) into normalized difference vegetation index (NDVI) and quality-control flags'</span></div><div class="line">           ProductionDate                        = <span class="string">'2013-08-17T18:43:40.000000Z'</span></div><div class="line">           grid_mapping_name                     = <span class="string">'latitude_longitude'</span></div><div class="line">           ESDT                                  = <span class="string">'AVH13C1'</span></div><div class="line">           LocalGranuleId                        = <span class="string">'AVHRR-Land_v004_AVH13C1_NOAA-07_19810816_c20130817184340.nc'</span></div><div class="line">           id                                    = <span class="string">'AVHRR-Land_v004_AVH13C1_NOAA-07_19810816_c20130817184340.nc'</span></div><div class="line">           RangeBeginningDate                    = <span class="string">'1981-228'</span></div><div class="line">           RangeBeginningTime                    = <span class="string">'00:00:00.0000'</span></div><div class="line">           RangeEndingDate                       = <span class="string">'1981-228'</span></div><div class="line">           RangeEndingTime                       = <span class="string">'23:59:59.9999'</span></div><div class="line">           PercentMissingData                    = <span class="string">'11.46'</span></div><div class="line">           PercentValidDaytimeData               = <span class="string">'26.85'</span></div><div class="line">           PercentValidDaytimeLand               = <span class="string">'26.85'</span></div><div class="line">           PercentValidClearDaytimeLand          = <span class="string">'6.95'</span></div><div class="line">           PercentValidDaytimeLandInCloudShadow  = <span class="string">'1.21'</span></div><div class="line">           PercentValidClearDaytimeWater         = <span class="string">'0.00'</span></div><div class="line">           PercentValidDaytimeWaterInCloudShadow = <span class="string">'0.00'</span></div><div class="line">Dimensions:</div><div class="line">           latitude  = <span class="number">3600</span></div><div class="line">           longitude = <span class="number">7200</span></div><div class="line">           time      = <span class="number">1</span></div><div class="line">Variables:</div><div class="line">    latitude </div><div class="line">           Size:       <span class="number">3600</span>x1</div><div class="line">           Dimensions: latitude</div><div class="line">           Datatype:   single</div><div class="line">           Attributes:</div><div class="line">                       units         = <span class="string">'degrees_north'</span></div><div class="line">                       long_name     = <span class="string">'latitude'</span></div><div class="line">                       axis          = <span class="string">'Y'</span></div><div class="line">                       standard_name = <span class="string">'latitude'</span></div><div class="line">    longitude</div><div class="line">           Size:       <span class="number">7200</span>x1</div><div class="line">           Dimensions: longitude</div><div class="line">           Datatype:   single</div><div class="line">           Attributes:</div><div class="line">                       units         = <span class="string">'degrees_east'</span></div><div class="line">                       long_name     = <span class="string">'longitude'</span></div><div class="line">                       axis          = <span class="string">'X'</span></div><div class="line">                       standard_name = <span class="string">'longitude'</span></div><div class="line">    time     </div><div class="line">           Size:       <span class="number">1</span>x1</div><div class="line">           Dimensions: time</div><div class="line">           Datatype:   single</div><div class="line">           Attributes:</div><div class="line">                       units         = <span class="string">'days since 1981-01-01 00:00:00'</span></div><div class="line">                       long_name     = <span class="string">'time'</span></div><div class="line">                       axis          = <span class="string">'T'</span></div><div class="line">                       standard_name = <span class="string">'time'</span></div><div class="line">                       calendar      = <span class="string">'gregorian'</span></div><div class="line">    NDVI     </div><div class="line">           Size:       <span class="number">7200</span>x3600x1</div><div class="line">           Dimensions: longitude,latitude,time</div><div class="line">           Datatype:   int16</div><div class="line">           Attributes:</div><div class="line">                       scale_factor  = <span class="number">0.0001</span></div><div class="line">                       add_offset    = <span class="number">0</span></div><div class="line">                       long_name     = <span class="string">'NOAA Climate Data Record of Normalized Difference Vegetation Index'</span></div><div class="line">                       units         = <span class="string">'1'</span></div><div class="line">                       valid_range   = [<span class="number">-1000</span>  <span class="number">10000</span>]</div><div class="line">                       _FillValue    = <span class="number">-9999</span></div><div class="line">                       standard_name = <span class="string">'normalized_difference_vegetation_index'</span></div><div class="line">    TIMEOFDAY</div><div class="line">           Size:       <span class="number">7200</span>x3600x1</div><div class="line">           Dimensions: longitude,latitude,time</div><div class="line">           Datatype:   int16</div><div class="line">           Attributes:</div><div class="line">                       scale_factor = <span class="number">0.01</span></div><div class="line">                       add_offset   = <span class="number">0</span></div><div class="line">                       long_name    = <span class="string">'Time since Start of Data Day'</span></div><div class="line">                       units        = <span class="string">'h since 1981-08-16 00:00:00'</span></div><div class="line">                       valid_range  = [<span class="number">0</span>  <span class="number">2399</span>]</div><div class="line">                       _FillValue   = <span class="number">-9999</span></div><div class="line">    QA       </div><div class="line">           Size:       <span class="number">7200</span>x3600x1</div><div class="line">           Dimensions: longitude,latitude,time</div><div class="line">           Datatype:   int16</div><div class="line">           Attributes:</div><div class="line">                       flag_masks    = [<span class="number">2</span>      <span class="number">4</span>      <span class="number">8</span>     <span class="number">16</span>     <span class="number">32</span>     <span class="number">64</span>    <span class="number">128</span>    <span class="number">256</span>    <span class="number">512</span>   <span class="number">1024</span>   <span class="number">2048</span>   <span class="number">4096</span>   <span class="number">8192</span>  <span class="number">16384</span> <span class="number">-32768</span>]</div><div class="line">                       flag_meanings = <span class="string">'cloudy cloud_shadow water sunglint dense_dark_vegetation night ch1_to_5_valid ch1_invalid ch2_invalid ch3_invalid ch4_invalid ch5_invalid rho3_invalid BRDF_corr_problem polar_flag'</span></div><div class="line">                       long_name     = <span class="string">'Quality Assurance'</span></div></pre></td></tr></table></figure></p>
<h3 id="批量读取变量并另存为txt"><a href="#批量读取变量并另存为txt" class="headerlink" title="批量读取变量并另存为txt"></a>批量读取变量并另存为txt</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="built_in">length</span>(files)</div><div class="line"></div><div class="line">        fileinput = [pathinput,<span class="string">'\',files(i).name];</span></div><div class="line">        NDVI = ncread(fileinput,'NDVI<span class="string">');</span></div><div class="line">        FillValue = ncreadatt(fileinput,'NDVI<span class="string">','</span>_FillValue<span class="string">');</span></div><div class="line">        longitude = ncread(fileinput,'longitude<span class="string">');</span></div><div class="line">        latitude = ncread(fileinput,'latitude<span class="string">');</span></div><div class="line">        </div><div class="line">        NDVI(isnan(NDVI))=FillValue;</div><div class="line">        [m, n] = size(NDVI);</div><div class="line">        </div><div class="line">        fileoutput = [pathoutput,files(i).name(1:end-3),'.txt<span class="string">'];</span></div><div class="line">        ncols = ['ncols <span class="string">' num2str(m)];</span></div><div class="line">        nrows = ['nrows <span class="string">' num2str(n)];</span></div><div class="line">        xllcorner =  ['xllcorner <span class="string">' num2str(min(longitude))];</span></div><div class="line">        yllcorner = ['yllcorner <span class="string">' num2str(min(latitude))];</span></div><div class="line">        cellsize = ['cellsize <span class="string">' num2str(0.05)];</span></div><div class="line">        NODATA_value = ['NODATA_value <span class="string">' num2str(FillValue)];</span></div><div class="line">        </div><div class="line">        //写入栅格数据的头文件</div><div class="line">        dlmwrite(fileoutput,ncols,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        dlmwrite(fileoutput,nrows,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        dlmwrite(fileoutput,xllcorner,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        dlmwrite(fileoutput,yllcorner,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        dlmwrite(fileoutput,cellsize,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        dlmwrite(fileoutput,NODATA_value,'delimiter<span class="string">', '','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">        //写入数据</div><div class="line">        dlmwrite(fileoutput,fliplr(rot90(NDVI,3)),'delimiter<span class="string">','</span>\t<span class="string">','</span>newline<span class="string">','</span>pc<span class="string">','</span>-append<span class="string">');</span></div><div class="line">end</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/matlab-nc/2.png"></p>
<h2 id="ArcMap中另存为栅格数据"><a href="#ArcMap中另存为栅格数据" class="headerlink" title="ArcMap中另存为栅格数据"></a>ArcMap中另存为栅格数据</h2><p>&emsp;&emsp;在ArcMap中加载txt格式的栅格数据：<br><img src="http://source.jiangyayu.cn/matlab-nc/3.png"><br>&emsp;&emsp;使用工具箱中的ASCIIToRaster工具导出数据：<br><img src="http://source.jiangyayu.cn/matlab-nc/4.png"></p>
<h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><p>数据下载：链接：<a href="http://pan.baidu.com/s/1slIZ5nR" target="_blank" rel="external">http://pan.baidu.com/s/1slIZ5nR</a> 密码：2z3f<br>完整代码：<a href="http://source.jiangyayu.cn/matlab-nc/ndvi2raster.m" target="_blank" rel="external">ndvi2raster.m</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;处理环境&quot;&gt;&lt;a href=&quot;#处理环境&quot; class=&quot;headerlink&quot; title=&quot;处理环境&quot;&gt;&lt;/a&gt;处理环境&lt;/h2&gt;&lt;p&gt;操作系统：Windows 10 64bit&lt;br&gt;软件：MATLAB R2016a&lt;br&gt;&amp;emsp;&amp;emsp;&amp;emsp;ArcGIS Desktop 10.2&lt;br&gt;数据下载：链接：&lt;a href=&quot;http://pan.baidu.com/s/1slIZ5nR&quot;&gt;http://pan.baidu.com/s/1slIZ5nR&lt;/a&gt; 密码：2z3f&lt;br&gt;
    
    </summary>
    
      <category term="数据处理分析" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"/>
    
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="NetCDF" scheme="https://blog.jiangyayu.cn/tags/NetCDF/"/>
    
  </entry>
  
  <entry>
    <title>迭代法求解线性方程组--C#实现Jacobi、Gauss-Seidel、SOR迭代法</title>
    <link href="https://blog.jiangyayu.cn//archives/linear-equation.html"/>
    <id>https://blog.jiangyayu.cn//archives/linear-equation.html</id>
    <published>2016-04-12T01:26:25.000Z</published>
    <updated>2017-03-20T11:41:46.539Z</updated>
    
    <content type="html"><![CDATA[<p>当直接求解方程组 $Ax = b$ 较困难时, 我们可以求解一个近似方程组<br>$$Mx = b$$<br>设其解为 $x^{(1)}$<br>易知它与真解之间的误差满足<br>$$A\left(x_{*}-x^{(1)}\right) = b-Ax^{(1)}$$<br>如果 $x^{(1)}$ 已经满足精度要求, 则停止计算, 否则需要修正。<br><a id="more"></a><br>设修正量为$\Delta x$ 显然$\Delta x$满足方程 $A\Delta x = b-Ax^{(1)}$. 但由于直接求解该方程比较困难, 因此我们还是求解近似<br>$$M\Delta x = b − Ax^{(1)}$$<br>于是得到修正后的近似解<br>$$ x^{(2)}= x^{(1)}+\Delta x = x^{(1)}+M^{-1}\left(b-Ax^{(1)}\right) $$<br>若$x^{(2)}$已经满足精度要求, 则停止计算, 否则继续按以上的方式进行修正。<br>不断重复以上步骤, 于是, 我们就得到一个序列<br>$$x^{(1)},x^{(2)},…,x^{(k)},…$$<br>满足以下递推关系:<br>$$x^{(k+1)}=x^{(k)}+M^{-1}\left(b-Ax^{(k)}\right),  k=1,2,…$$<br>由于每次迭代的格式是一样的, 因此称为定常迭代。</p>
<p><strong>注：</strong>通常, 构造一个好的定常迭代, 需要考虑以下两点:<br>(1) 以$M$为系数矩阵的线性方程组必须要比原线性方程组容易求解;<br>(2) $M$应该是$A$的一个很好的近似, 或者迭代序列${x^{k}}$要收敛</p>
<h2 id="C-实现"><a href="#C-实现" class="headerlink" title="C#实现"></a>C#实现</h2><h3 id="应用程序界面"><a href="#应用程序界面" class="headerlink" title="应用程序界面"></a>应用程序界面</h3><p>&emsp;&emsp;应用程序包含菜单、输入输出、设置和日志模块，如图所示：<br><img src="http://source.jiangyayu.cn/linear-equation/1.png"></p>
<h3 id="数据说明"><a href="#数据说明" class="headerlink" title="数据说明"></a>数据说明</h3><ol>
<li>路径说明<br>&emsp;&emsp;程序启动时，会自动读取所在路径，默认的输入输出路径为应用程序目录下的input和output文件夹(下图所示)。程序计算所需的输入数据存应存放于input文件夹中，最终计算结果将输出到output文件夹中。<br>也可以通过修改输入输出路径的方法，重新指定输入数据存放的位置和最终计算结果的输出位置。<br><img src="http://source.jiangyayu.cn/linear-equation/2.png"></li>
<li>数据格式<br>（1）输入数据<br>&emsp;&emsp;位于应用程序所在路径下的input文件夹的.txt文本文件，其数据格式为：<br><img src="http://source.jiangyayu.cn/linear-equation/4.png"><br>第一行为线性方程组的未知数个数；<br>第二行起的数据代表线性方程组系数的增广矩阵，每一行表示一个线性方程。</li>
</ol>
<p>（2）输出结果<br>&emsp;&emsp;位于应用程序所在路径下的output文件夹的.txt文本文件，其数据格式为：<br>从第一行开始分别表示线性方程组的解x1,x2,x3,…的值，最后两行分别标识所使用迭代方法和迭代次数。<br><img src="http://source.jiangyayu.cn/linear-equation/5.png"></p>
<h3 id="参数设置"><a href="#参数设置" class="headerlink" title="参数设置"></a>参数设置</h3><p><img src="http://source.jiangyayu.cn/linear-equation/6.png"><br>如图所示部分为迭代求解过程中的参数数值的设定，<br><strong>最大迭代次数：</strong>指示迭代过程中，最大迭代的次数。迭代次数超过该值时停止迭代。<br><strong>收敛标准（ε）:</strong>当两次迭代所得数值之差的绝对值均小于某一给定的数ε时，视为已求得近似解。此时停止迭代，输出结果。<br>(<strong>注：</strong>以上条件满足其一，即停止迭代。)<br><strong>迭代方法：</strong>求解使用的迭代方法。该程序内置迭代方法有：Jacobi迭代法、Gauss-Seidel迭代法、逐次超松弛迭代法(SOR法)。<br><strong>松弛因子(ω)：</strong>SOR迭代法的参数，一般1&lt;ω&lt;2；</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;0&lt;ω&lt;1时，称为亚松弛法；</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;ω &gt; 1时，称为超松弛法；</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Ω=1时，即为高斯-塞德尔迭代；</p>
<h3 id="计算说明"><a href="#计算说明" class="headerlink" title="计算说明"></a>计算说明</h3><p>（1）    应用程序会遍历输入文件夹中的所有.txt文件，按照指定的数据格式读取文件<br><img src="http://source.jiangyayu.cn/linear-equation/8.png"><br>读取的输入文件格式为：<br><img src="http://source.jiangyayu.cn/linear-equation/4.png"><br>第一行为线性方程组的未知数个数；<br>第二行起的数据代表线性方程组系数的增广矩阵，每一行表示一个线性方程。<br>（2）    可以根据文件内容生成并显示方程<br><img src="http://source.jiangyayu.cn/linear-equation/9.png"><br>（3）    根据指定的参数和迭代方法求解方程组<br>（4）    显示求解结果<br><img src="http://source.jiangyayu.cn/linear-equation/10.png"><br>（5）    将最终结果存放至输出文件夹中，并命名为xxx_solution.txt<br><img src="http://source.jiangyayu.cn/linear-equation/11.png"><br><img src="http://source.jiangyayu.cn/linear-equation/5.png"><br>从第一行开始分别表示线性方程组的解x1,x2,x3,…的值，最后两行分别标识所使用迭代方法和迭代次数。</p>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>（1）    路径错误<br><img src="http://source.jiangyayu.cn/linear-equation/12.png"><br>（2） 文件为空<br><img src="http://source.jiangyayu.cn/linear-equation/13.png"><br>（3） 数据内容错误<br><img src="http://source.jiangyayu.cn/linear-equation/14.png"><br><img src="http://source.jiangyayu.cn/linear-equation/15.png"><br>（4） 解不收敛<br><img src="http://source.jiangyayu.cn/linear-equation/16.png"></p>
<h3 id="关键步骤代码"><a href="#关键步骤代码" class="headerlink" title="关键步骤代码"></a>关键步骤代码</h3><p>迭代部分的源码：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> 方程组系数增广矩阵等价变换</span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="c"&gt;</span>输入增广矩阵<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>等价变换后的增广矩阵<span class="doctag">&lt;/returns&gt;</span></span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;<span class="keyword">double</span>[]&gt;  matTrans(List&lt;<span class="keyword">double</span>[]&gt; c)</div><div class="line">&#123;</div><div class="line">    List&lt;<span class="keyword">double</span>[]&gt; cTrans = <span class="keyword">new</span> List&lt;<span class="keyword">double</span>[]&gt;();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c.Count; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">double</span>[] ci = <span class="keyword">new</span> <span class="keyword">double</span>[c[i].Length];</div><div class="line">        c[i].CopyTo(ci, <span class="number">0</span>);</div><div class="line">        <span class="keyword">if</span> (ci[i] == <span class="number">0</span>)</div><div class="line">        &#123;</div><div class="line">            ci = c[i];</div><div class="line">            ci[i] = <span class="number">1</span>;</div><div class="line">            ci[ci.Length - <span class="number">1</span>] = -ci[ci.Length - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; ci.Length ; j++)</div><div class="line">            &#123;</div><div class="line">                ci[j] = -ci[j] / c[i][i];</div><div class="line">            &#125;</div><div class="line">            ci[i] = <span class="number">0</span>;</div><div class="line">            ci[ci.Length - <span class="number">1</span>] = -ci[ci.Length - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        cTrans.Add(ci);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> cTrans;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> Jacobi迭代法求解线性方程组</span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="c"&gt;</span>方程组系数的增广矩阵<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="IterativeTimes"&gt;</span>最大迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="Epsilon"&gt;</span>收敛标准<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="t"&gt;</span>迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="solution"&gt;</span>求解结果<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>执行结果，0表示求解成功<span class="doctag">&lt;/returns&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Jacobi</span>(<span class="params">List&lt;<span class="keyword">double</span>[]&gt; c, <span class="keyword">int</span> IterativeTimes, <span class="keyword">double</span> Epsilon, <span class="keyword">out</span> <span class="keyword">int</span> t, <span class="keyword">double</span>[] solution</span>)</span></div><div class="line">&#123;</div><div class="line">    List&lt;<span class="keyword">double</span>[]&gt; cTrans = matTrans(c);</div><div class="line">    <span class="keyword">double</span>[] history = <span class="keyword">new</span> <span class="keyword">double</span>[cTrans.Count];</div><div class="line">    <span class="keyword">double</span>[] now = <span class="keyword">new</span> <span class="keyword">double</span>[cTrans.Count];</div><div class="line">    <span class="keyword">int</span> times = <span class="number">0</span>;</div><div class="line">    <span class="keyword">bool</span> isTrueSolution = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">while</span> (times &lt;= IterativeTimes &amp;&amp; !isTrueSolution)</div><div class="line">    &#123;</div><div class="line">        <span class="comment">//迭代一次</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cTrans.Count; i++)</div><div class="line">        &#123;</div><div class="line">            now[i] = <span class="number">0</span>;</div><div class="line">            <span class="keyword">double</span>[] Con = cTrans[i];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; Con.Length - <span class="number">1</span>; j++)</div><div class="line">            &#123;</div><div class="line">                now[i] += Con[j] * history[j];</div><div class="line">            &#125;</div><div class="line">            now[i] += Con[Con.Length - <span class="number">1</span>];</div><div class="line">            <span class="keyword">if</span> (Double.IsNaN(now[i]) || Double.IsInfinity(now[i]))</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"错误：方程解出现NaN或者无穷大,请验证方程组的收敛性！"</span>);</div><div class="line">        &#125;</div><div class="line">        times++;</div><div class="line">        <span class="comment">//解是否符合条件</span></div><div class="line">        isTrueSolution = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; now.Length; i++)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> (Math.Abs(now[i] - history[i]) &gt; Epsilon)</div><div class="line">            &#123;</div><div class="line">                isTrueSolution = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//更新旧解</span></div><div class="line">        now.CopyTo(history, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    t = times;</div><div class="line">    now.CopyTo(solution, <span class="number">0</span>);</div><div class="line">    <span class="comment">//超出迭代次数求解失败</span></div><div class="line">    <span class="keyword">if</span> (times &gt; IterativeTimes) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> SOR迭代法求解线性方程组</span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="c"&gt;</span>方程组系数的增广矩阵<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="IterativeTimes"&gt;</span>最大迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="Epsilon"&gt;</span>收敛标准<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="omega"&gt;</span>松弛因子<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="t"&gt;</span>迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="solution"&gt;</span>求解结果<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>执行结果，0表示求解成功<span class="doctag">&lt;/returns&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">SOR</span>(<span class="params">List&lt;<span class="keyword">double</span>[]&gt; c, <span class="keyword">int</span> IterativeTimes, <span class="keyword">double</span> Epsilon,<span class="keyword">double</span> omega,  <span class="keyword">out</span> <span class="keyword">int</span> t, <span class="keyword">double</span>[] solution</span>)</span></div><div class="line">&#123;</div><div class="line">    List&lt;<span class="keyword">double</span>[]&gt; cTrans = matTrans(c);</div><div class="line">    <span class="keyword">double</span>[] history = <span class="keyword">new</span> <span class="keyword">double</span>[cTrans.Count];</div><div class="line">    <span class="keyword">double</span>[] now = <span class="keyword">new</span> <span class="keyword">double</span>[cTrans.Count];</div><div class="line">    <span class="keyword">int</span> times = <span class="number">0</span>;</div><div class="line">    <span class="keyword">bool</span> isTrueSolution = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">while</span> (times &lt;= IterativeTimes &amp;&amp; !isTrueSolution)</div><div class="line">    &#123;        <span class="comment">//一次迭代</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cTrans.Count; i++)</div><div class="line">        &#123;</div><div class="line">            now.CopyTo(history, <span class="number">0</span>);</div><div class="line">            now[i] = (<span class="number">1</span>-omega)*history[i];</div><div class="line">            <span class="keyword">double</span>[] Con = cTrans[i];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; Con.Length - <span class="number">1</span>; j++)</div><div class="line">            &#123;</div><div class="line">                now[i] += omega * Con[j] * history[j];</div><div class="line">            &#125;</div><div class="line">            now[i] += omega * Con[Con.Length - <span class="number">1</span>];</div><div class="line">            <span class="keyword">if</span> (Double.IsNaN(now[i]) || Double.IsInfinity(now[i]))</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"错误：方程解出现NaN或者无穷大,请验证方程组的收敛性！"</span>);</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        times++;</div><div class="line">        <span class="comment">//解是否符合条件</span></div><div class="line">        isTrueSolution = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; now.Length; i++)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> (Math.Abs(now[i] - history[i]) &gt; Epsilon)</div><div class="line">            &#123;</div><div class="line">                isTrueSolution = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//更新旧解</span></div><div class="line">        now.CopyTo(history, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//超出迭代次数求解失败</span></div><div class="line">    t = times;</div><div class="line">    now.CopyTo(solution, <span class="number">0</span>);</div><div class="line">    <span class="keyword">if</span> (times &gt; IterativeTimes) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> Gauss-Seidel迭代法求解线性方程组</span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="c"&gt;</span>方程组系数的增广矩阵<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="IterativeTimes"&gt;</span>最大迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="Epsilon"&gt;</span>收敛标准<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="t"&gt;</span>迭代次数<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="solution"&gt;</span>求解结果<span class="doctag">&lt;/param&gt;</span></span></div><div class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>执行结果，0表示求解成功<span class="doctag">&lt;/returns&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Gauss_Seidel</span>(<span class="params">List&lt;<span class="keyword">double</span>[]&gt; c, <span class="keyword">int</span> IterativeTimes, <span class="keyword">double</span> Epsilon, <span class="keyword">out</span> <span class="keyword">int</span> t, <span class="keyword">double</span>[] solution</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> SOR(c, IterativeTimes, Epsilon, <span class="number">1</span>, <span class="keyword">out</span> t, solution);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当直接求解方程组 $Ax = b$ 较困难时, 我们可以求解一个近似方程组&lt;br&gt;$$Mx = b$$&lt;br&gt;设其解为 $x^{(1)}$&lt;br&gt;易知它与真解之间的误差满足&lt;br&gt;$$A\left(x_{*}-x^{(1)}\right) = b-Ax^{(1)}$$&lt;br&gt;如果 $x^{(1)}$ 已经满足精度要求, 则停止计算, 否则需要修正。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://blog.jiangyayu.cn/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="C#" scheme="https://blog.jiangyayu.cn/tags/C/"/>
    
      <category term="线性方程组" scheme="https://blog.jiangyayu.cn/tags/%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>Centos6.5中安装配置Cloudera CDH Hadoop集群</title>
    <link href="https://blog.jiangyayu.cn//archives/hadoop-install.html"/>
    <id>https://blog.jiangyayu.cn//archives/hadoop-install.html</id>
    <published>2016-01-16T05:11:05.000Z</published>
    <updated>2017-03-02T14:50:29.565Z</updated>
    
    <content type="html"><![CDATA[<h2 id="运行环境软硬件环境"><a href="#运行环境软硬件环境" class="headerlink" title="运行环境软硬件环境"></a>运行环境软硬件环境</h2><p>主机操作系统：Windows 10, 64-bit  (Build 10586) 10.0.10586<br>虚拟软件：VMware®Workstation 11.1.2 build-2780323<br>虚拟机操作系统：CentOS 6.5 64bit，单核，5G内存<br><a id="more"></a></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="设置IP"><a href="#设置IP" class="headerlink" title="设置IP"></a>设置IP</h3><p><img src="http://source.jiangyayu.cn/hadoop-install/1.png" style="zoom:0.8"><br>删除原来的连接信息，新建一个连接，设置该连接为手工方式，设置如下信息（需根据虚拟机设置相应参数以保证可以正常上网）：<br>IP地址：192.168.149.101<br>子网掩码：255.255.255.0<br>网关：192.168.149.2<br>DNS：192.168.149.2<br><img src="http://source.jiangyayu.cn/hadoop-install/2.png" style="zoom:0.8" alter="设置IP地址"> </p>
<h3 id="设置hosts"><a href="#设置hosts" class="headerlink" title="设置hosts"></a>设置hosts</h3><p>编辑hosts文件，添加如下信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">192.168.149.101	hadoop1</div><div class="line">192.168.149.102 hadoop2</div><div class="line">192.168.149.103 hadoop3</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/hadoop-install/3.png" alter="修改hosts文件"> </p>
<h3 id="关闭防火墙和Selinux"><a href="#关闭防火墙和Selinux" class="headerlink" title="关闭防火墙和Selinux"></a>关闭防火墙和Selinux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chkconfig iptables off</div><div class="line">vi /etc/selinux/config</div></pre></td></tr></table></figure>
<p>将<code>SELINUX=enforcing</code>改为<code>SELINUX=disabled</code>，执行该命令后重启机器生效<br><img src="http://source.jiangyayu.cn/hadoop-install/4.png" alter="关闭Selinux"> </p>
<h3 id="设置机器名"><a href="#设置机器名" class="headerlink" title="设置机器名"></a>设置机器名</h3><p>以<code>root</code>用户登录，使用<code>vi /etc/sysconfig/network</code> 打开配置文件，修改主机名称为<code>hadoop1</code>。<br><img src="http://source.jiangyayu.cn/hadoop-install/5.png" alter="修改主机名" 、=""></p>
<h3 id="下载并安装Oracle-JDK"><a href="#下载并安装Oracle-JDK" class="headerlink" title="下载并安装Oracle JDK"></a>下载并安装Oracle JDK</h3><p>下载说明：<br>•    CDH 5 - <a href="https://www.cloudera.com/documentation/enterprise/latest/topics/cdh_ig_jdk_installation.html#topic_29" target="_blank" rel="external">Java Development Kit Installation</a>.<br>•    CDH 4 - <a href="http://www.cloudera.com/documentation/archive/cdh/4-x/4-7-1/CDH4-Installation-Guide/cdh4ig_topic_29.html" target="_blank" rel="external">Java Development Kit Installation</a>.<br>本操作手册中使用：<code>jdk-8u60-linux-x64.rpm</code><br>进入下载文件存放文件夹中：<br>执行：<code>yum localinstall –nogpgcheck jdk*.rpm</code><br><img src="http://source.jiangyayu.cn/hadoop-install/6.png" alter="本地安装jdk"><br>安装完成后设置java环境变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/java/default</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/hadoop-install/7.png" alter="配置java环境变量"></p>
<h2 id="安装Cloudera-Manager"><a href="#安装Cloudera-Manager" class="headerlink" title="安装Cloudera Manager"></a>安装Cloudera Manager</h2><h3 id="下载相关安装文件"><a href="#下载相关安装文件" class="headerlink" title="下载相关安装文件"></a>下载相关安装文件</h3><p><strong>下载Cloudera Manager安装文件</strong><br>Cloudera Manager的可以从如下网址获得：<br><a href="http://archive.cloudera.com/cm5/installer/" target="_blank" rel="external">http://archive.cloudera.com/cm5/installer/</a><br>这里选择Cloudera Manager 最新版5.0.1<br><a href="http://archive.cloudera.com/cm5/installer/latest/cloudera-manager-installer.bin" target="_blank" rel="external">http://archive.cloudera.com/cm5/installer/latest/cloudera-manager-installer.bin</a><br>下载Cloudera Manager所需的rpm包<br><a href="http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.5/RPMS/x86_64/" target="_blank" rel="external">http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.5/RPMS/x86_64/</a><br><img src="http://source.jiangyayu.cn/hadoop-install/8.png" alter="Cloudera Manager离线安装包"></p>
<h3 id="安装相关软件包"><a href="#安装相关软件包" class="headerlink" title="安装相关软件包"></a>安装相关软件包</h3><p>将下载的RPM安装包放入文件夹rmp中(文件夹名称随意)<br>终端执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum localinstall --nogpgcheck *.rpm</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/hadoop-install/9.png" alter="安装rpm包"></p>
<h3 id="配置agent-启动服务"><a href="#配置agent-启动服务" class="headerlink" title="配置agent,启动服务"></a>配置agent,启动服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/cloudera-scm-agent/config.ini</div></pre></td></tr></table></figure>
<p>修改主机名:<br><img src="http://source.jiangyayu.cn/hadoop-install/10.png" alter="修改主机名"><br>启动相关服务：</p>
<p> 启动db：<code>service cloudera-scm-server-db start</code><br> <del>启动agent:<code>service cloudera-scm-agent start</code></del><br> (2017.2.28 纠正：agent在安装完manger后启动，感谢清华同学的提醒！)</p>
<h3 id="安装manager"><a href="#安装manager" class="headerlink" title="安装manager"></a>安装manager</h3><p>进入cloudera-manager-installer.bin的下载目录,执行以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chmod u+x cloudera-manager-installer.bin</div><div class="line">./cloudera-manager-installer.bin</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/hadoop-install/11.png" alter="安装manager"><br>安装过程：<br><img src="http://source.jiangyayu.cn/hadoop-install/11.add1.png" alter="安装过程"></p>
<p><div style="color:red">安装过程若遇到以下错误：</div><br><img src="http://source.jiangyayu.cn/hadoop-install/12.png" alter="安装错误"><br>请删除db.properties文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm /etc/cloudera-scm-server/db.properties</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/hadoop-install/13.png" alter="解决安装错误"></p>
<h3 id="配置本地源"><a href="#配置本地源" class="headerlink" title="配置本地源"></a>配置本地源</h3><p>下载CDH parcels安装包，Parcel的可以从如下网址获得，下载.parcel文件、.sha（若为.sha1则需修改一下文件名）文件和manifest.json文件：<br><a href="http://archive.cloudera.com/cdh5/parcels/5.5.0/" target="_blank" rel="external">http://archive.cloudera.com/cdh5/parcels/5.5.0/</a><br>把以下载的.parcel、.sha文件和manifest.json文件拷贝到/opt/cloudera/parcel-repo/文件夹下<br><img src="http://source.jiangyayu.cn/hadoop-install/14.png" alter="复制文件"><br>重启系统</p>
<h2 id="配置集群"><a href="#配置集群" class="headerlink" title="配置集群"></a>配置集群</h2><h3 id="登陆CM"><a href="#登陆CM" class="headerlink" title="登陆CM"></a>登陆CM</h3><p>启动相关服务:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service cloudera-scm-server-db start</div><div class="line">service cloudera-scm-agent start</div></pre></td></tr></table></figure></p>
<p>浏览器输入<code>localhost：7180</code>初次登录 用户名：<code>admin</code> 密码：<code>admin</code><br><img src="http://source.jiangyayu.cn/hadoop-install/15.png" alter="登陆cloudera manager"></p>
<h3 id="安装主机"><a href="#安装主机" class="headerlink" title="安装主机"></a>安装主机</h3><p><img src="http://source.jiangyayu.cn/hadoop-install/16.png"></p>
<h3 id="选择安装CDH版本"><a href="#选择安装CDH版本" class="headerlink" title="选择安装CDH版本"></a>选择安装CDH版本</h3><p>这里选择前面下载的parcel对应版本的CDH：<br><img src="http://source.jiangyayu.cn/hadoop-install/17.png"><br>点击继续进行安装：<br><img src="http://source.jiangyayu.cn/hadoop-install/18.png"></p>
<h3 id="主机检查"><a href="#主机检查" class="headerlink" title="主机检查"></a>主机检查</h3><p>系统将进行主机检查，检查结果可能会出现下面两个问题：<br><img src="http://source.jiangyayu.cn/hadoop-install/19.png"><br><strong>对于swappiness值不为零的问题</strong></p>
<blockquote>
<p>Cloudera 建议将 /proc/sys/vm/swappiness 设置为 0。当前设置为 60。使用 sysctl 命令在运行时更改该设置并编辑 /etc/sysctl.conf 以在重启后保存该设置。您可以继续进行安装，但可能会遇到问题，Cloudera Manager 报告您的主机由于交换运行状况不佳。以下主机受到影响：hadoop1</p>
</blockquote>
<p>首先执行：<code>sysctl vm.swappiness=0</code><br>将<code>swappiness</code>值设置成<code>0</code>；<br>然后执行：<code>vim /etc/sysctl.conf</code><br>编辑<code>sysctl.conf</code>文件，添加下面代码，使之下次开机时直接生效：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Search for the vm.swappiness setting.  Uncomment and change it as necessary.</div><div class="line">vm.swappiness=0</div></pre></td></tr></table></figure></p>
<p><strong>对于“透明大页面”的问题</strong></p>
<blockquote>
<p>已启用“透明大页面”，它可能会导致重大的性能问题。版本为“/sys/kernel/mm/transparent_hugepage”且发行版为“{1}”的Kernel已 enabled设置为“{2}”，并将defrag设置为“{3}”。请运行“echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/defrag”以禁用此设置，然后将同一命令添加到一个init脚本中，如/etc/rc.local，这样当系统重启时就会予以设置。或者，升级到 RHEL 6.5 或更新版本，它们不存在此错误。将会影响到以下主机：hadoop1</p>
</blockquote>
<p>执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo never &gt;/sys/kernel/mm/redhat_transparent_hugepage/defrag</div><div class="line">echo &apos;echo never &gt;/sys/kernel/mm/redhat_transparent_hugepage/defrag&apos;&gt;&gt; /etc/rc.local</div></pre></td></tr></table></figure></p>
<h3 id="选择内核"><a href="#选择内核" class="headerlink" title="选择内核"></a>选择内核</h3><p>选择安装含Spark的内核：<br><img src="http://source.jiangyayu.cn/hadoop-install/20.png"></p>
<h3 id="角色分配"><a href="#角色分配" class="headerlink" title="角色分配"></a>角色分配</h3><p>默认即可：<br><img src="http://source.jiangyayu.cn/hadoop-install/21.png"></p>
<h3 id="数据库设置"><a href="#数据库设置" class="headerlink" title="数据库设置"></a>数据库设置</h3><p>默认：<br><img src="http://source.jiangyayu.cn/hadoop-install/22.png"></p>
<h3 id="首次运行"><a href="#首次运行" class="headerlink" title="首次运行"></a>首次运行</h3><p>首次运行，等待部署：<br><img src="http://source.jiangyayu.cn/hadoop-install/23.png"><br><strong>注：</strong>该过程若出现错误，可能导致的原因是内存不足，本次安装虚拟机分配5G内存，可以正常部署。</p>
<h3 id="安装成功"><a href="#安装成功" class="headerlink" title="安装成功"></a>安装成功</h3><p><img src="http://source.jiangyayu.cn/hadoop-install/24.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;运行环境软硬件环境&quot;&gt;&lt;a href=&quot;#运行环境软硬件环境&quot; class=&quot;headerlink&quot; title=&quot;运行环境软硬件环境&quot;&gt;&lt;/a&gt;运行环境软硬件环境&lt;/h2&gt;&lt;p&gt;主机操作系统：Windows 10, 64-bit  (Build 10586) 10.0.10586&lt;br&gt;虚拟软件：VMware®Workstation 11.1.2 build-2780323&lt;br&gt;虚拟机操作系统：CentOS 6.5 64bit，单核，5G内存&lt;br&gt;
    
    </summary>
    
      <category term="大数据" scheme="https://blog.jiangyayu.cn/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="大数据" scheme="https://blog.jiangyayu.cn/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="Hadoop" scheme="https://blog.jiangyayu.cn/tags/Hadoop/"/>
    
      <category term="linux" scheme="https://blog.jiangyayu.cn/tags/linux/"/>
    
      <category term="CentOS" scheme="https://blog.jiangyayu.cn/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>matlab物理场的正交分解</title>
    <link href="https://blog.jiangyayu.cn//archives/Orthogonal-decomposition.html"/>
    <id>https://blog.jiangyayu.cn//archives/Orthogonal-decomposition.html</id>
    <published>2013-12-18T06:50:35.000Z</published>
    <updated>2017-03-02T14:50:31.880Z</updated>
    
    <content type="html"><![CDATA[<h2 id="经验正交分解的原理"><a href="#经验正交分解的原理" class="headerlink" title="经验正交分解的原理"></a>经验正交分解的原理</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>&emsp;&emsp;经验正交函数分析方法(empirical orthogonal function,缩写为EOF)，也称特征向量分析(eigen vector analysis)，或者主成分分析(principal component analysis,缩写PCA)，是一种分析矩阵数据中的结构特征，提取主要数据特征量的一种方法。Lorenz在1950年代首次将其引入气象和气候研究，现在在地学及其他学科中得到了非常广泛的应用。<br><a id="more"></a><br>&emsp;&emsp;分析中通常特征向量对应的是空间样本，称空间特征向量或者空间模态；对应的是时间变化称为时间系数。</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>&emsp;（1）主要特色：能够有效地体现物理场的主要信息，保留次要信息并排除外来的随机干扰。<br>&emsp;（2）无固定的函数形式：这种正交函数展开不像三角函数展开、球函数展开那样有固定的展开形式。<br>&emsp;（3）图形是由场本身决定的，不是事先人为地给定典型场函数的。<br>&emsp;（4）具有收敛快、能更好地反应出场的基本结构的特征。</p>
<h3 id="主要应用"><a href="#主要应用" class="headerlink" title="主要应用"></a>主要应用</h3><p>&emsp;（1）可在有限的区域中不规则分布的站点进行：空间不同站点/同一点的不同时间、不同高度的多种要素进行综合分析。<br>&emsp;（2）可用于要素场分析、垂直结构分析、动力模型垂直分层等。</p>
<h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><p>&emsp;&emsp;经验正交函数分解的基本思想是把包含m个空间点（或p个变量）的n个时次的观测场的序列（i = 1,2,…,m; j = 1,2,…,n）分解成相互正交的时间函数与相互正交的空间函数的乘积之和，常把空间函数看做典型场，时间函数看做典型场的权重系数，则不同时间的要素场是若干个典型场按不同的权重线性叠加的结果，各个场之间的差别就在于各典型场的系数不同。</p>
<p>$$ nXm = nEm \times m\Phi_{m}^{T} $$</p>
<h2 id="EOF函数简介"><a href="#EOF函数简介" class="headerlink" title="EOF函数简介"></a>EOF函数简介</h2><p>&emsp;&emsp;EOF函数的原型为：</p>
<p> $$ [V,EOFs,EC,error]=EOF(D,p) $$</p>
<p> 本站提供的下载:<a href="http://source.jiangyayu.cn/Orthogonal-decomposition/EOF.m" target="_blank" rel="external">EOF.m</a></p>
<h3 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h3><p>D：输入的物理场数据，为一个二维矩阵，每一行假定为一个样本，每一列为一个变量。因此D的一列表示一个时间序列的变量。<br>P：可选项，指EOF分析结果的模态数，其取值应小于时间间隔和样本数</p>
<h3 id="输出参数"><a href="#输出参数" class="headerlink" title="输出参数"></a>输出参数</h3><p>V：与EOFs有关的特征向量；<br>EOFs：时间系数；<br>EC：空间模态，由p个模态的列向量组成的矩阵；<br>error：重建误差；</p>
<h2 id="经验正交分解实例"><a href="#经验正交分解实例" class="headerlink" title="经验正交分解实例"></a>经验正交分解实例</h2><h3 id="数据下载"><a href="#数据下载" class="headerlink" title="数据下载"></a>数据下载</h3><p>前往<a href="https://climatedataguide.ucar.edu/climate-data/soda-simple-ocean-data-assimilation" target="_blank" rel="external">SODA: Simple Ocean Data Assimilation</a>下载数据<br>选择相关变量，以“TAUY”为例。<br>合理选择研究区域，时间范围等<br><img src="http://source.jiangyayu.cn/Orthogonal-decomposition/1.png"><br>选择合适数据下载后，认真核对数据基本信息<br><img src="http://source.jiangyayu.cn/Orthogonal-decomposition/2.png"><br>在数据下载页选择合适的数据格式，我们选择NetCDF<br><img src="http://source.jiangyayu.cn/Orthogonal-decomposition/3.png"><br>现在开始提取数据，提取的数据名为data.cdf<br>建议根据下载的数据变量名、范围、时间等命名，便于查找。如<a href="http://source.jiangyayu.cn/Orthogonal-decomposition/tauy_1958_2008_NWPacific.cdf" target="_blank" rel="external">tauy_1958_2008_NWPacific.cdf</a></p>
<h3 id="数据读取"><a href="#数据读取" class="headerlink" title="数据读取"></a>数据读取</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% read data</span></div><div class="line">file = <span class="string">'tauy_1958_2008_NWPacific.cdf'</span>;</div><div class="line"><span class="comment">% ncdisp(file);</span></div><div class="line">time = ncread(file,<span class="string">'time'</span>);</div><div class="line">lon = ncread(file,<span class="string">'lon'</span>);</div><div class="line">lat = ncread(file,<span class="string">'lat'</span>);</div><div class="line">tauy = ncread(file,<span class="string">'tauy'</span>);</div><div class="line">missing_value = ncreadatt(file,<span class="string">'tauy'</span>,<span class="string">'missing_value'</span>);</div></pre></td></tr></table></figure>
<h3 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h3><p>（1）显示数据的范围<br>&emsp;&emsp;使用<a href="http://source.jiangyayu.cn/Orthogonal-decomposition/m_map1.4.zip" target="_blank" rel="external">m_map</a>工具箱进行地图的显示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; figure;m_proj(&apos;mercator&apos;,&apos;lat&apos;,[20 60],&apos;lon&apos;,[100 160]);m_coast(&apos;patch&apos;,[0.7 0.7 0.7]);m_grid;</div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/Orthogonal-decomposition/4.png" style="zoom:0.7"><br>（2）选择海区<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">% set range</span></div><div class="line">la = <span class="number">46</span>:<span class="number">59</span>; </div><div class="line">lo = <span class="number">145</span>:<span class="number">155</span>;</div></pre></td></tr></table></figure></p>
<p>（3）去趋势处理<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">xx = <span class="built_in">find</span>(lon&gt;=min(lo) &amp; lon&lt;=max(lo) );  </div><div class="line">yy = <span class="built_in">find</span>(lat&gt;=min(la) &amp; lat&lt;=max(la));</div><div class="line">tauy_sub = <span class="built_in">zeros</span>(<span class="built_in">length</span>(xx),<span class="built_in">length</span>(yy),<span class="number">612</span>);</div><div class="line">tauy_sub = tauy(xx,yy,:)</div><div class="line"><span class="comment">%% detrend</span></div><div class="line">tauy_de = <span class="built_in">zeros</span>(<span class="built_in">size</span>(tauy_sub));</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(xx)</div><div class="line">    <span class="keyword">for</span> jj = <span class="number">1</span>:<span class="built_in">length</span>(yy)</div><div class="line">        tauy_de(ii,jj,:) =  detrend(<span class="built_in">squeeze</span>(tauy_sub(ii,jj,:)));</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p>
<h3 id="EOF计算"><a href="#EOF计算" class="headerlink" title="EOF计算"></a>EOF计算</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% EOF</span></div><div class="line">tauy_de = <span class="built_in">reshape</span>(tauy_de,<span class="built_in">length</span>(xx)*<span class="built_in">length</span>(yy),<span class="number">612</span>);</div><div class="line">[V,EOFs,EC,error] = EOF(tauy_de,<span class="number">10</span>);</div><div class="line">EC = <span class="built_in">reshape</span>(EC,<span class="built_in">length</span>(xx),<span class="built_in">length</span>(yy),<span class="number">10</span>);</div></pre></td></tr></table></figure>
<h3 id="计算方差贡献率"><a href="#计算方差贡献率" class="headerlink" title="计算方差贡献率"></a>计算方差贡献率</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">V = [<span class="number">2.3544</span>  <span class="number">0.1429</span>  <span class="number">0.0625</span>  <span class="number">0.0410</span>  <span class="number">0.0305</span>  <span class="number">0.0085</span>  <span class="number">0.0077</span>  <span class="number">0.0073</span>  <span class="number">0.0024</span>  <span class="number">0.0021</span>]</div></pre></td></tr></table></figure>
<p>计算各模态的方差贡献率：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; V/sum(V)</div><div class="line"><span class="built_in">ans</span> =[<span class="number">0.8853</span>  <span class="number">0.0537</span>  <span class="number">0.0235</span>  <span class="number">0.0154</span>  <span class="number">0.0115</span>  <span class="number">0.0032</span>  <span class="number">0.0029</span>  <span class="number">0.0028</span>  <span class="number">0.0009</span>  <span class="number">0.0008</span>]</div></pre></td></tr></table></figure></p>
<h3 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h3><p>根据方差贡献率，画出方差贡献率大于90%的前若干个模态的空间模态和时间系数<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% figure</span></div><div class="line">figure;</div><div class="line"><span class="comment">% EOF2</span></div><div class="line">plot(EOFs(:,<span class="number">2</span>));</div><div class="line">ylabel(<span class="string">'PC2'</span>,<span class="string">'FontSize'</span>,<span class="number">18</span>);</div><div class="line">xlabel(<span class="string">'Year'</span>,<span class="string">'FontSize'</span>,<span class="number">18</span>)</div><div class="line">axis([<span class="number">1</span> <span class="number">612</span> <span class="number">-0.2</span> <span class="number">0.2</span>]);</div><div class="line">set(gca,<span class="string">'xtick'</span>,<span class="number">25</span>:<span class="number">12</span>*<span class="number">5</span>:<span class="number">576</span>,<span class="string">'xticklabel'</span>,&#123;<span class="number">1960</span>:<span class="number">5</span>:<span class="number">2005</span>&#125;,<span class="string">'FontSize'</span>,<span class="number">14</span>);</div><div class="line">set(gca,<span class="string">'tickdir'</span>,<span class="string">'out'</span> ,<span class="string">'LineWidth'</span>,<span class="number">1.5</span>);</div><div class="line">set(gca,<span class="string">'Position'</span>,[<span class="number">0.075</span> <span class="number">0.125</span> <span class="number">0.875</span> <span class="number">0.15</span>]);</div><div class="line">box off</div><div class="line"></div><div class="line"><span class="comment">% EOF1</span></div><div class="line">subplot(<span class="number">323</span>)</div><div class="line">plot(EOFs(:,<span class="number">1</span>));</div><div class="line">ylabel(<span class="string">'PC1'</span>,<span class="string">'FontSize'</span>,<span class="number">18</span>);</div><div class="line">axis([<span class="number">1</span> <span class="number">612</span> <span class="number">-0.2</span> <span class="number">0.2</span>]);</div><div class="line">set(gca,<span class="string">'xtick'</span>,<span class="number">25</span>:<span class="number">12</span>*<span class="number">5</span>:<span class="number">576</span>,<span class="string">'xticklabel'</span>,&#123;&#125;,<span class="string">'FontSize'</span>,<span class="number">14</span>);</div><div class="line">set(gca,<span class="string">'tickdir'</span>,<span class="string">'out'</span> ,<span class="string">'LineWidth'</span>,<span class="number">1.5</span>);</div><div class="line">set(gca,<span class="string">'Position'</span>,[<span class="number">0.075</span> <span class="number">0.3</span> <span class="number">0.875</span> <span class="number">0.15</span>]);</div><div class="line">box off</div><div class="line"></div><div class="line"><span class="comment">% EC2</span></div><div class="line">subplot(<span class="number">322</span>)</div><div class="line">m_proj(<span class="string">'Mercator'</span>,<span class="string">'lat'</span>,[<span class="number">45</span> <span class="number">60</span>],<span class="string">'lon'</span>,[<span class="number">130</span> <span class="number">160</span>]);</div><div class="line">m_pcolor(lon(xx),lat(yy),EC(:,:,<span class="number">2</span>)');</div><div class="line">caxis([<span class="number">-1.0</span>  <span class="number">2.5</span>])  <span class="comment">%设置颜色映射范围</span></div><div class="line">shading interp;</div><div class="line">m_coast(<span class="string">'patch'</span>,[<span class="number">0.7</span> <span class="number">0.7</span> <span class="number">0.7</span>]);</div><div class="line">m_grid(<span class="string">'linestyle'</span>,<span class="string">'none'</span>,<span class="string">'box'</span>,<span class="string">'fancy'</span>,<span class="string">'tickdir'</span>,<span class="string">'out'</span>);</div><div class="line">set(gca,<span class="string">'Position'</span>,[<span class="number">0.5</span> <span class="number">0.5</span> <span class="number">0.45</span> <span class="number">0.4</span>]);</div><div class="line">title(<span class="string">'EOF2'</span>,<span class="string">'FontSize'</span>,<span class="number">18</span>);</div><div class="line"> </div><div class="line"><span class="comment">% EC1</span></div><div class="line">subplot(<span class="number">321</span>)</div><div class="line">m_proj(<span class="string">'Mercator'</span>,<span class="string">'lat'</span>,[<span class="number">45</span> <span class="number">60</span>],<span class="string">'lon'</span>,[<span class="number">130</span> <span class="number">160</span>]);</div><div class="line">m_pcolor(lon(xx),lat(yy),EC(:,:,<span class="number">1</span>)');</div><div class="line">caxis([<span class="number">-1.0</span>  <span class="number">2.5</span>])</div><div class="line">shading interp;</div><div class="line">m_coast(<span class="string">'patch'</span>,[<span class="number">0.7</span> <span class="number">0.7</span> <span class="number">0.7</span>]);</div><div class="line">m_grid(<span class="string">'linestyle'</span>,<span class="string">'none'</span>,<span class="string">'box'</span>,<span class="string">'fancy'</span>,<span class="string">'tickdir'</span>,<span class="string">'out'</span>);</div><div class="line">set(gca,<span class="string">'Position'</span>,[<span class="number">0.05</span> <span class="number">0.5</span> <span class="number">0.45</span> <span class="number">0.4</span>]);</div><div class="line">title(<span class="string">'EOF1'</span>,<span class="string">'FontSize'</span>,<span class="number">18</span>);</div><div class="line"> </div><div class="line"><span class="comment">% colorbar</span></div><div class="line">h = colorbar;</div><div class="line">caxis([<span class="number">-1.0</span>  <span class="number">2.5</span>])</div><div class="line">set(h,<span class="string">'position'</span>,[<span class="number">0.9</span>,<span class="number">0.5</span>,<span class="number">0.02</span>,<span class="number">0.4</span>])</div><div class="line">set(h,<span class="string">'ytick'</span>,<span class="number">-1.0</span>:<span class="number">0.7</span>:<span class="number">2.5</span>,<span class="string">'yticklabel'</span>,&#123;<span class="number">-1.0</span>:<span class="number">0.7</span>:<span class="number">2.5</span>&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="结果图"><a href="#结果图" class="headerlink" title="结果图"></a>结果图</h3><p><img src="http://source.jiangyayu.cn/Orthogonal-decomposition/5.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;经验正交分解的原理&quot;&gt;&lt;a href=&quot;#经验正交分解的原理&quot; class=&quot;headerlink&quot; title=&quot;经验正交分解的原理&quot;&gt;&lt;/a&gt;经验正交分解的原理&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h3&gt;&lt;p&gt;&amp;emsp;&amp;emsp;经验正交函数分析方法(empirical orthogonal function,缩写为EOF)，也称特征向量分析(eigen vector analysis)，或者主成分分析(principal component analysis,缩写PCA)，是一种分析矩阵数据中的结构特征，提取主要数据特征量的一种方法。Lorenz在1950年代首次将其引入气象和气候研究，现在在地学及其他学科中得到了非常广泛的应用。&lt;br&gt;
    
    </summary>
    
      <category term="数据处理分析" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"/>
    
    
      <category term="正交分解" scheme="https://blog.jiangyayu.cn/tags/%E6%AD%A3%E4%BA%A4%E5%88%86%E8%A7%A3/"/>
    
      <category term="海洋要素" scheme="https://blog.jiangyayu.cn/tags/%E6%B5%B7%E6%B4%8B%E8%A6%81%E7%B4%A0/"/>
    
  </entry>
  
  <entry>
    <title>海洋要素计算：潮汐调和分析</title>
    <link href="https://blog.jiangyayu.cn//archives/tide.html"/>
    <id>https://blog.jiangyayu.cn//archives/tide.html</id>
    <published>2013-12-10T05:54:39.000Z</published>
    <updated>2017-03-02T14:50:26.367Z</updated>
    
    <content type="html"><![CDATA[<p>使用matlab进行潮汐调和分析，判别潮汐类型。<br><a id="more"></a></p>
<h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><h3 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h3><p>&emsp;&emsp;本次实验采用的数据来自夏威夷大学海平面中心（University of Hawaii Sea Level Center）：<a href="http://ilikai.soest.hawaii.edu/uhslc/datai.html" target="_blank" rel="external">http://ilikai.soest.hawaii.edu/uhslc/datai.html</a><br>本站提供下载：<br><br>&emsp;&emsp;厦门站：<a href="http://source.jiangyayu.cn/tide/h376a95.dat" target="_blank" rel="external">h376a95.dat</a></p>
<h3 id="站点数据信息"><a href="#站点数据信息" class="headerlink" title="站点数据信息"></a>站点数据信息</h3><p>站点：厦门站<br>坐标：Latitude: 24-27N , Longitude: 118-04E<br>时区：120E (GMT + 8 hr)<br>观测时间范围：1954—1997<br>观测手段：Gauge rods (1954-1964);<br>&emsp;&emsp;&emsp;&emsp;&emsp;HCJ1, float gauge (1965-1990);<br>&emsp;&emsp;&emsp;&emsp;&emsp;SCA1-2 (1990-)<br>现有数据：Hourly   Daily   Monthly<br><img src="http://source.jiangyayu.cn/tide/1.png"></p>
<h3 id="数据质量控制"><a href="#数据质量控制" class="headerlink" title="数据质量控制"></a>数据质量控制</h3><p>&emsp;&emsp;质量评估主要是基于每小时数据的残差（观察到的数据减去预测潮汐）。该评估也适用由质量控制的每小时数据得到的每日和每月的数据。<br>&emsp;&emsp;对每小时数据的订正：<br>（1）对于时间跨度小于25小时的存在差异或明显错误的数据，使用潮流预测方法*进行填充。<br>（2）对于一小时确切的增量存在的时序错误通过移动数据的方法来进行校正。<br>（3）在确定水尺读数或者固定准基点相对读数确定参考水位变化不是一个自然事件之后，参考水位的变化才被更正。如果对比读数缺失或不完整，将数据与邻近的站位进行比较或许能保证对那些明显变化进行调节的正确性。<br>（4）基准面变化没有解决的数据不使用。然而，如果数据在未解决的变化之前或之后，数据的充足的时间跨度是可用的，那么质量保证的数据的一个子集是可以使用的。因此，质量评估的跨度领域可能不与分散数据集的跨度匹配。随着有问题的基准面变化被解决，这数据集也将被更新。虽然这个政策增加了一些复杂性，但是它允许在质量保证下更快速的传播。<br>&emsp;&emsp;每年,以下信息从质量控制每小时记录的数据和日期作为第n个天从今年1月1日:<br>（5）完整性指数(CI)基于可用的时间比例数据；<br>（6）差距超过一天的列表；<br>（7）总结的时间跨度超过6但少雨25小时的连续缺失或明显错误的数据已经更换；<br>（8）总结剩余系列中有问题的波动。如果大于25厘米，指出残差波动。</p>
<h3 id="水位随时间变化"><a href="#水位随时间变化" class="headerlink" title="水位随时间变化"></a>水位随时间变化</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% input the data</span></div><div class="line">fid = fopen(<span class="string">'h376a95.dat'</span>);</div><div class="line">data_cell = textscan...,</div><div class="line">    (fid,<span class="string">'%s%s%f%f%f%f%f%f%f%f%f%f%f%f%f'</span>,<span class="string">'headerlines'</span>,<span class="number">1</span>);</div><div class="line">fclose(fid);</div><div class="line">data = cell2mat(data_cell(<span class="number">3</span>:<span class="number">15</span>));</div><div class="line">elev = data(:,<span class="number">2</span>:<span class="number">13</span>)';</div><div class="line">elev = elev(:);</div><div class="line"> </div><div class="line"><span class="comment">%% plot the Hourly Elevation</span></div><div class="line">plot(elev(<span class="number">1</span>:<span class="number">31</span>*<span class="number">24</span>)/<span class="number">1000</span>);</div><div class="line">title(<span class="string">'Hourly Elevation (Xiamen Station 1995.01)'</span>,<span class="string">'FontSize'</span>,<span class="number">14</span>);</div><div class="line">xlabel(<span class="string">'date'</span>,<span class="string">'FontSize'</span>,<span class="number">12</span>);</div><div class="line">ylabel(<span class="string">'Elevation /m'</span>,<span class="string">'FontSize'</span>,<span class="number">12</span>);</div><div class="line">set(gca,<span class="string">'XTick'</span>,<span class="number">0</span>:<span class="number">24</span>:<span class="number">31</span>*<span class="number">24</span>);  </div><div class="line">set(gca,<span class="string">'XTickLabel'</span>,<span class="number">0</span>:<span class="number">31</span>);</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/tide/2.png"></p>
<h2 id="调和分析"><a href="#调和分析" class="headerlink" title="调和分析"></a>调和分析</h2><h3 id="分析工具"><a href="#分析工具" class="headerlink" title="分析工具"></a>分析工具</h3><p>t_tide潮汐调和分析工具下载：<a href="http://nccoos.org/projects/long-bay-wintertime-blooms/code/toolboxes/t_tide" target="_blank" rel="external">http://nccoos.org/projects/long-bay-wintertime-blooms/code/toolboxes/t_tide</a><br>本站下载：<a href="http://source.jiangyayu.cn/tide/t_tide_v1.3beta.zip" target="_blank" rel="external">t_tide_v1.3beta.zip</a></p>
<h3 id="t-tide调和分析"><a href="#t-tide调和分析" class="headerlink" title="t_tide调和分析"></a>t_tide调和分析</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">t_tide(elev,<span class="string">'star ttime'</span>,[<span class="number">1995</span>,<span class="number">01</span>,<span class="number">01</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],...</div><div class="line"><span class="string">'latitude'</span>,<span class="number">24.45</span>,<span class="string">'shallow'</span>,<span class="string">''</span>,<span class="string">'synthesis'</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/tide/3.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/tide/3.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/tide/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/tide/4.png"></a></div></div></div></div>
<h3 id="通过显著性检验的分潮"><a href="#通过显著性检验的分潮" class="headerlink" title="通过显著性检验的分潮"></a>通过显著性检验的分潮</h3><p>2Q1  SIG  RHO  TAU  BET  NO1  PHI  THE  J1  SO1  PS  2N2  MU2  NU2  LDA  L2  MSN     MO3  M3  SO3     MK3     SK3  MN4  M4  MS4  MK4     2MN     M6  2MS     2MK  2SM  MSK  3MK  M8</p>
<h3 id="主要分潮的调和常数"><a href="#主要分潮的调和常数" class="headerlink" title="主要分潮的调和常数"></a>主要分潮的调和常数</h3><p><img src="http://source.jiangyayu.cn/tide/5.png" style="zoom:0.7"></p>
<h3 id="潮型系数"><a href="#潮型系数" class="headerlink" title="潮型系数"></a>潮型系数</h3><p>&emsp;&emsp;计算公式：<br>$$A=\dfrac {H_{K_{1}}+H_{O_{1}}} {H_{M_{2}}}$$<br>&emsp;&emsp;由调和分析结果得：$H_{K_{1}}=341.3936$，$H_{O_{1}}= 281.1318$， $H_{M_{2}}= 1834.2106$ 。<br>&emsp;&emsp;代入公式求得：<br>$$A = 0.3394 &lt; 0.5$$<br>故：厦门站潮汐类型为半日潮。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用matlab进行潮汐调和分析，判别潮汐类型。&lt;br&gt;
    
    </summary>
    
      <category term="数据处理分析" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"/>
    
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="海洋数据分析" scheme="https://blog.jiangyayu.cn/tags/%E6%B5%B7%E6%B4%8B%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
      <category term="潮汐调和分析" scheme="https://blog.jiangyayu.cn/tags/%E6%BD%AE%E6%B1%90%E8%B0%83%E5%92%8C%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>海洋要素计算：温盐跃层的分析</title>
    <link href="https://blog.jiangyayu.cn//archives/temp-salin.html"/>
    <id>https://blog.jiangyayu.cn//archives/temp-salin.html</id>
    <published>2013-10-15T05:54:39.000Z</published>
    <updated>2017-03-02T14:50:22.716Z</updated>
    
    <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>&emsp;&emsp;提供某次海洋观测的RBR-CTD测得的海洋要素数据，要求完成以下内容：</p>
<ol>
<li>根据数据的头文件，给出观测的基本信息。</li>
<li>进行异常数据的剔除，仅保留“下放（Down-casting）”时观测的数据。</li>
<li>去尖峰。</li>
<li>将数据处理成1m平均的形式。保存数据文件。</li>
<li>绘制温度和盐度的剖面图。<a id="more"></a>
</li>
</ol>
<h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><p>RBR-CTD观测数据：<a href="http://source.jiangyayu.cn/temp-salin/G4.txt" download="" target="_blank" rel="external">G4.txt</a><br>去尖峰函数：<a href="http://source.jiangyayu.cn/temp-salin/despike.m" target="_blank" rel="external">despike.m</a></p>
<h2 id="处理流程"><a href="#处理流程" class="headerlink" title="处理流程"></a>处理流程</h2><h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">% file open</span></div><div class="line">fid1 = fopen(<span class="string">'G4.txt'</span>);</div><div class="line"><span class="comment">% display the information of the data </span></div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="number">4</span></div><div class="line">    hdata&#123;ii&#125; = fgets(fid1);</div><div class="line">    <span class="built_in">disp</span>(hdata&#123;ii&#125;)   </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">% Read Data </span></div><div class="line"></div><div class="line"><span class="comment">% [Date,Time,Cond,Temp,Pres,D_O2,PAR,FlC_a,Depth,Salin,SpecCond,DensAnom,SoS,xdO2C] = ...,</span></div><div class="line"><span class="comment">% textread('G4.txt','%s%s%f%f%f%f%f%f%f%f%f%f%f%f','headerlines',51);</span></div><div class="line">data_cell = textscan(fid1,<span class="string">'%s%s%f%f%f%f%f%f%f%f%f%f%f%f'</span>,<span class="string">'headerlines'</span>,<span class="number">51</span>);</div><div class="line">fclose(fid1);</div></pre></td></tr></table></figure>
<h3 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% data processing</span></div><div class="line"><span class="comment">% cell to mat</span></div><div class="line">data = cell2mat(data_cell(<span class="number">3</span>:<span class="number">14</span>));</div><div class="line">Depth = data(:,<span class="number">9</span>);</div><div class="line"><span class="comment">% find the data during Down-casting</span></div><div class="line">index = <span class="built_in">find</span>(Depth &gt; <span class="number">0</span> &amp; Depth &lt; max(Depth));</div><div class="line">mod_data = data(index,:);</div><div class="line"><span class="comment">% despike</span></div><div class="line">dsp_data=despike(mod_data,<span class="number">3</span>);</div><div class="line"><span class="comment">% write to text file</span></div><div class="line"><span class="comment">% fprintf(fid2,'%f  %f  %f  %f  %f  %f  %f  %f  %f  %f  %f  %f\n',dsp_data');</span></div><div class="line"></div><div class="line"><span class="comment">% get depth temp and salin</span></div><div class="line">dsp_depth = dsp_data(:,<span class="number">7</span>)';</div><div class="line">dsp_temp = dsp_data(:,<span class="number">2</span>)';</div><div class="line">dsp_salin = dsp_data(:,<span class="number">8</span>)';</div><div class="line"></div><div class="line"><span class="comment">% 	initializing the variables</span></div><div class="line">yi = <span class="number">0</span>:<span class="number">1.0</span>:max(dsp_depth);</div><div class="line">ave_temp = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="built_in">length</span>(yi));</div><div class="line">ave_salin = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="built_in">length</span>(yi));</div><div class="line"><span class="comment">% the average of temp and salin in each meters</span></div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(yi)</div><div class="line">   ave_temp(ii) = mean( dsp_temp(<span class="built_in">find</span>(dsp_depth &gt; ii<span class="number">-1</span> &amp; dsp_depth &lt;ii)));</div><div class="line">   ave_salin(ii) = mean( dsp_salin(<span class="built_in">find</span>(dsp_depth &gt; ii<span class="number">-1</span> &amp; dsp_depth &lt;ii)));</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="数据导出"><a href="#数据导出" class="headerlink" title="数据导出"></a>数据导出</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% output new data to a text file</span></div><div class="line">fid2 = fopen(<span class="string">'new_Data.txt'</span>,<span class="string">'a+'</span>);</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="number">4</span></div><div class="line">fprintf(fid2,hdata&#123;ii&#125;);</div><div class="line"><span class="keyword">end</span></div><div class="line">fprintf(fid2,<span class="string">'%s\n'</span>,<span class="string">' '</span>);</div><div class="line">fprintf(fid2,<span class="string">'%s%s%s\n'</span>,<span class="string">'depth    temp     salin '</span>);</div><div class="line">new_data = [yi;ave_temp;ave_salin];</div><div class="line">fprintf(fid2,<span class="string">'%s\n'</span>,<span class="string">' '</span>);</div><div class="line">fprintf(fid2,<span class="string">'%6.4f  %6.4f  %6.4f\n'</span>,new_data);</div><div class="line">fclose(fid2);</div></pre></td></tr></table></figure>
<h3 id="绘制温盐跃层图"><a href="#绘制温盐跃层图" class="headerlink" title="绘制温盐跃层图"></a>绘制温盐跃层图</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% plot</span></div><div class="line">h1 = plot(ave_temp,-yi,<span class="string">'--m'</span>);</div><div class="line">xlabel(<span class="string">'Temperature  /\circC'</span>);</div><div class="line">ylabel(<span class="string">'Depth /m'</span>);</div><div class="line">set(gca,<span class="string">'position'</span>,<span class="string">'default'</span>);</div><div class="line">set(gca,<span class="string">'YTickLabel'</span>,&#123;[<span class="number">70</span>:<span class="number">-10</span>:<span class="number">0</span>]&#125;);  <span class="comment">% change the y axis label</span></div><div class="line">box off;</div><div class="line">axes;</div><div class="line">h2 = plot(ave_salin,-yi,<span class="string">'b'</span>);</div><div class="line">xlabel(<span class="string">'Salinity'</span>);</div><div class="line">set(gca,<span class="string">'position'</span>,<span class="string">'default'</span>,<span class="string">'xaxislocation'</span>,<span class="string">'top'</span>,<span class="string">'color'</span>,<span class="string">'none'</span>);</div><div class="line">set(gca,<span class="string">'YTickLabel'</span>,&#123;&#125;,<span class="string">'yaxislocation'</span>,<span class="string">'right'</span>);</div><div class="line">box off;</div><div class="line"><span class="comment">% show the legend</span></div><div class="line">legend([h1,h2],<span class="string">'Temperature'</span>,<span class="string">'Salinity'</span>,<span class="string">'Location'</span>, <span class="string">'NorthWest'</span>);</div><div class="line"><span class="comment">% save as jpg file</span></div><div class="line">saveas(gcf,<span class="string">'temp-salin'</span>,<span class="string">'jpg'</span>);</div></pre></td></tr></table></figure>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p><img src="http://source.jiangyayu.cn/temp-salin/temp-salin.jpg"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h2&gt;&lt;p&gt;&amp;emsp;&amp;emsp;提供某次海洋观测的RBR-CTD测得的海洋要素数据，要求完成以下内容：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;根据数据的头文件，给出观测的基本信息。&lt;/li&gt;
&lt;li&gt;进行异常数据的剔除，仅保留“下放（Down-casting）”时观测的数据。&lt;/li&gt;
&lt;li&gt;去尖峰。&lt;/li&gt;
&lt;li&gt;将数据处理成1m平均的形式。保存数据文件。&lt;/li&gt;
&lt;li&gt;绘制温度和盐度的剖面图。
    
    </summary>
    
      <category term="数据处理分析" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"/>
    
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="海洋数据分析" scheme="https://blog.jiangyayu.cn/tags/%E6%B5%B7%E6%B4%8B%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
      <category term="温盐跃层" scheme="https://blog.jiangyayu.cn/tags/%E6%B8%A9%E7%9B%90%E8%B7%83%E5%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>matlab可视化综合实验</title>
    <link href="https://blog.jiangyayu.cn//archives/matlab-Visualization.html"/>
    <id>https://blog.jiangyayu.cn//archives/matlab-Visualization.html</id>
    <published>2013-09-10T00:25:33.000Z</published>
    <updated>2017-03-02T14:49:57.362Z</updated>
    
    <content type="html"><![CDATA[<h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><p>1.了解科学数据netcdf的存储模式，学会读取和创建netcdf等科学数据。<br>2.学会应用Matlab对数据进行处理分析。<br>3.应用Matlab和Surfer等软件对已有数据进行可视化显示。<br>4.学会应用contour绘制等值线图和pcolor绘制伪彩色图。<br>5.掌握Matlab句柄操作和对图像显示的控制。<br><a id="more"></a></p>
<h2 id="主要内容"><a href="#主要内容" class="headerlink" title="主要内容"></a>主要内容</h2><p>1.NetCDF格式的读取<br>2.NetCDF格式的写入<br>3.Matlab绘图与格式化<br>4.Surfer绘图</p>
<h2 id="实验主要仪器设备、软件"><a href="#实验主要仪器设备、软件" class="headerlink" title="实验主要仪器设备、软件"></a>实验主要仪器设备、软件</h2><p>1.硬件准备：PC机；<br>2.操作系统：Linux系统或Windows 2k以上系统；<br>3.软件开发工具：Matlab 2013a 、Surfer  80<br>4.使用数据：ECMWF 1965年全年海表压强(Mean sea level pressure)和皮温(skin temperature)的netcdf文件。</p>
<h2 id="NetCDF文件介绍"><a href="#NetCDF文件介绍" class="headerlink" title="NetCDF文件介绍"></a>NetCDF文件介绍</h2><h3 id="NetCDF简介"><a href="#NetCDF简介" class="headerlink" title="NetCDF简介"></a>NetCDF简介</h3><p>&emsp;&emsp;NetCDF(network Common Data Form)网络通用数据格式是由美国大学大气研究协会（University Corporation for Atmospheric Research，UCAR)的Unidata项目科学家针对科学数据的特点开发的，是一种面向数组型并适于网络共享的数据的描述和编码标准。对程序员来说，它和zip、jpeg、bmp文件格式类似，都是一种文件格式的标准。netcdf文件开始的目的是用于存储气象科学中的数据，现在已经成为许多数据采集软件的生成文件的格式。利用NetCDF可以对网格数据进行高效地存储、管理、获取和分发等操作。由于其灵活性，能够传输海量的面向阵列（array-oriented）数据，目前广泛应用于大气科学、水文、海洋学、环境模拟、地球物理等诸多领域，例如，NCEP(美国国家环境预报中心)发布的再分析资料，NOAA的CDC(气候数据中心)发布的海洋与大气综合数据集(COADS)均采用NetCDF作为标准。</p>
<h3 id="NetCDF的数据结构"><a href="#NetCDF的数据结构" class="headerlink" title="NetCDF的数据结构"></a>NetCDF的数据结构</h3><p>&emsp;&emsp;NetCDF数据集(文件名后缀为.nc) 的格式不是固定的，它是使用者根据需求 自己定义的。一个NetCDF数据集包含维(dimensions)、变量(variables)和属性(attributes)三种描述类型，每种类型都会被分配一个名字和一个ID，这些类型共同描述了一个数据集，NetCDF库可以同时访问多个数据集，用ID来识别不同数据集。变量存储实际数据，维给出了变量维度信息，属性则给出了变量或数据集本身的辅助信息属性，又可以分为适用于整个文件的全局属性和适用于特定变量的局部属性，全局属性则描述了数据集的基本属性以及数据集的来源。一个NetCDF文件的结构包括以下对象：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NetCDF name｛</div><div class="line">Dimensions：…  //定义维数</div><div class="line">Variables：… //定义变量</div><div class="line">Attributes：… //属性</div><div class="line">Data：…//数据</div><div class="line">｝</div></pre></td></tr></table></figure></p>
<h3 id="NetCDF数据的主要特点"><a href="#NetCDF数据的主要特点" class="headerlink" title="NetCDF数据的主要特点"></a>NetCDF数据的主要特点</h3><p>1)    自描述性：<br>&emsp;&emsp;它是一种自描述的二进制数据格式，包含自身的描述信息；<br>2)    易用性：<br>&emsp;&emsp;它是网络透明的，可以使用多种方式管理和操作这些数据；<br>3)    高可用性：<br>&emsp;&emsp;可以高效访问该数据，在读取大数据集中的子数据集时不用按顺序读取，可以直接读取需要访问的数据；<br>4)    可追加性：<br>&emsp;&emsp;对于新数据，可沿某一维进行追加，不用复制数据集和重新定义数据结构；<br>5)    平台无关性：<br>&emsp;&emsp;NetCDF数据集支持在异构的网络平台间进行数据传输和数据共享。可以由多种软件读取并使用多种语言编写，其中包括C语言，C++，Fortran，IDL，Python，Perl和Java语言等。</p>
<h2 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h2><h3 id="使用数据"><a href="#使用数据" class="headerlink" title="使用数据"></a>使用数据</h3><p>1.ECMWF简介<br>&emsp;&emsp;欧洲中期天气预报中心（European Centre for Medium-Range Weather Forecasts 简称 ECMWF）是一个包括24个欧盟成员国的国际性组织，是当今全球独树一帜的国际性天气预报研究和业务机构。其前身为欧洲的一个科学与技术合作项目。1973年有关国家召开大会宣布ECMWF正式成立，总部设在英国的Bracknell。<br>该中心于1979年6月首次做出了实时的中期天气预报。自1979年8月１日中心开始发布业务性中期天气预报，为其成员国提供实时的天气预报服务。<br>&emsp;&emsp;此外，ECMWF还与克罗地亚、冰岛、匈牙利和斯洛文尼亚达成了合作协议，与世界气象组织（WMO）、欧洲气象卫星开发组织（EUMETSAT）和非洲气象应用发展中心（ACMAD）也有业务工作上的具体协议。同时ECMWF与世界各国气象预报机构在天气预报领域有广泛的联系。ECMWF主要提供10天的中期数值预报产品，各成员国通过专用的区域气象数据通信网络得到这些产品后做出各自的中期预报，同时ECMWF也通过由世界气象组织（WMO）维护的全球通信网络向世界所有国家发送部分有用的中期数值预报产品。其使用的模式充分利用四维同化资料，可提供全球在65公里高度内60层的40公里网格密度共20，911，680个点的风、温、湿预报。<br>2.数据下载<br>&emsp;&emsp;本次实习使用数据是从ECMWF官网(<a href="http://data-portal.ecmwf.int/data/d/era40_daily/" target="_blank" rel="external">http://data-portal.ecmwf.int/data/d/era40_daily/</a> )下载的NetCDF文件，主要内容为1965年全球海表压强(Mean sea level pressure)和皮温(skin temperature)。</p>
<h3 id="并读取数据"><a href="#并读取数据" class="headerlink" title="并读取数据"></a>并读取数据</h3><p>1.获取文件信息<br>&emsp;&emsp;matlab中使用ncdisp命令查看NetCDF文件信息。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; ncdisp(<span class="string">'1965.nc'</span>)</div><div class="line">Source:</div><div class="line">           C:\Users\Jiangyayu\Documents\MATLAB\<span class="number">1965.</span>nc</div><div class="line">Format:</div><div class="line">           classic</div><div class="line">Global Attributes:</div><div class="line">           Conventions = <span class="string">'CF-1.0'</span></div><div class="line">           history     = <span class="string">'2013-09-04 04:50:02 GMT by mars2netcdf-0.92'</span></div><div class="line">Dimensions:</div><div class="line">           longitude = <span class="number">144</span></div><div class="line">           latitude  = <span class="number">73</span></div><div class="line">           time      = <span class="number">1460</span>  (UNLIMITED)</div><div class="line">Variables:</div><div class="line">    longitude</div><div class="line">           Size:       <span class="number">144</span>x1</div><div class="line">           Dimensions: longitude</div><div class="line">           Datatype:   single</div><div class="line">           Attributes:</div><div class="line">                       units     = <span class="string">'degrees_east'</span></div><div class="line">                       long_name = <span class="string">'longitude'</span></div><div class="line">    latitude </div><div class="line">           Size:       <span class="number">73</span>x1</div><div class="line">           Dimensions: latitude</div><div class="line">           Datatype:   single</div><div class="line">           Attributes:</div><div class="line">                       units     = <span class="string">'degrees_north'</span></div><div class="line">                       long_name = <span class="string">'latitude'</span></div><div class="line">    time     </div><div class="line">           Size:       <span class="number">1460</span>x1</div><div class="line">           Dimensions: time</div><div class="line">           Datatype:   int32</div><div class="line">           Attributes:</div><div class="line">                       units     = <span class="string">'hours since 1900-01-01 00:00:0.0'</span></div><div class="line">                       long_name = <span class="string">'time'</span></div><div class="line">    msl      </div><div class="line">           Size:       <span class="number">144</span>x73x1460</div><div class="line">           Dimensions: longitude,latitude,time</div><div class="line">           Datatype:   int16</div><div class="line">           Attributes:</div><div class="line">                       scale_factor  = <span class="number">0.222</span></div><div class="line">                       add_offset    = <span class="number">9.95e+04</span></div><div class="line">                       _FillValue    = <span class="number">-3.28e+04</span></div><div class="line">                       missing_value = <span class="number">-3.28e+04</span></div><div class="line">                       units         = <span class="string">'Pa'</span></div><div class="line">                       long_name     = <span class="string">'Mean sea level pressure'</span></div><div class="line">    skt      </div><div class="line">           Size:       <span class="number">144</span>x73x1460</div><div class="line">           Dimensions: longitude,latitude,time</div><div class="line">           Datatype:   int16</div><div class="line">           Attributes:</div><div class="line">                       scale_factor  = <span class="number">0.00238</span></div><div class="line">                       add_offset    = <span class="number">267</span></div><div class="line">                       _FillValue    = <span class="number">-3.28e+04</span></div><div class="line">                       missing_value = <span class="number">-3.28e+04</span></div><div class="line">                       units         = <span class="string">'K'</span></div><div class="line">                       long_name     = <span class="string">'Skin temperature'</span></div></pre></td></tr></table></figure></p>
<p>2.读取数据<br>（1）读取变量<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% Read data from the netcdf file</span></div><div class="line"><span class="comment">%Read Variables </span></div><div class="line">longitude_data = ncread(<span class="string">'1965.nc'</span>,<span class="string">'longitude'</span>);</div><div class="line">latitude_data = ncread(<span class="string">'1965.nc'</span>,<span class="string">'latitude'</span>);</div><div class="line">time_data = ncread(<span class="string">'1965.nc'</span>,<span class="string">'time'</span>);</div><div class="line">msl = ncread(<span class="string">'1965.nc'</span>,<span class="string">'msl'</span>);</div><div class="line">skt = ncread(<span class="string">'1965.nc'</span>,<span class="string">'skt'</span>);</div></pre></td></tr></table></figure></p>
<p>（2）读取属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">% Read Attributes</div><div class="line">msl_FillValue = ncreadatt(&apos;1965.nc&apos;,&apos;msl&apos;,&apos;_FillValue&apos;);</div><div class="line">msl_missing_value = ncreadatt(&apos;1965.nc&apos;,&apos;msl&apos;,&apos;missing_value&apos;);</div><div class="line">msl_scale_factor = ncreadatt(&apos;1965.nc&apos;,&apos;msl&apos;,&apos;scale_factor&apos;);</div><div class="line">msl_add_offset = ncreadatt(&apos;1965.nc&apos;,&apos;msl&apos;,&apos;add_offset&apos;);</div><div class="line"> </div><div class="line">skt_FillValue = ncreadatt(&apos;1965.nc&apos;,&apos;skt&apos;,&apos;_FillValue&apos;);</div><div class="line">skt_missing_value = ncreadatt(&apos;1965.nc&apos;,&apos;skt&apos;,&apos;missing_value&apos;);</div><div class="line">skt_scale_factor = ncreadatt(&apos;1965.nc&apos;,&apos;skt&apos;,&apos;scale_factor&apos;);</div><div class="line">skt_add_offset = ncreadatt(&apos;1965.nc&apos;,&apos;skt&apos;,&apos;add_offset&apos;);</div></pre></td></tr></table></figure></p>
<p>（3）读取结果<br><img src="http://source.jiangyayu.cn/matlab-Visualization/1.png" alter="读取数据"><br>（4）计算年平均msl和skt</p>
<h3 id="绘制等值线图和伪彩色图"><a href="#绘制等值线图和伪彩色图" class="headerlink" title="绘制等值线图和伪彩色图"></a>绘制等值线图和伪彩色图</h3><p>(1)contour绘制等值线图<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% figure</span></div><div class="line">AX = figure(<span class="number">1</span>);</div><div class="line"><span class="comment">% Figure Mean sea level pressure</span></div><div class="line">AX1 = subplot(<span class="number">211</span>);</div><div class="line">v1 = min(min(ave_msl))/<span class="number">100</span>:<span class="number">2.5</span>:max(max(ave_msl))/<span class="number">100</span>;</div><div class="line">[c1,h1] = contour(longitude_data,latitude_data,ave_msl'/<span class="number">100</span>,v1);</div><div class="line">axis image</div><div class="line">xlabel(<span class="string">'longitude'</span>);</div><div class="line">ylabel(<span class="string">'latitude'</span>);</div><div class="line">title(<span class="string">'1965 Mean sea level pressure (+1000hpa)'</span>);</div><div class="line">clabel(c1,h1,v1([<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>]),<span class="string">'LabelSpacing'</span>,<span class="number">1000</span>);</div><div class="line">ht = clabel(c1,h1);</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(ht)</div><div class="line">    num = get(ht(ii),<span class="string">'UserData'</span>);</div><div class="line">    set(ht(ii),<span class="string">'String'</span>,num2str(num<span class="number">-1000</span>,<span class="string">'%.1f'</span>))</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p>
<p>(2)pcolor绘制伪彩色图<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%Figure Skin temperature</span></div><div class="line">AX2 = subplot(<span class="number">212</span>); </div><div class="line">h2 = pcolor(longitude_data,latitude_data,ave_skt');</div><div class="line">axis image</div><div class="line">xlabel(<span class="string">'longitude'</span>);</div><div class="line">ylabel(<span class="string">'latitude'</span>);</div><div class="line">title(<span class="string">'1965 Average Skin temperature (K)'</span>);</div><div class="line">shading interp;</div><div class="line"><span class="number">3</span>)	 绘制colorbar</div><div class="line"><span class="comment">% colorbar</span></div><div class="line">h = colorbar;</div><div class="line">set(h,<span class="string">'Position'</span>,[<span class="number">0.85</span>,<span class="number">0.12</span>,<span class="number">0.05</span>,<span class="number">0.8</span>]);</div><div class="line">v2 = min(min(ave_skt)):<span class="number">10</span>:max(max(ave_skt));</div><div class="line">v3 = cell(<span class="number">1</span>,<span class="built_in">length</span>(v2));</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(v2)</div><div class="line">    v3(ii) = &#123;num2str(v2(ii),<span class="string">'%.1f'</span>)&#125;;</div><div class="line"><span class="keyword">end</span></div><div class="line">set(h,<span class="string">'YTick'</span>,v2,<span class="string">'YTickLabel'</span>,v3)</div><div class="line">set(get(h,<span class="string">'Title'</span>),<span class="string">'string'</span>,<span class="string">'K'</span>)</div></pre></td></tr></table></figure></p>
<p>(4) 保存图片<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">% save the figure </span></div><div class="line">saveas(gcf,<span class="string">'msl&amp;skt'</span>,<span class="string">'jpg'</span>)</div></pre></td></tr></table></figure></p>
<p>(5)结果图<br><img src="http://source.jiangyayu.cn/matlab-Visualization/2.png" alter="结果图"></p>
<h3 id="将数据写入新文件"><a href="#将数据写入新文件" class="headerlink" title="将数据写入新文件"></a>将数据写入新文件</h3><p>(1)创建NetCDF文件和变量<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% Rewrite the data to a new netcdf file</span></div><div class="line"><span class="comment">%Create File and Variables</span></div><div class="line">nccreate(<span class="string">'average_1965.nc'</span>,<span class="string">'longitude'</span>,<span class="string">'Dimensions'</span>,&#123;<span class="string">'longitude'</span>,<span class="number">144</span>&#125;,<span class="string">'Datatype'</span>,<span class="string">'single'</span>,<span class="string">'Format'</span>,<span class="string">'classic'</span>);</div><div class="line">nccreate(<span class="string">'average_1965.nc'</span>,<span class="string">'latitude'</span>,<span class="string">'Dimensions'</span>,&#123;<span class="string">'latitude'</span>,<span class="number">73</span>&#125;,<span class="string">'Datatype'</span>,<span class="string">'single'</span>,<span class="string">'Format'</span>,<span class="string">'classic'</span>);</div><div class="line">nccreate(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>,<span class="string">'Dimensions'</span>,&#123;<span class="string">'longitude'</span>,<span class="number">144</span>,<span class="string">'latitude'</span>,<span class="number">73</span>&#125;,<span class="string">'Datatype'</span>,<span class="string">'int16'</span>,<span class="string">'Format'</span>,<span class="string">'classic'</span>);</div><div class="line">nccreate(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>,<span class="string">'Dimensions'</span>,&#123;<span class="string">'longitude'</span>,<span class="number">144</span>,<span class="string">'latitude'</span>,<span class="number">73</span>&#125;,<span class="string">'Datatype'</span>,<span class="string">'int16'</span>,<span class="string">'Format'</span>,<span class="string">'classic'</span>);</div></pre></td></tr></table></figure></p>
<p>(2)创建属性值<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%Attributes</span></div><div class="line">fileattrib(<span class="string">'average_1965.nc'</span>,<span class="string">'+w'</span>);</div><div class="line"><span class="comment">%Global Attributes</span></div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'/'</span>,<span class="string">'discription'</span>,<span class="string">'Mean sea level pressure and skin temperature of 1965'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'/'</span>,<span class="string">'author'</span>,<span class="string">'Yayu Jiang'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'/'</span>,<span class="string">'data'</span>,<span class="string">'20130910'</span>);</div><div class="line"> </div><div class="line"><span class="comment">% Variables Attributes</span></div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'longitude'</span>, <span class="string">'units'</span>,<span class="string">'degrees_east'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'longitude'</span>, <span class="string">'long_name'</span> ,<span class="string">'longitude'</span>);</div><div class="line"> </div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'latitude'</span>, <span class="string">'units'</span>,<span class="string">'degrees_north'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'latitude'</span>, <span class="string">'long_name'</span> ,<span class="string">'latitude'</span>);</div><div class="line"> </div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'scale_factor'</span>,msl_scale_factor);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'add_offset'</span>,msl_add_offset);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'_FillValue'</span>,msl_FillValue);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'missing_value'</span>,msl_missing_value);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'units'</span>,<span class="string">'K'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>, <span class="string">'long_name'</span>,<span class="string">'Skin temperature'</span>);</div><div class="line"> </div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'scale_factor'</span>,skt_scale_factor);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'add_offset'</span>,skt_add_offset);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'_FillValue'</span>,msl_FillValue);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'missing_value'</span>,msl_missing_value);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'units'</span>,<span class="string">'Pa'</span>);</div><div class="line">ncwriteatt(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>, <span class="string">'long_name'</span>,<span class="string">'Mean sea level pressure'</span>);</div></pre></td></tr></table></figure></p>
<p>(3) 写入数据<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">% input the new data</span></div><div class="line">ncwrite(<span class="string">'average_1965.nc'</span>,<span class="string">'longitude'</span>,longitude_data);</div><div class="line">ncwrite(<span class="string">'average_1965.nc'</span>,<span class="string">'latitude'</span>,latitude_data);</div><div class="line">ncwrite(<span class="string">'average_1965.nc'</span>,<span class="string">'msl'</span>,ave_msl);</div><div class="line">ncwrite(<span class="string">'average_1965.nc'</span>,<span class="string">'skt'</span>,ave_skt);</div></pre></td></tr></table></figure></p>
<h3 id="Surfer绘图"><a href="#Surfer绘图" class="headerlink" title="Surfer绘图"></a>Surfer绘图</h3><p>（1)创建dat文件<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%% creat data for surfer</span></div><div class="line">m = <span class="built_in">zeros</span>(<span class="number">144</span>*<span class="number">73</span>,<span class="number">3</span>);</div><div class="line">s = <span class="built_in">zeros</span>(<span class="number">144</span>*<span class="number">73</span>,<span class="number">3</span>);</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="number">144</span></div><div class="line">    <span class="keyword">for</span> jj = <span class="number">1</span>:<span class="number">73</span></div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">1</span>) = longitude_data(ii);</div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">2</span>) = latitude_data(jj);</div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">3</span>) = ave_msl(ii,jj);</div><div class="line">        s((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">1</span>) = longitude_data(ii);</div><div class="line">        s((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">2</span>) = latitude_data(jj);</div><div class="line">        s((ii<span class="number">-1</span>)*<span class="number">73</span>+jj,<span class="number">3</span>) = ave_skt(ii,jj);</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line">csvwrite(<span class="string">'msl.dat'</span>,m);</div><div class="line">csvwrite(<span class="string">'skt.dat'</span>,s);</div></pre></td></tr></table></figure></p>
<p>(2)网格化数据<br>&emsp;&emsp;打开Surfer 8软件，通过菜单下网格-&gt;数据，将matlab生成的dat文件通过插值方式变成网格数据，由于在matlab中已考虑行列的关系，因此这里的数据列就不用考虑了，数据点数也比较多，网格化方式也可默认。<br><img src="http://source.jiangyayu.cn/matlab-Visualization/3.png" alter="生成网格"><br>(3)    绘制等值线<br>&emsp;&emsp;在菜单栏下选择地图-&gt;等值线图-&gt;新建等值线图，依次导入刚刚生成的msl.grd和skt.grd网格数据。<br>(4)    设置参数<br>&emsp;&emsp;对skt等值线图作如下设置：<br>&emsp;&emsp;勾选填充等值线选项；将等值线填充成由篮到红的渐变；设置线条为不可见；将右侧和上侧的刻度属性设置为无。<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/matlab-Visualization/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/matlab-Visualization/4.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/matlab-Visualization/5.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/matlab-Visualization/5.png"></a></div></div></div></div><br>&emsp;&emsp;最终效果图：<br><img src="http://source.jiangyayu.cn/matlab-Visualization/6.png"><br>&emsp;&emsp;对msl等值线进行颜色设置标注显示等最终效果：<br><img src="http://source.jiangyayu.cn/matlab-Visualization/7.png"><br>&emsp;&emsp;添加全球大陆的轮廓图，设置填充：<br><img src="http://source.jiangyayu.cn/matlab-Visualization/8.png"><br>&emsp;&emsp;选中这三个图层，在菜单下选择：地图-&gt;覆盖地图，将三幅图覆盖到一起，调整合适的图层顺序使显示正常。<br>&emsp;&emsp;在菜单下选择：绘制-&gt;符号，找到指北针符号，为等值线图添加指北针。<br>&emsp;&emsp;点击工具栏中的T，为地图添加标题、坐标轴名称等基本信息。<br><img src="http://source.jiangyayu.cn/matlab-Visualization/9.png"><br>(5)    添加colorbar<br>&emsp;&emsp;根据画skt等值线图的基本思想，要制作一个colorbar可以通过设置一个从左往右均匀渐变的网格，然后填充颜色的做法来绘制。这样绘制的colorbar其实就是一种特殊的等值线。<br>&emsp;&emsp;同样用matlab生成这样的一个dat文件：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">0</span>:<span class="number">2.55</span>:<span class="number">255</span>;</div><div class="line">m = <span class="built_in">zeros</span>(<span class="number">1010</span>,<span class="number">3</span>);</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="number">10</span></div><div class="line">    <span class="keyword">for</span> jj = <span class="number">210</span>:<span class="number">310</span></div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">101</span>+jj<span class="number">-209</span>,<span class="number">1</span>) = jj;</div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">101</span>+jj<span class="number">-209</span>,<span class="number">2</span>) = ii;</div><div class="line">        m((ii<span class="number">-1</span>)*<span class="number">101</span>+jj<span class="number">-209</span>,<span class="number">3</span>) = a(jj<span class="number">-209</span>);</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line">csvwrite(<span class="string">'colorbar.dat'</span>,m);</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;然后像skt图一样设置填充、坐标轴、等值线、刻度线等，使之美观。<br><img src="http://source.jiangyayu.cn/matlab-Visualization/10.png"><br>(6)保存文件<br><img src="http://source.jiangyayu.cn/matlab-Visualization/11.png"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><h3 id="matlab等值线标注问题"><a href="#matlab等值线标注问题" class="headerlink" title="matlab等值线标注问题"></a>matlab等值线标注问题</h3><p>&emsp;&emsp;用Matlab中<code>contour</code>命令画等值线的等值线虽然设置了每隔2.5hpa画一条，但<code>min（min（ave_msl））</code>和<code>max（max（ave_msl））</code>这中间还有16个数据，画出来的等压线十分密集。因此我们在使用<code>clabel</code>进行标注时可以有选择性地对等值线密集的地方少一些标注，稀疏的地方多一些标注，例如：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clabel(c1,h1,v1([<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>]),<span class="string">'LabelSpacing'</span>,<span class="number">1000</span>);</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;此外我们还可以设置标注数据的有效位数，并将其值共同减去一个较大的值来实现用较少位数的数进行标注，例如：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ht = clabel(c1,h1);</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(ht)</div><div class="line">    num = get(ht(ii),<span class="string">'UserData'</span>);</div><div class="line">    set(ht(ii),<span class="string">'String'</span>,num2str(num<span class="number">-1000</span>,<span class="string">'%.1f'</span>))</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p>
<h3 id="matlab-colorbar的标注问题"><a href="#matlab-colorbar的标注问题" class="headerlink" title="matlab  colorbar的标注问题"></a>matlab  colorbar的标注问题</h3><p>&emsp;&emsp;matlab中的<code>colorbar</code>命令可以直接绘制出比较优美的colorbar，但是有时候为了是设置colorbar的标注，我们需要用到命令：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set(h,<span class="string">'YTick'</span>,v2,<span class="string">'YTickLabel'</span>,&#123;’string1’,’strng2’,’string3’&#125;);</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;当colorbar上的标注比较少的时候这种做法可行，但是当colorbar上的标注达到一定的数量时，这种做法很明显会比较耗时耗力，我们可以尝试用：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">v2 = min(min(ave_skt)):<span class="number">10</span>:max(max(ave_skt));</div><div class="line">v3 = cell(<span class="number">1</span>,<span class="built_in">length</span>(v2));</div><div class="line"><span class="keyword">for</span> ii = <span class="number">1</span>:<span class="built_in">length</span>(v2)</div><div class="line">    v3(ii) = &#123;num2str(v2(ii),<span class="string">'%.1f'</span>)&#125;;</div><div class="line"><span class="keyword">end</span></div><div class="line">set(h,<span class="string">'YTick'</span>,v2,<span class="string">'YTickLabel'</span>,v3);</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;此时就能按照所要求的标注间隔和所要保留的位数进行自动标注了。</p>
<h3 id="surfer-8绘制colorbar的方法"><a href="#surfer-8绘制colorbar的方法" class="headerlink" title="surfer 8绘制colorbar的方法"></a>surfer 8绘制colorbar的方法</h3><p>&emsp;&emsp;相比较matlab而言，surfer中没有提供直接画colorbar的方便操作，但是我们还是可以通过已有的功能来实现colorbar的制作。</p>
<p>(1)首先我们要做的是生成用来制作colorbar的数据，我们可以在matlab中生成这样的一组数据：<br>&emsp;&emsp;x：将来作为colorbar的刻度值，应设置为skt的整个范围<br>&emsp;&emsp;y：colorbar的宽度，可以任意设置，将来仍然可以调节<br>&emsp;&emsp;(x，y):0:255要保证维度和x，y个数，且不同值的数目与x相同</p>
<p>(2)    用matlab实现生成数据<br>&emsp;&emsp;这里为了后面绘图方便，在生成数据的时候就生成了一个等价的二维数组colorbar.dat</p>
<p>(3)    转换成网格数据并导<br><img src="http://source.jiangyayu.cn/matlab-Visualization/12.png"><br>(4)    设置参数<br>&emsp;&emsp;分别设置填充颜色、线条颜色、坐标轴标注、坐标轴刻度等属性，一个美观的colorbar就绘制出来了。<br><img src="http://source.jiangyayu.cn/matlab-Visualization/13.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;实验目的&quot;&gt;&lt;a href=&quot;#实验目的&quot; class=&quot;headerlink&quot; title=&quot;实验目的&quot;&gt;&lt;/a&gt;实验目的&lt;/h2&gt;&lt;p&gt;1.了解科学数据netcdf的存储模式，学会读取和创建netcdf等科学数据。&lt;br&gt;2.学会应用Matlab对数据进行处理分析。&lt;br&gt;3.应用Matlab和Surfer等软件对已有数据进行可视化显示。&lt;br&gt;4.学会应用contour绘制等值线图和pcolor绘制伪彩色图。&lt;br&gt;5.掌握Matlab句柄操作和对图像显示的控制。&lt;br&gt;
    
    </summary>
    
      <category term="数据处理分析" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"/>
    
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="NetCDF" scheme="https://blog.jiangyayu.cn/tags/NetCDF/"/>
    
      <category term="可视化" scheme="https://blog.jiangyayu.cn/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>利用IDL从TRMM/TMI卫星数据反演全球SST</title>
    <link href="https://blog.jiangyayu.cn//archives/IDL-SST.html"/>
    <id>https://blog.jiangyayu.cn//archives/IDL-SST.html</id>
    <published>2013-07-10T09:26:30.000Z</published>
    <updated>2017-03-02T14:49:56.010Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实验目的："><a href="#实验目的：" class="headerlink" title="实验目的："></a>实验目的：</h1><p>&emsp;&emsp;理论与实验课的综合运用，提高课堂与实践相结合的分析能力</p>
<ol>
<li>了解海洋卫星反演SST的物理原理以及两种类型（热红外与微波辐射计）的卫星传感器；</li>
<li>熟悉TRMM/TMI；</li>
<li>掌握TMI反演SST的算法；</li>
<li>进一步熟悉IDL编程语言；</li>
<li>了解TMI的数据结构以及数据的输入与输出；</li>
<li>学会数据的图形显示，创建图形输出；</li>
<li>掌握数据的图象显示；</li>
<li>熟悉SST数据的读取，显示，输出，并注意colorbar的显示；</li>
<li>了解SST对全球气候的影响以及重要意义，着重说明SST全球分布的特点。<a id="more"></a>
</li>
</ol>
<h1 id="实验主要仪器设备，软件"><a href="#实验主要仪器设备，软件" class="headerlink" title="实验主要仪器设备，软件"></a>实验主要仪器设备，软件</h1><ol>
<li>硬件准备：PC机；</li>
<li>操作系统：Linux系统或Windows 2k以上系统；</li>
<li>软件开发工具：IDL语言</li>
<li>2012-2013年日、周、月均的TRMM/TMI二进制卫星数据</li>
</ol>
<h1 id="微波辐射计反演SST的原理介绍"><a href="#微波辐射计反演SST的原理介绍" class="headerlink" title="微波辐射计反演SST的原理介绍"></a>微波辐射计反演SST的原理介绍</h1><p>&emsp;&emsp;根据电磁辐射理论，辐射传输方程的微分形式是</p>
<p> $$ \dfrac { {\rm d}L\left( z\right) } { {\rm d}z}+L\left( z\right) K_{ab}=L_{B}\left( z\right) K_{ab} $$</p>
<p>&emsp;&emsp;式中$L\left( z\right)$是在位置z处的辐亮度，$K_{ab}$是在传输路径上介质的吸收系数，$L\left( z\right) K_{ab}$是因大气中吸收气体的吸收而衰减的辐亮度，$L_{B}$是与吸收气体温度相同的黑体发射的辐亮度。由于微波波长远大于大气层中各种粒子的尺度，散射衰减对于微波影响一般可以忽略，而仅仅需要考虑吸收引起的衰减。利用瑞利-金斯定律，我们得到<br>$$T\left( \theta ,h\right) =etT_{s}+T_{u}\left( \theta ,h\right)etT_{s}+\int _{0}^{h}T\left( z\right)K_{ab}\left( z\right) e^{-\tau\left(z,h\right)sec\theta }sec\theta {\rm d}z$$<br>&emsp;&emsp;式中$T\left( \theta ,h\right)$是微波辐射计观测到的视在温度（apparent temperature）或称亮温（brightness temperature），$T_{u}\left( \theta ,h\right)$是大气向上辐射的亮温，$h$是辐射计所在的高度，$\theta$是观测角或卫星天顶角，$e$是海表面的发射率，Ts是海表面的温度，$eT_{s}$等于海面亮温；$T\left(z\right)$是在高度$z$处大气的温度，$K_{ab}$是大气的吸收系数，在微波波段大气的吸收系数与${\rm d}z$的乘积$K_{ab}{\rm d}z$等于在${\rm d}z$路径内大气的吸收率。 $t$代表从海面$0$到高空$h$之间大气层的透射率，它的计算公式是<br>$$t\left( 0,h\right) =\exp [-\tau \left( 0,h\right)sec\theta]$$<br>&emsp;&emsp;式中$\tau \left( 0,h\right)$是从海面$0$到高空$h$之间大气层的光学厚度。<br><img src="http://source.jiangyayu.cn/IDL-SST/4.png"><br>&emsp;&emsp;考虑更多的辐射源，适合于微波辐射计的辐射传输方程可表示为（Stewart 1985）<br>$$T\left( \theta ,h\right) =etT_{s}+T_{u}\left( \theta ,h\right)+\rho tT_{d}+\rho t^{2}\left(T_{gal}+T_{cos}+T_{sun}\right) $$<br>&emsp;&emsp;式中$T\left( \theta ,h\right)$是微波辐射计观测的视在温度（apparent temperature）或亮温（brightness temperature）；$T_{u}$是大气向上辐射的亮温；$\rho$是海面的菲涅耳反射率；$T_{gal}$  和$T_{cos}$分别是银河系噪音（galactic noise）等效温度（对于f&gt;3GHz，$T_{gal}$&lt;1K）和宇宙黑体辐射（cosmic blackbody radiation）等效温度（$T_{cos}$≈3K）；$T_{sun}$是太阳表面温度，$ρ t^{2}T_{sun}$代表反射的太阳辐射，辐射计应避免接收到它。对于频率大于3GHz的电磁波，电离层噪音的等效温度很小可以忽略。大气向上辐射的亮温$T_{u}$还可以进一步被简化为<br>$$T_{u}=e_{A}T_{A}=T_{A}\left(1-t\right)$$</p>
<p>&emsp;&emsp;式中$T_{A}$是某种加权平均大气温度，在估计AMSR通道上水蒸汽引起的衰减系数时，某些文献采用了这种近似（Xia 2001）。在上面的公式中，$e_{A}$是大气的发射率。根据基尔霍夫定律，在大气内部大气的发射率$e_{A}$等于大气的吸收率$a_{A}$，大气的吸收率$a_{A}$与大气的透射率$t$之和等于1。</p>
<h1 id="TRMM-TMI卫星及传感器介绍"><a href="#TRMM-TMI卫星及传感器介绍" class="headerlink" title="TRMM/TMI卫星及传感器介绍"></a>TRMM/TMI卫星及传感器介绍</h1><h2 id="装载微波辐射计的卫星"><a href="#装载微波辐射计的卫星" class="headerlink" title="装载微波辐射计的卫星"></a>装载微波辐射计的卫星</h2><p><strong>EOS-PM：</strong>又名Aqua，是美国的地球观测卫星（下午星），装载着日本高级微波扫描辐射计AMSR-E(advanced microwave scanning radiometer for EOS)。下午卫星(EOS-AQUA)于2002年5月2日成功发射，过境时间为下午14:30和凌晨2:30。采用三轴稳定卫星平台，轨道倾角98.2°，卫星轨道高度705公里。上午星共有星载遥感观测平台5套，依其分辨率的不同，覆盖全球的时间在1天(14.2条轨道)～16天(约233条轨道)一次。</p>
<p><strong>JERS-1：</strong> 日本的地球资源卫星卫星，1992年2月11日发射，为太阳同步轨道，其轨道高度：796公里，倾角:97.662o ，运行周期：96.146分钟，重复周期：44天，赤道上空高度：568.023公里 经过降交点的当地时间：10：30-11：00 空间分辨率：方位方向18米。其装载的热带降雨测量任务（TRMM）微波成像仪TMI（TRMM microwave imager）在五个波段设有十个通道<br><strong>DMSP：</strong>全名Defense Meteorological Satellite Program，是美国国防部的极轨卫星计划。运行在高度约830km的太阳同步轨道，周期约101min，扫描条带宽度3 000km。DMSP卫星采用双星运行体制，两颗业务卫星同时运行，过赤道时间为05∶36及10∶52，每6h可提供一次全球云图。其装载的专用传感器微波成像仪SSM/I(special sensor microwave/imager)在四个波段设有7个通道。</p>
<h2 id="TRMM"><a href="#TRMM" class="headerlink" title="TRMM"></a>TRMM</h2><p>&emsp;&emsp;TRMM（Tropical Rainfall Measuring Mission）实验计划是美国和日本合作开展的热带降雨测量计划，日本负责提供TRMM卫星的H-2发射火箭和星载关键仪器测雨雷达。美国NASA提供太空舱和PR以外的其他仪器，以及卫星的业务运行系统。卫星的业务控制是通过NASA的“在轨运行和资料无线电转播卫星系统（TDRSS）”来执行的。TRMM卫星于1997年11月28日在日本种子岛（Tanegashima）空间中心发射，轨道高度是350km，属于Circlar轨道。TRMM卫星的仪器有5个：测雨雷达（Precipitation Radar, PR）、微波成像仪（TRMM µwave Imager，TMI）、可见光和红外扫描仪（Visible and Infrared Scanner，VIRS）、云和地球辐射能量系统（Clouds and the Earth Radiant Energy System，CERES）、闪电成像传感器（Lightning Imaging Sensor，LIS）。</p>
<h2 id="TMI"><a href="#TMI" class="headerlink" title="TMI"></a>TMI</h2><p>&emsp;&emsp;热带降雨测量卫星(TRMM)上的微波成像仪(TMI)是一个被动微波传感器，目的在于在TRMM卫星下通过宽行迹提供定量的降雨信息。通过对地球和大气层释放的的微量微波能量进行细微的测量，TMI能够定量的测量大气层中的水蒸气，云水量和降雨强度。TMI系以星下点为转轴，面对地球做由左至右，离开星下点49度向前（天顶角约52.8度），作刈幅(swath)直线距离约760公里的锥形模式(conical mode)扫瞄。<br>&emsp;&emsp;TMI改良自美国地区DMSP卫星SSM/I，与原来相比，增加了10.7GHz频道，并因应热带地区降雨特性，将原22.235GHz频率改为21.3GHz，故其九个微波探测频道，所使用的是10.7、19.4、21.3、37与85.5GHz五个微波波段，其中除了21.3GHz仅有垂直线性极化外，其余均为垂直与水平线性极化频道。<br>&emsp;&emsp;除了微波成像仪有10.7 GHz.这个通道外，其他频率都是与专用微波成像仪的频率段相似的。10.7 GHz.的通道用来提供热带降雨中常见的高降雨率作出更为线性的反应。比起专用微波成像仪的860公里的高度，热带降雨测量任务卫星的高度只有402公里。微波成像仪在地球表面有878公里的宽刈幅。正是因为TRMM上面TMI的高分辨率和10.7GHz的通道，使得TMI强于之前的任何一个传感器。</p>
<h1 id="TMI反演SST算法"><a href="#TMI反演SST算法" class="headerlink" title="TMI反演SST算法"></a>TMI反演SST算法</h1><h2 id="概述与背景资料"><a href="#概述与背景资料" class="headerlink" title="概述与背景资料"></a>概述与背景资料</h2><ol>
<li>海洋数据的理想恢复精度<br><img src="http://source.jiangyayu.cn/IDL-SST/7.png" style="zoom:0.4"></li>
<li>调查目标<br>&emsp;&emsp;本次调查的主要目标有两个。首先是要发展一个海洋反演算法，该算法反演表1中规定的TS，W，V，和L的精度。这些产物将对地球科学界有着极大的作用。第二个目标是改善海表面和干燥大气的辐射传输模型。AMSR上的6.9和10.7GHz通道将会提供最新RTM低频信息。经验表明，这两个目标之间是精密相连的。由于对RTM有比较深刻的理解，所以检索的结果更加准确，同时也使得新的遥感技术得以产生，例如利用辐射计去测量海表面风矢量。<br><img src="http://source.jiangyayu.cn/IDL-SST/8.png" style="zoom:0.4"><br><img src="http://source.jiangyayu.cn/IDL-SST/9.png" style="zoom:0.7"></li>
</ol>
<h2 id="海洋反演算法"><a href="#海洋反演算法" class="headerlink" title="海洋反演算法"></a>海洋反演算法</h2><ol>
<li>算法类型<br>一般来说，有三种类型的海洋反演算法：<ul>
<li>多元线性回归算法</li>
<li>非线性迭代算法</li>
<li>后向发射回归算法<br>&emsp;&emsp;就利用辐射传输理论推导上来说，前两种类型是物理算法。第三类是很少或根本没有考虑基本物理理论的纯粹的统计模型。我们现在描述这些算法并讨论它们的优缺点。</li>
</ul>
</li>
<li>多元线性回归算法<br>&emsp;&emsp;在回归分析中，如果有两个或两个以上的自变量，就称为多元回归。事实上，一种现象常常是与多个因素相联系的，由多个自变量的最优组合共同来预测或估计因变量，比只用一个自变量进行预测或估计更有效，更符合实际。因此多元线性回归比一元线性回归的实用意义更大。</li>
<li><p>线性回归算法的推导和检验<br>&emsp;&emsp;下图显示的AMSR线性回归算法的$C_{ij}$系数的推导。首先得合成一张巨大的海洋大气图。利用1987年到1990年这段期间从一些小岛屿上发射的42195个特性控制探空仪对大气进行了规定。<br><img src="http://source.jiangyayu.cn/IDL-SST/10.png" style="zoom:0.7"></p>
<p>&emsp;&emsp;其中一半探空仪被用于求导的$C_{ij}$系数，另一半被用于测试算法。在探空剖面上叠加了包含密度范围在0—0.3mm的柱状水的一个云层。在这些模拟的大气下面，我们设置了一个粗糙的海表面。海表面温度Ts的随机变化范围0°C-30 °C，风速W的随机变化范围0m/s-20m/s，风向$φ$的随机变化范围0°-360°。利用这个方法获得了大约400000个图像。<br>&emsp;&emsp;在自然界中，$T_{s}$和W之间有很强的相关性。通过比较图像我们已经证明了这种相关性的存在。例如，我们可能会忽视自然界重来没发生过的水温极低和水蒸气温度极高的情况。然而，现在我们提出这些不切实际的情况是为了确定该算法是否真正能够从V信号中分离出$T_s$信号。<br>&emsp;&emsp;大气亮温$T_{BU}$、$T_{BD}$和透射率$τ$是把探空仪测的云的概况$T(h)$、$p(h)$、$ρV(h)$、$ρL(h)$带入公式计算出来的。根据上述给出的公式计算出粗糙海面的反射率$R$，来自海表面散射的大气辐射$T_{BΩ}$由公式得到。最后，由AMSR探测到的亮温$T_{B}$关系着大气和海表面。<br>&emsp;&emsp;把噪声添加到模拟的AMSR的$T_{B}’s$中，代表了其的测量误差。测量误差取决于空间分辨率。在60KM分辨率，对应于6.9GHz的卫星覆盖区，测量误差是0.1K。一个随机数发生器用于产生高斯噪声，这种噪声的标准偏差是0.1 K。这种噪声添加到模拟的AMSR的$T_{B}$中。在模拟过程中，我们还要把模拟错误加到$T_{B}’s$中。模拟错误解释模拟条件和自然条件之间的不同。这是一个很难确定的参数，因为它包含的物理过程在当前的模型中不能被很充分的理解。对于现在来说，我们不能在模拟模型中包含任何建模误差，但是我们会在将来研究这个问题。<br>&emsp;&emsp;对于已经添加噪音的模拟$T_{B}’s$来说，应用标准的多元线性回归技术可以得出系数$C_{ij}$。这个系数的发现将$P_{j}$ 和实际值的均方根差值在指定的环境场景中减小到了最小值。对于最初的模拟模型的设置，我们应用10个低频通道（即6.9，10.7，18.7，23.8和36.5GHz，双极化），然后我们将通过使用更少的通道来研究其效用。</p>
</li>
<li><p>非线性迭代算法</p>
</li>
</ol>
<p>&emsp;&emsp;在一般情况下，使用这种方法（非线性迭代算法）并不能保证找到一个合适的解决方案。而且，如果找到了解决方案，也不能保证它是以个独特的解决方案。然而对于AMSR来说，在冷水中，除了36.5GHz通道外在其他通道，∂TB/∂P &gt; 0，$P$和$T_{B}$之间的关系为准线性关系，在36.5GHz通道，$∂T_{B}/∂T_{S} &lt; 0$。经验表明，几乎总能找到一个解决方案。这似乎也表明该解决方案是独一无二的，但是需要验证。</p>
<p>&emsp;&emsp;我们一直假设$T_{B}$与$P$的关系，可以完全由非线性函数模型F来描述。这种情况下，非线性迭代算法对于找到确切的解决方案有独特的优势。相比之下，由线性回归算法得到的$P$将在一定程度上由于非线性而错误。然而，在实践中不可能依照模型函数$F(P)$完全代表$T_{B}$与$P$的关系。例如，$T_{B}$不仅取决于柱状水蒸气含量，还取决于水蒸气的垂直分布。因此，从辐射传输积分方程推导模型函数$F(P)$时，需要作出一些近似。这些假设在第二节进行了讨论。在线性回归算法的推导中，应用了完整的辐射传输积分公式，而且简化假设没有用。比较这两种算法，在由线性回归算法中用非线性关系引起的错误和由非线性迭代算法简化假设引起的错误中存在一个权衡。我们的计划是平行的开发和测试两种算法，比较它们的相对性能，然后选择一个。</p>
<h1 id="IDL读取TRMM-TMI全球SST程序"><a href="#IDL读取TRMM-TMI全球SST程序" class="headerlink" title="IDL读取TRMM/TMI全球SST程序"></a>IDL读取TRMM/TMI全球SST程序</h1><h2 id="IDL介绍"><a href="#IDL介绍" class="headerlink" title="IDL介绍"></a>IDL介绍</h2><p>&emsp;&emsp;IDL（Interactive Data Language）交互式数据语言是进行二维及多维数据可视化分析及应用开发的理想软件工具。作为面向矩阵、语法简单的第四代可视化语言，IDL致力于科学数据的可视化和分析。<br>&emsp;&emsp;IDL在海洋领域具有广泛的应用，在各种海洋数据的可视化及与时间、空间相关的分析，对风、流、浪、温度以及水、粒子流等数据的生物学和化学参数的时间序列，不同格式的数据的读取，不同的机器和操作系统的兼容都有很强的优势。<br><img src="http://source.jiangyayu.cn/IDL-SST/11.png"></p>
<h2 id="用到主要的IDL过程及函数命令"><a href="#用到主要的IDL过程及函数命令" class="headerlink" title="用到主要的IDL过程及函数命令"></a>用到主要的IDL过程及函数命令</h2><p><code>Openr</code>, <code>readu</code>, <code>congrid</code>, <code>contour</code>, <code>xrange</code>, <code>xstyle</code>, <code>xticks</code>, <code>xtickv</code>,<code>xtickname</code>, <code>tvscl</code>, <code>tv</code>, <code>tvrd()</code>, <code>write\_png</code>。</p>
<h2 id="实验数据："><a href="#实验数据：" class="headerlink" title="实验数据："></a>实验数据：</h2><p> <a href="http://source.jiangyayu.cn/IDL-SST/TMI_2012.zip" target="_blank" rel="external">TMI_2012.zip</a></p>
<h2 id="编写的主程序"><a href="#编写的主程序" class="headerlink" title="编写的主程序"></a>编写的主程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">pro TMI\_SST</div><div class="line"></div><div class="line">;打开文件</div><div class="line">filename=dialog\_pickfile()</div><div class="line"></div><div class="line">;判断文件是否存在并读取数据</div><div class="line">binarydata= bytarr(1440,320,6)</div><div class="line">exist=findfile(filename,COUNT=cnt)</div><div class="line">if (cnt eq 1) then begin</div><div class="line">    close,2</div><div class="line">  openr,2,filename, error=err</div><div class="line">  if (err gt 0) then begin</div><div class="line">    print, &apos;ERROR OPENING FILE:&apos;, filename</div><div class="line">  endif else begin</div><div class="line">    readu,2,binarydata</div><div class="line">    close,2</div><div class="line">  endelse</div><div class="line">endif</div><div class="line"></div><div class="line">;提取反演SST所用数据</div><div class="line">data = binarydata[*,*,0]</div><div class="line">data = reform(data)</div><div class="line">data = float(data)</div><div class="line">;将有效值转换成SST</div><div class="line">valid = where(data le 250)</div><div class="line">data(valid) = data(valid)*0.15 - 3</div><div class="line">;给无效值重新赋值</div><div class="line">invalid=where(data gt 250)</div><div class="line">data[invalid] = 0</div><div class="line"></div><div class="line">;创建窗口</div><div class="line">device,decompose=0</div><div class="line">window,/free,xsize=1540,ysize=520,title =&apos;TMI inversion SST image&apos;</div><div class="line">;填充背景色</div><div class="line">tvlct,200,200,200,1</div><div class="line">erase,color=1</div><div class="line">;绘制地图</div><div class="line">loadct,39</div><div class="line">tvscl,data,50,120</div><div class="line">;添加坐标</div><div class="line">map\_set,0,0,/MERCATOR ,position=[50/1540.0,120/520.0,1490/1540.0,440/520.0] $</div><div class="line">,limit=[-40,-180,40,180],/advance,/noerase,title=&apos;Sea Surface Temperature (degree C)&apos;,charsize=2</div><div class="line">map\_grid,/box,latdel=20,londel=25,charsize=0.75,color=1</div><div class="line">;添加色标条</div><div class="line">colorbar=bindgen(255)#replicate(1b,20)</div><div class="line">colorbar=congrid(colorbar,1200,35)</div><div class="line">tv,colorbar,170,40</div><div class="line">;绘制colorbar的刻度值</div><div class="line">plot,indgen(20),/nodata,position=[170/1540.0,40/520.0,1369/1540.0,75/520.0],$</div><div class="line">title=&apos;the world average sea surface temperature &apos;,xstyle=1,xticks=5,$</div><div class="line">xtickv=indgen(6)*7.5-3,xticklen=0.2,ystyle=4,color=1,xminor=10,/noerase</div><div class="line"></div><div class="line">;输出图像</div><div class="line">image=tvrd(true=1)</div><div class="line">fileout=DIALOG\_WRITE\_IMAGE(image,FILENAME=&apos;myimage.png&apos;)</div><div class="line"></div><div class="line">END</div></pre></td></tr></table></figure>
<h1 id="TMI反演SST结果"><a href="#TMI反演SST结果" class="headerlink" title="TMI反演SST结果"></a>TMI反演SST结果</h1><p>TMI反演2012年全球SST12个月的结果：<br><img src="http://source.jiangyayu.cn/IDL-SST/12.png" alt="TMI反演全球SST（2012.1）"><br><img src="http://source.jiangyayu.cn/IDL-SST/13.png" alt="TMI反演全球SST（2012.2）"><br><img src="http://source.jiangyayu.cn/IDL-SST/14.png" alt="TMI反演全球SST（2012.3）"><br><img src="http://source.jiangyayu.cn/IDL-SST/15.png" alt="TMI反演全球SST（2012.4）"><br><img src="http://source.jiangyayu.cn/IDL-SST/16.png" alt="TMI反演全球SST（2012.5）"><br><img src="http://source.jiangyayu.cn/IDL-SST/17.png" alt="TMI反演全球SST（2012.6）"><br><img src="http://source.jiangyayu.cn/IDL-SST/18.png" alt="TMI反演全球SST（2012.7）"><br><img src="http://source.jiangyayu.cn/IDL-SST/19.png" alt="TMI反演全球SST（2012.8）"><br><img src="http://source.jiangyayu.cn/IDL-SST/20.png" alt="TMI反演全球SST（2012.9）"><br><img src="http://source.jiangyayu.cn/IDL-SST/21.png" alt="TMI反演全球SST（2012.10）"><br><img src="http://source.jiangyayu.cn/IDL-SST/22.png" alt="TMI反演全球SST（2012.11）"><br><img src="http://source.jiangyayu.cn/IDL-SST/23.png" alt="TMI反演全球SST（2012.12）"></p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>合成效果图：<br><img src="http://source.jiangyayu.cn/IDL-SST/hecheng.gif" alt="合成图"><br>从反演结果来看，可以得出以下结论：</p>
<ol>
<li>全球的海表温度分布特点是赤道地区温度最高，随着纬度的升高而降低。且海表温度分布情况随季节变化明显，夏季高温区域像北偏移，冬季南移。春秋季节分布较均匀。这是由于海表面接收到的太阳辐射量沿纬向分布和季节变化造成的。</li>
<li>由于受加利福利亚寒流和秘鲁寒流的影响，在北美洲西南部海域和南美洲西部海域出现了相比同纬度海表温度较低的现象。</li>
<li>受到海表面风、海水深度、大陆的影响，部分海表的温度也受到影响，如内陆海，浅水地区的SST容易受外界影响，变化较快。<br>海洋是气候系统中的重要组成部分，因其面积广、水量大、热容量大，所以海水温度变化比陆地温度的变化小得多。这就使海洋上空的气温比陆地上空的气温变化慢，因此海水对大气温度起着调节作用。反演SST对于了解全球气候变化有着重要的意义。随着近些年来全球气候不断变暖，监测全球SST就变得尤为重要。</li>
</ol>
<p>&emsp;&emsp;以往海洋观测主要来自于船舶观测、浮标观测、海岸水文站观测等，这些资料都受到了时间和空间的限制，尤其对广袤的海洋来说，这些有限的资料更本无法满足海洋模式对其的需要。20世纪60年代以来，由于空间科学技术的蓬勃发展，遥感技术飞跃到了一个崭新的阶段，从而引起了海洋信息提取和海洋科学研究一次革命性的变化，为海洋观测开启了新的研究领域。卫星遥感观测资料具有覆盖全球、连续、实时的特点，利用卫星遥感获取还表面温度信息可以得到大面积的同步数据。同时卫星监测还能长时间的连续观测，获取多年资料，这有利于对海洋现象总结，发现海洋中长周期的缓慢变化规律。</p>
<p>&emsp;&emsp;面对全球变暖现象，利用卫星遥感长期观测，可以发现全球气温多年的微变化，为研究全球气候提供重要数据。同时利用卫星遥感反演SST可以实时监测海表温度，及时预报厄尔尼诺现象、拉尼娜现象等海洋异常现象。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;实验目的：&quot;&gt;&lt;a href=&quot;#实验目的：&quot; class=&quot;headerlink&quot; title=&quot;实验目的：&quot;&gt;&lt;/a&gt;实验目的：&lt;/h1&gt;&lt;p&gt;&amp;emsp;&amp;emsp;理论与实验课的综合运用，提高课堂与实践相结合的分析能力&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;了解海洋卫星反演SST的物理原理以及两种类型（热红外与微波辐射计）的卫星传感器；&lt;/li&gt;
&lt;li&gt;熟悉TRMM/TMI；&lt;/li&gt;
&lt;li&gt;掌握TMI反演SST的算法；&lt;/li&gt;
&lt;li&gt;进一步熟悉IDL编程语言；&lt;/li&gt;
&lt;li&gt;了解TMI的数据结构以及数据的输入与输出；&lt;/li&gt;
&lt;li&gt;学会数据的图形显示，创建图形输出；&lt;/li&gt;
&lt;li&gt;掌握数据的图象显示；&lt;/li&gt;
&lt;li&gt;熟悉SST数据的读取，显示，输出，并注意colorbar的显示；&lt;/li&gt;
&lt;li&gt;了解SST对全球气候的影响以及重要意义，着重说明SST全球分布的特点。
    
    </summary>
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/categories/RS/"/>
    
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/tags/RS/"/>
    
      <category term="IDL" scheme="https://blog.jiangyayu.cn/tags/IDL/"/>
    
      <category term="海表温度" scheme="https://blog.jiangyayu.cn/tags/%E6%B5%B7%E8%A1%A8%E6%B8%A9%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>数字图像处理综合实验</title>
    <link href="https://blog.jiangyayu.cn//archives/Digital-Image-Processing.html"/>
    <id>https://blog.jiangyayu.cn//archives/Digital-Image-Processing.html</id>
    <published>2013-05-22T07:27:10.000Z</published>
    <updated>2017-03-02T14:50:17.752Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实验目的："><a href="#实验目的：" class="headerlink" title="实验目的："></a>实验目的：</h1><ol>
<li>实验类型：综合性实验；             </li>
<li>了解图像技术软件如matlab，ERDAS的软硬件环境、数据采集；</li>
<li>初步掌握图像技术软件的基本操作技能；</li>
<li>能够熟练的操作matlab，ERDAS软件，并能应用该软件进行简单的图像处理;</li>
<li>掌握产品的输出设计。<a id="more"></a>
</li>
</ol>
<h1 id="实验主要仪器设备-软件等"><a href="#实验主要仪器设备-软件等" class="headerlink" title="实验主要仪器设备,软件等"></a>实验主要仪器设备,软件等</h1><ol>
<li>软件准备：matlab7.0，ERDASIMAGINE9.2;</li>
<li>硬件准备：PC机 512M内存，32M显卡（最低）;</li>
<li>资料准备：天津地区1999年，2005年的TM和分辨率为10米的SPOT影像图。</li>
</ol>
<h1 id="实验原理和内容："><a href="#实验原理和内容：" class="headerlink" title="实验原理和内容："></a>实验原理和内容：</h1><ol>
<li>实验题目：数字图像图像处理综合实验</li>
<li>具体要求：应用matlab软件或erdas软件对lena图像和1999，2005年天津地区遥感影像做增强处理；对增强后的地图进行岸线提取；对1999，2005年天津地区TM图像进行信息提取。</li>
<li>功能描述：窗口命令及功能介绍，数据的输入/输出，数据预处理，图像增强，监督分类（非监督分类），分类后处理，目视解译等功能。</li>
<li>实验原理：如图所示<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/1.png" alt="实验原理图" style="zoom:0.6"></li>
</ol>
<h1 id="实验步骤："><a href="#实验步骤：" class="headerlink" title="实验步骤："></a>实验步骤：</h1><h2 id="实验一-对lena图像进行平滑处理"><a href="#实验一-对lena图像进行平滑处理" class="headerlink" title="实验一 对lena图像进行平滑处理"></a>实验一 对lena图像进行平滑处理</h2><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-Image-Processing/2.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-Image-Processing/2.png" alt="lena"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-Image-Processing/3.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-Image-Processing/3.png" alt="加入椒盐噪声"></a></div></div></div></div>
<h3 id="平滑算子"><a href="#平滑算子" class="headerlink" title="平滑算子"></a>平滑算子</h3><ul>
<li>均值3*3算子</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/4.png" alt="均值3*3算子" style="zoom:0.6"></p>
<ul>
<li>均值5*5算子</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/5.png" alt="均值5*5算子" style="zoom:0.6"></p>
<ul>
<li>均值7*7算子</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/6.png" alt="均值7*7算子" style="zoom:0.6"></p>
<ul>
<li>均值9*9算子</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/7.png" alt="均值9*9算子" style="zoom:0.6"></p>
<h3 id="处理结果"><a href="#处理结果" class="headerlink" title="处理结果"></a>处理结果</h3><ul>
<li>均值滤波处理：</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/8.png" alt="均值滤波处理" style="zoom:0.6"></p>
<ul>
<li>中值滤波处理：</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/9.png" alt="中值滤波处理" style="zoom:0.6"></p>
<ul>
<li>理想低通滤波：</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/10.png" alt="理想低通滤波" style="zoom:0.6"></p>
<h3 id="评价结果"><a href="#评价结果" class="headerlink" title="评价结果"></a>评价结果</h3><p>&emsp;&emsp;均值滤波对于去除椒盐噪声有一定的作用，但是选择窗口尺寸的大小是很重要的环节。窗口小不能好滤除噪声，窗口过大又会造成图像模糊。相比较而言，中值滤波法能有效削弱椒盐噪声，且比均值、超限像素平均法更有效。这是中值滤波对于椒盐噪声这样的突出噪声的特有优势。<br>&emsp;&emsp;相对较上面两种空间域的图像增强处理，频域的平滑也有一定的作用，但是对滤波器的设计要求高，且处理后的图像比较模糊。</p>
<h2 id="实验二-海岸线提取"><a href="#实验二-海岸线提取" class="headerlink" title="实验二  海岸线提取"></a>实验二  海岸线提取</h2><h3 id="原图"><a href="#原图" class="headerlink" title="原图"></a>原图</h3><p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/yuantu.png" alt="原图" style="zoom:0.18"></p>
<h3 id="提取方法"><a href="#提取方法" class="headerlink" title="提取方法"></a>提取方法</h3><ol>
<li><p>使用空间滤波锐化增强方法，对TM卫星影像第四波段，通过阈值设置，得到二值图。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">%空域锐化滤波增强</span></div><div class="line">clear all; <span class="comment">% 清理命令窗口</span></div><div class="line">[I,map]=imread(<span class="string">'cameraman.tif'</span>); <span class="comment">% 读入图像</span></div><div class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>),imshow(I,map); <span class="comment">% 显示原始图像</span></div><div class="line">title(<span class="string">'original image'</span>) <span class="comment">% 设置图像标题</span></div><div class="line">I=double(I); <span class="comment">% 数据类型转换</span></div><div class="line">[IX,IY]=gradient(I); <span class="comment">% 梯度</span></div><div class="line">GM=<span class="built_in">sqrt</span>(IX.*IX+IY.*IY);</div><div class="line">OUT1=GM; <span class="comment">% 输出图像</span></div><div class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),imshow(OUT1,map); <span class="comment">% 直接梯度值输出</span></div><div class="line">title(<span class="string">'gradient value '</span>) <span class="comment">% 设置图像标题</span></div><div class="line">OUT2=I; <span class="comment">% 输出图像</span></div><div class="line">J=<span class="built_in">find</span>(GM&gt;=<span class="number">15</span>); <span class="comment">% 阈值处理</span></div><div class="line">OUT2(J)=GM(J); <span class="comment">% 输出图像</span></div><div class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>),imshow(OUT2,map); <span class="comment">% 显示处理后的图像</span></div><div class="line">title(<span class="string">'Thresholded Gradient'</span>) <span class="comment">% 加阈梯度值输出；</span></div><div class="line">OUT3=I; <span class="comment">% 输出图像</span></div><div class="line">J=<span class="built_in">find</span>(GM&gt;=<span class="number">20</span>); <span class="comment">% 阈值黑白化</span></div><div class="line">OUT3(J)=<span class="number">255</span>; <span class="comment">% 设置为白色</span></div><div class="line">Q=<span class="built_in">find</span>(GM&lt;<span class="number">20</span>); <span class="comment">% 阈值黑白化</span></div><div class="line">OUT3(Q)=<span class="number">0</span>; <span class="comment">% 设置为黑色</span></div><div class="line">subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>),imshow(OUT3,map); <span class="comment">% 二值图像</span></div><div class="line">title(<span class="string">'Two values'</span>); <span class="comment">% 设置图像标题</span></div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/11.png" alt="二值化" style="zoom:0.18"></p>
</li>
<li><p>对二值图进行边界提取</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">F=imread(<span class="string">'Two values.tif'</span>);</div><div class="line">F1=im2bw(F); F2=bwfill(F1,<span class="string">'holes'</span>);</div><div class="line">SE=<span class="built_in">ones</span>(<span class="number">3</span>);</div><div class="line">F3=imdilate(F2,SE);</div><div class="line">F4=bwperim(F2);</div><div class="line">figure,imshow(F4);</div><div class="line">imwrite(F4,<span class="string">'bianjie.tif'</span>)</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/12.png" alt="提取边界线" style="zoom:0.5"></p>
</li>
<li><p>在Photoshop对边界提取中产生的噪点和一些毛刺进行修正</p>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/13.png" alt="剔除毛刺" style="zoom:0.5"></p>
</li>
<li><p>用matlab对边界进行扩充</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">I = imread(<span class="string">'bianjie.tif'</span>);</div><div class="line">se = strel( <span class="string">'diamond'</span>,<span class="number">3</span>);</div><div class="line">a = imdilate(I,se);</div><div class="line">imshow(a);</div><div class="line">imwrite(a,<span class="string">'bianjie.tif'</span>);</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/14.png" alt="扩充边界" style="zoom:0.5"></p>
</li>
<li><p>在原图上显示边界</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">I = imread(<span class="string">'bianjie.tif'</span>);</div><div class="line">f = imread(<span class="string">'subset1.tif'</span>);</div><div class="line">f(<span class="built_in">find</span>(I == <span class="number">1</span>)) = <span class="number">255</span>;</div><div class="line">imshow(f);</div><div class="line">imwrite(f,<span class="string">'xiaoguo.tif'</span>);</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/15.png" alt="叠加显示" style="zoom:0.18"></p>
</li>
<li><p>结果分析<br>分析：图像海路交界地带，由于介于陆地和海水的光谱特性之间，在进行空间锐化增强时候做出的二值图分界不是很明确，在进行边缘提取的时候也就出现了很多不必要的线条和毛刺。虽然通过Photoshop修正了这些错误，但是还是会有小的瑕疵难以去除，而且整个过程显得不够智能化。</p>
</li>
</ol>
<h2 id="实验三-信息提取综合实验"><a href="#实验三-信息提取综合实验" class="headerlink" title="实验三  信息提取综合实验"></a>实验三  信息提取综合实验</h2><h3 id="几何校正"><a href="#几何校正" class="headerlink" title="几何校正"></a>几何校正</h3><p>&emsp;&emsp;本实验中，利用已有坐标信息的tm影像对spot影像选取控制点，采用二次线性卷积算法进行几何校正，具体步骤为：</p>
<ol>
<li>分别在两个View中打开spot影像和tm影像<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/17.png"></li>
<li>在spot影像窗口的菜单中打开Raster-&gt;Geometric Correction打开Set Geometric Model模块（step1）</li>
<li>然后选择Polynomial，点击OK在弹出的Polynomial Model Properties（step2）中设置Polynomial Order中选择2，点击Apply，然后关闭。</li>
<li>随后在弹出的GCP Tool Reference Setup（step3）中选择Existing Viewer.点击OK后出现Viewer Selection Instructions。<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/18.png"></li>
<li>此时用鼠标点击tm影像所在窗口。此时会出现选取控制点的窗口。<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/19.png"></li>
<li>选取控制点，在spot影像中选取一些标志性地物作为控制点，同时在tm影像中找到相同地物，这样的一对点作为一组控制点。</li>
<li>选取至少8个点作为控制点，并且使所选取的点尽量均匀分布在图像上，并要求最终的误差聚在1以内！<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/20.png"></li>
<li>选取好控制点之后，点击几何校正图标，在弹出的Resample窗口中设这各项参数如图所示，点击输出矫正后的影像。<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/20.1.png" style="zoom:0.7"></li>
</ol>
<h3 id="数据融合和图像增强"><a href="#数据融合和图像增强" class="headerlink" title="数据融合和图像增强"></a>数据融合和图像增强</h3><ol>
<li>在Erdas主菜单下，依次打开Interpreter-&gt;Spatial Enhancement -&gt;Resolution Merge在打开的Resolution Merge中设置如下：<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/21.png"><br>点击OK输出影像。</li>
<li>打开融合后的影像，在影像窗口菜单下选择，Raster-&gt;Contrast-&gt;Standard Deviation Stretch进行拉伸。</li>
</ol>
<h3 id="监督分类"><a href="#监督分类" class="headerlink" title="监督分类"></a>监督分类</h3><ol>
<li>选取感兴趣区，并保存。<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/22.png"></li>
<li>在Erdas主菜单下依次打开classifier-&gt;supervised classification打开监督分类的窗口，设置如下：<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/23.png" style="zoom:0.7"></li>
<li>结果：<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/24.png" style="zoom:0.7"></li>
</ol>
<h3 id="分类后处理"><a href="#分类后处理" class="headerlink" title="分类后处理"></a>分类后处理</h3><ol>
<li>Clump<br>Interpreter-&gt;GIS Analysis-&gt;Clump<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/25.png" style="zoom:0.7"></li>
<li>Interpreter-&gt;GIS Analysis-&gt;Eliminate<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/26.png"><br>Eliminate的结果：<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/27.png" style="zoom:0.7"></li>
<li>Interpreter-&gt;GIS Analysis-&gt;Recode<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/28.png"><br>并对结果重新设置颜色：<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/29.png" style="zoom:0.7"></li>
</ol>
<h3 id="目视解译"><a href="#目视解译" class="headerlink" title="目视解译"></a>目视解译</h3><p><img src="http://source.jiangyayu.cn/Digital-Image-Processing/30.png"><br>&emsp;&emsp;将原图像的432波段合成的假彩色图像打开，让分类后的图像与之对比，进行修正。假彩色合成的图像中：水体呈蓝色，植被呈红色，建筑物则比较亮。</p>
<h3 id="图像输出"><a href="#图像输出" class="headerlink" title="图像输出"></a>图像输出</h3><ol>
<li>在ArcGIS中打开图像，右击图层打开属性表，然后选中其中一种地物，利用ToolBox中Conversion-&gt;From Raster-&gt;Raster to Polygon，将其转换成矢量图层。<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/31.png"><br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/32.png"></li>
<li>制版输出，添加比例尺图例等<br><img src="http://source.jiangyayu.cn/Digital-Image-Processing/33.png" style="zoom:0.6"></li>
</ol>
<h3 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h3><p>对building图层添加Area字段，统计城镇覆盖率<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-Image-Processing/34.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-Image-Processing/34.png" style="zoom:0.5"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-Image-Processing/35.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-Image-Processing/35.png"></a></div></div></div></div></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;实验目的：&quot;&gt;&lt;a href=&quot;#实验目的：&quot; class=&quot;headerlink&quot; title=&quot;实验目的：&quot;&gt;&lt;/a&gt;实验目的：&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;实验类型：综合性实验；             &lt;/li&gt;
&lt;li&gt;了解图像技术软件如matlab，ERDAS的软硬件环境、数据采集；&lt;/li&gt;
&lt;li&gt;初步掌握图像技术软件的基本操作技能；&lt;/li&gt;
&lt;li&gt;能够熟练的操作matlab，ERDAS软件，并能应用该软件进行简单的图像处理;&lt;/li&gt;
&lt;li&gt;掌握产品的输出设计。
    
    </summary>
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/categories/RS/"/>
    
    
      <category term="图像处理" scheme="https://blog.jiangyayu.cn/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="Erdas" scheme="https://blog.jiangyayu.cn/tags/Erdas/"/>
    
  </entry>
  
  <entry>
    <title>高级高光谱遥感应用</title>
    <link href="https://blog.jiangyayu.cn//archives/Hyperspectral-RS-image-Processing.html"/>
    <id>https://blog.jiangyayu.cn//archives/Hyperspectral-RS-image-Processing.html</id>
    <published>2013-01-04T08:04:22.000Z</published>
    <updated>2017-03-02T14:49:58.366Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实习目的："><a href="#实习目的：" class="headerlink" title="实习目的："></a>实习目的：</h1><ol>
<li>理解高光谱概念、地物光谱仪、光谱数据库、高光谱传感器；</li>
<li>掌握ENVI软件的基本功能；</li>
<li>熟悉ENVI遥感影像处理的一般方法；</li>
<li>进一步掌握高级高光谱分析及制图方法；</li>
<li>理解MNF理论及算法，线性混合波谱理论；</li>
<li>总结获取高光谱端元的方法。<a id="more"></a>
</li>
</ol>
<h1 id="实习主要仪器设备，软件及数据："><a href="#实习主要仪器设备，软件及数据：" class="headerlink" title="实习主要仪器设备，软件及数据："></a>实习主要仪器设备，软件及数据：</h1><ol>
<li>硬件准备：PC机；</li>
<li>操作系统：Linux系统或Windows 2k以上系统；</li>
<li>软件工具：ENVI</li>
<li>数据：美国California州AVIRIS影像数据，及USGS植被及矿物的光谱库数据:CD1/m94avsub；CD1/spec_lib；CD2/C95avsub；CD2/ spec_lib。<br><strong>数据下载</strong>：链接：<a href="http://pan.baidu.com/s/1nuTF6WT" target="_blank" rel="external">http://pan.baidu.com/s/1nuTF6WT</a> 密码：xljz</li>
</ol>
<h1 id="AVIRIS及测谱学（Imaging-Spectroscopy）介绍"><a href="#AVIRIS及测谱学（Imaging-Spectroscopy）介绍" class="headerlink" title="AVIRIS及测谱学（Imaging Spectroscopy）介绍"></a>AVIRIS及测谱学（Imaging Spectroscopy）介绍</h1><h2 id="测谱学介绍"><a href="#测谱学介绍" class="headerlink" title="测谱学介绍"></a>测谱学介绍</h2><p> &emsp;&emsp;光谱技术是被用于实验室中物理，化学和生物学等领域的研究材料性能，基于电磁辐射与物质的相互作用。在太阳能反射光谱成像光谱仪被设想为同样的目标，但是从地球上寻找和地区视角（下图所示）。陆地、水体和大气中的分子和微粒与太阳辐射在400±2500nm光谱区域，通过吸收，反射和散射过程相互作用。成像分光计在太阳反射光谱特性中被用于测量光谱图像在某些或全部的光谱。这些光谱测量是用来确定组成成分通过物理和化学的科学研究和应用光谱阳离子的区域范围内的图像。<br> <img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/1.png" alt="不同地物的光谱特性" style="zoom:0.8"></p>
<h2 id="AVIRIS介绍"><a href="#AVIRIS介绍" class="headerlink" title="AVIRIS介绍"></a>AVIRIS介绍</h2><p> &emsp;&emsp;AVIRIS首先测量光谱图像于1987年也是第一个从400纳米到2500纳米测量太阳反射光谱的成像光谱仪(Figure 2)。AVIRIS在224个连续光谱通道以间隔为10 nm测量上升辐亮度。这些辐射光谱测量的影像宽度为11公里和长度800公里及20米的空间分辨率。美国航天局的ER-2飞机从2万米的高空获得Q-bay的AVIRIS光谱图像。AVIRIS的光谱，辐射和空间校准取决于实验室和监测每年飞行探测。已经获得超过4 TB的AVIRIS数据，请求数据已经被校准和分发给调查人员从最初的飞行测量。<br> &emsp;&emsp;自1987年以来，AVIRIS测得的光谱图像每年为科学研究和应用提供了帮助。250余篇论文和摘要已经被写入AVIRIS的研讨会(Vane, 1988, Green, 1990a; 1991; 1992; 1993; 1995; 1996a)。本次研讨会的文件和其他资料维护的AVIRIS的网站(<a href="http://makalu.jpl.nasa.gov/AVIRIS.html" target="_blank" rel="external">http://makalu.jpl.nasa.gov/AVIRIS.html</a>)。在过去的10年里,已经有相当数量的报纸写AVIRIS其他研讨会、座谈会、研讨会。先前与AVIRIS相关的专业期刊已经出版(Vane，1993)。整个遥感学领域还有其他与AVIRIS相关文章和论文。<br> &emsp;&emsp;研究者对AVIRIS系统不断努力升级和改进以满足用AVIRIS光谱图像对科学研究和应用的要求。这些改进还针对AVIRIS传感器，校准，数据系统和飞行操作。传感器的同时，科学研究和应用与AVIRIS寻求多样化和发展。<br> <img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/2.png" alt="figure2" style="zoom:0.8"></p>
<h2 id="常用的高光谱传感器"><a href="#常用的高光谱传感器" class="headerlink" title="常用的高光谱传感器"></a>常用的高光谱传感器</h2><h3 id="Hyperion传感器"><a href="#Hyperion传感器" class="headerlink" title="Hyperion传感器"></a>Hyperion传感器</h3><p> &emsp;Hyperion传感器搭载于EO-1卫星平台，是第一台星载高光谱图谱测量仪，也是目前唯一在轨的星载高光谱成像光谱仪和唯一可公开获得的高光谱测量仪，意义重大。Hyperion采用谱像合一技术，合计有242个波段，覆盖了350-2600nm的波段范围，波段间隔10nm左右，空间分辨率为30m，1-7波段和57-77波段没有进行仪器辐射校正，实际定标范围覆盖了426.82-2395.5nm的198个波段。Hyperion的高光谱特性可以实现精确的估计农业产量、地质填图、精确制图，在采矿、地质、森林、农业以及环境保护领域有着广泛的应用前景。</p>
<h3 id="CASI"><a href="#CASI" class="headerlink" title="CASI"></a>CASI</h3><p> &emsp;&emsp;小型机载成像光谱仪（CASI)是一款加拿大研制的机载商用成像光谱仪， 1990年起开始投入运行，在430~870nm范围内拥有多达288个波段，波段宽度仅为1.8nm。CASI轻型多光谱推扫式成像系统适用于航空遥感和实 验室实验。<br> &emsp;&emsp;CASI可用两种工作方式成像：多光谱方式和高光谱方式。当以多光谱方式 工作时，可产生多达19个非重叠的波段和最多每行512个像元，而且其波段中 心位置和波段宽度都可通过编程方式来控制。当CASI以高光谱方式工作时，可 拥有高达288个波段覆盖可见光至近红外区域。表1列举了 CASI仪器的主要 技术参数，其最新版本提供了一种结合多光谱和高光谱两种工作方式长处的“增 强型光谱工作方式”，具有很强的应用前景。<br> <img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/table.png" alt="表格"></p>
<h1 id="便携式地物光谱仪ASD、USGS波谱库介绍"><a href="#便携式地物光谱仪ASD、USGS波谱库介绍" class="headerlink" title="便携式地物光谱仪ASD、USGS波谱库介绍"></a>便携式地物光谱仪ASD、USGS波谱库介绍</h1><h2 id="便携式地物光谱仪ASD"><a href="#便携式地物光谱仪ASD" class="headerlink" title="便携式地物光谱仪ASD"></a>便携式地物光谱仪ASD</h2><p> &emsp;&emsp;ASD便携式地物光谱仪：测量地表沉积物、土壤、植物、水体和人工目标在400-2500 nm波段范围的反射率和透过率，利用探测到的地物吸收特征对目标进行成分识别，并定量化地物的化学组分。测量太阳辐照度，用于研究大气组分。</p>
<h2 id="USGS波谱库"><a href="#USGS波谱库" class="headerlink" title="USGS波谱库"></a>USGS波谱库</h2><p> &emsp;&emsp;USGS全称即United States Geological Surve（网站:<a href="http://speclab.cr.usgs.gov/spectral-lib.html" target="_blank" rel="external">http://speclab.cr.usgs.gov/spectral-lib.html</a> ），美国地质勘探局。USGS波谱库是美国地质勘探局光谱实验室的研究人员在实验室中测得了数百种物质的光谱反射率之后编制了的一个谱库。该库被用来作为物质遥感图像识别的参考。</p>
 <div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/3.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/3.png" alt="地物波谱"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/4.png" alt="地物波谱"></a></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/5.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/5.png" alt="地物波谱"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/6.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/6.png" alt="地物波谱"></a></div></div></div></div>
<p> <strong>光谱特征：</strong><br> <strong>中长石</strong>： 在0.5μm到2.8μm之间反射率均比较大，而在这段波段以外则吸收较为明显。<br> <strong>三色紫罗兰：</strong>在0.5μm附近有反射峰，在0.7μm附近也有反射峰，虽然在1.3μm以后的反射率还有波动，但是都是有明显的下降趋势。<br> <strong>沿岸水：</strong>总体的反射率低，仅有0.1，红黄区（0.55~0.76μm）有明显的反射峰，是由于近岸受河流带来的陆源物质影响，在近红外（0.76微米附近）出现一个小的反射峰，是由于近岸的叶绿素浓度较高造成的。<br> <strong>大洋水：</strong>总体的反射率低，仅有0.1，在蓝绿光（0.4μm附近）有反射峰，说明水质清澈。</p>
<h1 id="基于几何顶点端元提取的SAM分类"><a href="#基于几何顶点端元提取的SAM分类" class="headerlink" title="基于几何顶点端元提取的SAM分类"></a>基于几何顶点端元提取的SAM分类</h1><p> 根据cup95eff.int数据，运用MNF变换后的波段以及散点图工具提取端元。</p>
<h2 id="加载数据"><a href="#加载数据" class="headerlink" title="加载数据"></a>加载数据</h2><p> 加载实验数据cup95eff.int。</p>
<h2 id="获得MNF变换数据。"><a href="#获得MNF变换数据。" class="headerlink" title="获得MNF变换数据。"></a>获得MNF变换数据。</h2><p> 通过cup95eff.int获得练习MNF变换数据。</p>
<ol>
<li><p>在ENVI主菜单下选择Spectral→MNF Rotation→Forward MNF→Estimate Noise Statistics from Data。</p>
<p><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/7.png"></p>
</li>
<li><p>在打开的MNF Transform Input File对话框中选择输入数据cup95eff.int，点击OK。</p>
</li>
<li><p>为输出数据选择路径和名称，点击OK进行MNF变换，生成My_MNF。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/8.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/8.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/9.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/9.png"></a></div></div></div></div>
</li>
</ol>
<h2 id="加载My-MNF散点图"><a href="#加载My-MNF散点图" class="headerlink" title="加载My_MNF散点图"></a>加载My_MNF散点图</h2><p> 加载My_MNF散点图。在影像主窗口菜单下选择Tools→2D Scatter Plot。在Scatter Plot Band Choice窗口中分别选择波段1和波段2，打开散点图。</p>
 <div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/10.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/10.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/11.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/11.png"></a></div></div></div></div>
<h2 id="获取端元。"><a href="#获取端元。" class="headerlink" title="获取端元。"></a>获取端元。</h2><ol>
<li>在散点图绘制窗口，使用感兴趣区（ROIs）绘制工具，在数据分布集群的一个或者多个拐角上，圈出一些像素点。这些像素点将作为带颜色的像素，映射到影像相应的位置上。</li>
<li>在散点图绘制窗口中，从Class下拉式菜单中选择所需的颜色，对几种不同的类，分别使用不同的颜色。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/12.png"></li>
<li>使用影像和散点图中的跳跃像素（dancing pixels）功能（双击并拖曳鼠标中键），来帮助鉴别独特的区域。</li>
<li><p>从散点图绘制窗口的下拉式菜单中，选择 Options → Export All in the Options，将这些像素列表将被导出作为ENVI 的感兴趣区（ROIs）。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/13.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/13.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/14.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/14.png"></a></div></div></div></div>
</li>
<li><p>在主影像显示窗口菜单栏中，选择 Overlay → Region of Interest，将感兴趣区加载到显示表观反射率的那个显示窗口中。</p>
</li>
<li><p>在2-D散点图窗口中选择Options → Z-Profile ，在文件列表中选择反射数cup95eff.int，随即显示一个空白波段图。在2-D散点图窗口中点击鼠标右键，在空白的2-D散点图窗口中就会出现当前的像素剖面图及其坐标值，将差别显著的点删去（用白色画样本区即可删除）。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/15.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/15.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/16.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/16.png"></a></div></div></div></div>
</li>
<li><p>使用散点图对话框中Options 下拉式菜单中的Mean All 菜单项，提取感兴趣区中的均值表观反射率波谱曲线。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/17.png" style="zoom:0.7"></p>
<h2 id="进行光谱匹配获取种类"><a href="#进行光谱匹配获取种类" class="headerlink" title="进行光谱匹配获取种类"></a>进行光谱匹配获取种类</h2><p><br>&emsp;&emsp;在ENVI主菜单下选择：Spectral→ Spectral Analyst，在弹出的窗口中选择波谱库，在此我们选择USGS（美国地质调查局）波谱库，点击OK，在弹出的“Edit Identify Methods Weighting”窗口中设定计算参数后点击OK，随即弹出波谱分析窗口，点击Apply，在弹出的输入波段列表中选择我们要鉴别的波谱。 选择一个待鉴别的波谱后波谱分析窗口中就会显示这一波谱与波谱库中的波谱匹配分析的结果，如下图：</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/18.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/18.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/19.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/19.png"></a></div></div></div></div>
</li>
</ol>
<h2 id="其他波段的分析"><a href="#其他波段的分析" class="headerlink" title="其他波段的分析"></a>其他波段的分析</h2><p> 用同样的方法对其他几个波段进行匹配分析，确定其特征，并更改名称。</p>
<h2 id="进行SAM分类"><a href="#进行SAM分类" class="headerlink" title="进行SAM分类"></a>进行SAM分类</h2><ol>
<li>从ENVI 主菜单, 选择Classification → Supervised → Spectral Angle Mapper</li>
<li><p>在打开的Endmember Collection：SAM对话框中，选择Import →form plot windows，选择上一步骤中已经识别的几个矿物的波谱曲线。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/20.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/20.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/21.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/21.png"></a></div></div></div></div>
</li>
<li><p>设置相应的参数，点击OK，生成分类的SAM文件和Rule文件</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/22.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/22.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/23.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/23.png"></a></div></div></div></div>
</li>
</ol>
<p> <br>&emsp;&emsp;用二维散点图提取端元的时候，通过圈取散点图的拐点处来选取感兴趣区能够很好地选取端元。通过散点图和影像的对应关系可以不断进行修改。但是在圈取的时候存在一定的主观因素。</p>
<h1 id="基于PPI纯净象元端元提取的SAM分类"><a href="#基于PPI纯净象元端元提取的SAM分类" class="headerlink" title="基于PPI纯净象元端元提取的SAM分类"></a>基于PPI纯净象元端元提取的SAM分类</h1><p> <br>&emsp;&emsp;根据cup95eff.int数据，利用MNF变换后的波段以及纯净像元指数工具以及N维可视化仪提取端元。</p>
<h2 id="获取PPI。"><a href="#获取PPI。" class="headerlink" title="获取PPI。"></a>获取PPI。</h2><ol>
<li>在ENVI主菜单下选择：Pixel Purity Index → [FAST]New Output Band，选择My_MNF。在Spectral Subset中选择前5个波段，点击OK。</li>
<li><p>设置迭代次数和阈值，选择保存路径，如下图所示：</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/24.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/24.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/25.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/25.png"></a></div></div></div></div>
</li>
<li><p>点击OK，生成ppi。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/26.png"></p>
</li>
<li>打开新生成的PPI<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/27.png" style="zoom:0.7"></li>
<li><p>进行对比度拉伸，并与cup95ppi.dat进行比较。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/28.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/28.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/29.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/29.png"></a></div></div></div></div>
</li>
<li><p>选取不同组数的波段、迭代次数和阈值生成PPI，然后分别进行线性拉伸，分别与cup95ppi.dat进行比较，选取最为接近的一组。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/30.png"></p>
<h2 id="由PPI图像生成样本区。"><a href="#由PPI图像生成样本区。" class="headerlink" title="由PPI图像生成样本区。"></a>由PPI图像生成样本区。</h2></li>
<li><p>在ROIs Tool对话框中，在主菜单下选择Options →Band Threshold to ROI建立一个只包含拥有高PPI值像素的ROI。选择输入的PPI文件，在弹出的对话框中输入最小极限值。点击OK点击“OK”，即生成包含在迭代过程中300次以上作为极值的最纯像素的ROI，生成了红色的样本区。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/31.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/31.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/32.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/32.png"></a></div></div></div></div>
</li>
<li><p>在ENVI主菜单中选择Spectral → n-Dimensional Visualizer → Visualize with New Data，在弹出的对话框中选择前面处理好的MNF文件，选择其前十个波段进行观察。</p>
</li>
<li><p>点击ROI后将弹出可以选择1到10波段的N维控制对话框和N维散点图窗口。 选择前五个波段构成n-D散点图。并选择n-D控制对话框中的Options→Show Axes选项。随后在n-D控制窗口中点击Start进行旋转。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/33.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/33.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/34.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/34.png"></a></div></div></div></div>
</li>
<li><p>运用N维观察器进行动态旋转观察，当出现感兴趣的位置时停止旋转，选择一种颜色将点云的拐角处圈起来作为一个ROI，点击鼠标左键对ROI进行定义，点击右键完成ROI的建立。继续旋转，根据需要对类进行修改。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/35.png" style="zoom:0.7"></p>
</li>
</ol>
<h2 id="光谱匹配"><a href="#光谱匹配" class="headerlink" title="光谱匹配"></a>光谱匹配</h2><ol>
<li>在n-D Controls对话框中，选择Options→Mean All得到均值反射率曲线。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/36.png" style="zoom:0.7"></li>
<li>同七中所述，利用波谱分析工具确定地物类别。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/37.png"><br><strong>识别结果：</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">波谱</th>
<th style="text-align:center">地物</th>
<th style="text-align:center">波谱</th>
<th style="text-align:center">地物</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">n_D Class #1</td>
<td style="text-align:center">calcite</td>
<td style="text-align:center">n_D Class #4</td>
<td style="text-align:center">kaolini</td>
</tr>
<tr>
<td style="text-align:center">n_D Class #2</td>
<td style="text-align:center">hematit</td>
<td style="text-align:center">n_D Class #5</td>
<td style="text-align:center">budding</td>
</tr>
<tr>
<td style="text-align:center">n_D Class #3</td>
<td style="text-align:center">jarosit</td>
<td style="text-align:center">n_D Class #6</td>
<td style="text-align:center">alunite</td>
</tr>
</tbody>
</table>
<ol>
<li>在n-D控制窗口中选择Options→Class Controls 弹出n-D分类控制窗口，在该窗口中设置个各类的颜色。<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/38.png" style="zoom:0.7"></li>
</ol>
<h2 id="进行SAM分类-1"><a href="#进行SAM分类-1" class="headerlink" title="进行SAM分类"></a>进行SAM分类</h2><ol>
<li>从ENVI 主菜单, 选择Classification → Supervised → Spectral Angle Mapper</li>
<li><p>在打开的Endmember Collection：SAM对话框中，选择Import →form plot windows，选择n_D Class #1i~6<br><img src="http://source.jiangyayu.cn/Hyperspectral-RS-image-Processing/39.png"></p>
<p><br>&emsp;&emsp;用n维散点图进行端元提取的时候，先要进行PPI变换，提取其中的纯净象元，然后在用n维动态观察器进行动态观察，同样选取拐角处作为感兴趣区。对于高光谱遥感来说由于其数据特点，考虑到运用n-D散点图分析效果可能会更好。</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;实习目的：&quot;&gt;&lt;a href=&quot;#实习目的：&quot; class=&quot;headerlink&quot; title=&quot;实习目的：&quot;&gt;&lt;/a&gt;实习目的：&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;理解高光谱概念、地物光谱仪、光谱数据库、高光谱传感器；&lt;/li&gt;
&lt;li&gt;掌握ENVI软件的基本功能；&lt;/li&gt;
&lt;li&gt;熟悉ENVI遥感影像处理的一般方法；&lt;/li&gt;
&lt;li&gt;进一步掌握高级高光谱分析及制图方法；&lt;/li&gt;
&lt;li&gt;理解MNF理论及算法，线性混合波谱理论；&lt;/li&gt;
&lt;li&gt;总结获取高光谱端元的方法。
    
    </summary>
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/categories/RS/"/>
    
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/tags/RS/"/>
    
      <category term="高光谱" scheme="https://blog.jiangyayu.cn/tags/%E9%AB%98%E5%85%89%E8%B0%B1/"/>
    
  </entry>
  
  <entry>
    <title>AVIRIS卫星影像波谱与实验室波谱库波谱曲线的比较</title>
    <link href="https://blog.jiangyayu.cn//archives/AVIRIS.html"/>
    <id>https://blog.jiangyayu.cn//archives/AVIRIS.html</id>
    <published>2012-12-17T07:27:10.000Z</published>
    <updated>2017-03-02T14:50:39.225Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><ol>
<li>理解卫星及实验室高光谱概念，初步了解辐亮度、反射率的概念；</li>
<li>能够打开并处理卫星高光谱数据；</li>
<li>能够加载不同波谱库的反射率波谱曲线，并学会处理；</li>
<li>学会判读不同地物的光谱曲线特征，了解其与相应的卫星光谱的比较，并解释差异原因。<a id="more"></a>
<h1 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h1></li>
<li>打开AVIRIS影像光谱，确定点（448,505）、（502,589）、（531,541）以及（260,613）。要求：显示完整的曲线名称对照课本及影像，确定该区的主要岩性，并判读光谱曲线主要特征及其区别。</li>
<li>打开JPL1.sli光谱库，绘制alunite so-4a，buddingtonite felds ts-11a，calcite c-3d，kaolinite well ordered ps-1a。要求：显示完整的波谱曲线名称，确定横纵坐标，并判读光谱主要特征及区别。</li>
<li>打开usgs_min.sli光谱库。要求：在该波谱库中找出与JPL波谱库中对应的上述四种矿物波谱曲线最大相似度的四种矿物，并在同一个窗口中绘制其波谱廓线，显示完整的名称。</li>
<li>将calcite（明矾石）的AVIRIS卫星影像及JPL、USGS波谱库中的光谱曲线放在同一个窗口中显示，并进行光谱形状上的比较，简要说明其差别的原因。</li>
</ol>
<h1 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h1><h2 id="实验一："><a href="#实验一：" class="headerlink" title="实验一："></a>实验一：</h2><h3 id="实验步骤"><a href="#实验步骤" class="headerlink" title="实验步骤"></a>实验步骤</h3><ol>
<li>打开c95avsub文件夹中的cup95_rd.int文件，按顺序点击 Band 183、Band 193 和Band 207（波长分别为2.10、2.20 和2.35μm)，加载一幅彩色影像。</li>
<li>从主影像显示窗口菜单栏中，选择 Tools → Pixel Locator。在 Pixel Locator 对话框中输入像素的坐标定位到所指定的点。</li>
<li>选择 Tools → Profiles → Z-Profile (Spectrum)，来提取这个位置的辐亮度波谱曲线。</li>
<li>选择 Options → Collect Spectra。然后再在Pixel Locator 对话框中输入像素的坐标，按照实验要求依次提取以下位置的辐亮度波谱曲线。</li>
<li>选择 Options → Stack Plots，分别查看每一条波谱曲线。在绘图窗口中点击右键，并在弹出的快捷菜单中选择Plot Key 来显示波谱曲线的图例。<br><img src="http://source.jiangyayu.cn/AVIRIS/1.png" alt="波谱曲线"></li>
</ol>
<h3 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h3><ol>
<li>岩性分析：<br>（448,505）：Buddingtonite Zone<br>（502,589）：Strongly Argillized Zone with Kaolinite<br>（531,541）：Opalite Zone with Alunite<br>（260,613）：Calcite</li>
<li>主要特征：<br>图像的横坐标表示波段，纵坐标表示辐亮度。<br>这四种岩石有着同样趋势光谱曲线：在2.015μm处附近出现谷值，在2.04μm附近出现了峰值，在2.06μm附近再一次出现谷值，之后曲线上升，从2.1μm之后开始缓慢下降，在2.2μm附近有一个较小的吸收，2.3μm之后波谱呈现波动状态。</li>
<li>区别：<br>波谱曲线在两个较大的峰值和谷值处的大小有区别，其次在2.2μm处的小的吸收特性能够反映不同岩石的特性。</li>
</ol>
<h2 id="实验二："><a href="#实验二：" class="headerlink" title="实验二："></a>实验二：</h2><h3 id="实验步骤-1"><a href="#实验步骤-1" class="headerlink" title="实验步骤"></a>实验步骤</h3><ol>
<li>从 ENVI 主菜单中选择Spectral → Spectral Libraries → Spectral Library Viewer。</li>
<li>当 Spectral Library Input File 对话框出现后，点击Open Spec Lib，并从spec_lib/jpl_lib子目录中选择jpl1.sli 文件。</li>
<li>点击 OK。jpl1.sli 文件将会出现在对话框的Select Input File 区域。</li>
<li>点击该文件名，再点击 OK，打开Spectral Library Viewer 对话框。</li>
<li>在 Spectral Library Viewer 对话框所列出的波谱曲线中，点击相应的矿物质名称，绘制下列矿物质的波谱曲线：<ul>
<li>ALUNITE SO-4A</li>
<li>BUDDINGTONITE FELDS TS-11A</li>
<li>CALCITE C-3D</li>
<li>KAOLINITE WELL ORDERED PS-1A<br><img src="http://source.jiangyayu.cn/AVIRIS/2.png" alt="波谱曲线"></li>
</ul>
</li>
</ol>
<h3 id="结果分析-1"><a href="#结果分析-1" class="headerlink" title="结果分析"></a>结果分析</h3><ol>
<li>主要特征：<br>横坐标为波段，做坐标为反射率。<br>光谱曲线整体比较平缓，在1.4μm左右和2.2μm左右有比较明显的吸收。</li>
<li>区别：<br>KAOLINITE WELL ORDERED PS-1A 和ALUNITE SO-4A在1.4μm处的吸收比较明显，形成比较大的谷值，两者相对应的波段来说KAOLINITE WELL ORDERED PS-1A在1.4μm左右，而ALUNITE SO-4A则在1.5μm左右；BUDDINGTONITE FELDS TS-11A在1.4μm左右的吸收很小，CALCITE C-3D则几乎没有；在2.2μm左右以上四种岩石波谱均有所吸收，其中CALCITE C-3D对应的吸收波段值则更大一些，且吸收幅度相对小一些。</li>
</ol>
<h2 id="实验三："><a href="#实验三：" class="headerlink" title="实验三："></a>实验三：</h2><h3 id="实验步骤-2"><a href="#实验步骤-2" class="headerlink" title="实验步骤"></a>实验步骤</h3><ol>
<li>从 ENVI 主菜单中选择Spectral →Spectral Analyst</li>
<li>当Spectral Analyst Input Spectral Library对话框出现后，点击Open Spec Lib，并从spec_lib/ usgs_min子目录中选择usgs_min.sli 文件。</li>
<li>点击 OK。将会弹出Edit Identify Methods Weighting窗口，在这里我们选择合适的权重（本实验取0.35），点击OK。</li>
<li>在Spectral Analyst窗口点击Apply，在弹出的Spectral Analyst Input窗口中选择ALUNITE SO-4A并点击OK。这是ENVI会对光谱匹配度进行分析。结果会显示在Spectral Analyst中，其中第一项为匹配度最高的。</li>
<li>双击第一项，会将匹配的两条光谱曲线显示在一起。<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/AVIRIS/3.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/AVIRIS/3.png" alt="Spectral Analyst" style="zoom:40%"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/AVIRIS/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/AVIRIS/4.png" alt="波谱曲线"></a></div></div></div></div></li>
<li>用同样的方法找到与其他三种矿物波谱曲线匹配度最高的矿物，并将这些波谱曲线显示在同一窗口。<br><img src="http://source.jiangyayu.cn/AVIRIS/5.png" alt="波谱曲线"></li>
</ol>
<h2 id="实验四："><a href="#实验四：" class="headerlink" title="实验四："></a>实验四：</h2><h3 id="实验步骤-3"><a href="#实验步骤-3" class="headerlink" title="实验步骤"></a>实验步骤</h3><ol>
<li>在打开的Spectral Library Viewer窗口菜单下Options→Edit（x，y）Scale Factors，在弹出的Edit Display Scale窗口中设置Y Multiplier值为850，使得接下来绘出的波谱曲线与影像中获取的波谱曲线的纵坐标一致。</li>
<li>在jpl1光谱库中选择CALCITE C-3D，点击绘出其光谱曲线。</li>
<li>类似于步骤1、2，在usgs_min光谱库中选择carnall.spc Carnallite NMNH98011绘出光谱曲线。</li>
<li>在波谱曲线窗口的菜单下，依次Options→New Windows:Blank，打开一个新窗口。</li>
<li>将步骤2、3中绘制的光谱曲线和实验一中的X:260 Y:613拖到新建的绘图窗口中。</li>
<li>设置相应的参数是结果如图所示：<br><img src="http://source.jiangyayu.cn/AVIRIS/6.png" alt="波谱曲线"></li>
</ol>
<h3 id="结果分析-2"><a href="#结果分析-2" class="headerlink" title="结果分析"></a>结果分析</h3><p>两个实验室得到的光谱图像有一定的差别，主要原因可能是因为两者的环境存在着差异。但两者的共同特性很明显：2.34μm处均有比较明显的光谱吸收。两个实验室得到的结果与卫星影像上的光谱曲线的差别都很大，这主要是因为受太阳辐射和大气辐射共同作用的影响。但是其光谱曲线在2.34μm处被吸收的趋势还是能够看出来的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;实验目的&quot;&gt;&lt;a href=&quot;#实验目的&quot; class=&quot;headerlink&quot; title=&quot;实验目的&quot;&gt;&lt;/a&gt;实验目的&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;理解卫星及实验室高光谱概念，初步了解辐亮度、反射率的概念；&lt;/li&gt;
&lt;li&gt;能够打开并处理卫星高光谱数据；&lt;/li&gt;
&lt;li&gt;能够加载不同波谱库的反射率波谱曲线，并学会处理；&lt;/li&gt;
&lt;li&gt;学会判读不同地物的光谱曲线特征，了解其与相应的卫星光谱的比较，并解释差异原因。
    
    </summary>
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/categories/RS/"/>
    
    
      <category term="RS" scheme="https://blog.jiangyayu.cn/tags/RS/"/>
    
      <category term="影像波谱" scheme="https://blog.jiangyayu.cn/tags/%E5%BD%B1%E5%83%8F%E6%B3%A2%E8%B0%B1/"/>
    
  </entry>
  
  <entry>
    <title>ArcGIS练习3：空间分析</title>
    <link href="https://blog.jiangyayu.cn//archives/ArcGIS-practice-3.html"/>
    <id>https://blog.jiangyayu.cn//archives/ArcGIS-practice-3.html</id>
    <published>2012-12-16T14:45:12.000Z</published>
    <updated>2017-03-04T21:31:01.685Z</updated>
    
    <content type="html"><![CDATA[<p>本文将简单记述如何应用ArcGIS实现一个空间分析功能。<br><a id="more"></a></p>
<h1 id="城市化的影响范围分析"><a href="#城市化的影响范围分析" class="headerlink" title="城市化的影响范围分析"></a>城市化的影响范围分析</h1><h2 id="加载数据"><a href="#加载数据" class="headerlink" title="加载数据"></a>加载数据</h2><p>加载图层<a href="http://source.jiangyayu.cn/ArcGIS-practice-3/urban.zip" target="_blank" rel="external">urban</a>。</p>
<h2 id="缓冲区分析"><a href="#缓冲区分析" class="headerlink" title="缓冲区分析"></a>缓冲区分析</h2><ol>
<li>依次打开ArcTool box→Analysis Tool→Proximity→Multiple Rinq Buffer ，在Input Feature选项框中选择图层urban，Distances设置为0.05，点击OK生成缓冲区。</li>
</ol>
<p><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/1.png" style="zoom:60%"><br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/2.png"></p>
<ol>
<li>同理，对其他城镇进行缓冲区分析，设置缓冲区大小为0.06，结果如图：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/3.png"></li>
</ol>
<h2 id="相交运算"><a href="#相交运算" class="headerlink" title="相交运算"></a>相交运算</h2><p>在Toolbox中依次Overlay→Intersect选择保护区缓冲和城镇缓冲，进行相交运算：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/4.png" style="zoom:60%"><br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/5.png"></p>
<h2 id="擦除"><a href="#擦除" class="headerlink" title="擦除"></a>擦除</h2><p>在Toolbox中依次Overlay→Erase设置Input图层为“城镇缓冲”，Erase图层为 “相交运算”,这样即可将保护的部分从城市化的范围内擦除掉。<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/6.png" style="zoom:60%"><br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/7.png"></p>
<h2 id="空间运算结果"><a href="#空间运算结果" class="headerlink" title="空间运算结果"></a>空间运算结果</h2><p><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/8.png"></p>
<h2 id="计算面积"><a href="#计算面积" class="headerlink" title="计算面积"></a>计算面积</h2><p>右击城市化图层，打开属性表，为该图层新建一个Area字段，在Area字段上右击鼠标，选择Calculate Geometry。<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/9.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/9.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/10.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/10.png"></a></div></div></div></div></p>
<h1 id="土壤侵蚀危险性建模分析"><a href="#土壤侵蚀危险性建模分析" class="headerlink" title="土壤侵蚀危险性建模分析"></a>土壤侵蚀危险性建模分析</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>添加矢量数据：<a href="http://source.jiangyayu.cn/ArcGIS-practice-3/studyarea.zip" target="_blank" rel="external">StudyArea</a>、<a href="http://source.jiangyayu.cn/ArcGIS-practice-3/vegetation.zip" target="_blank" rel="external">Vegetation</a>、栅格数据<a href="http://source.jiangyayu.cn/ArcGIS-practice-3/soilsgrid.zip" target="_blank" rel="external">Soilsgrid</a></li>
<li>打开Arctoolbox，激活Spatial Analyst空间分析扩和3D分析扩展模块</li>
<li>根据Vegetaion 中的属性[VegTYPE]设置植被图层的符号为[唯一值渲染]，根据SoilsGrid 图层中属性[S_Value]设置土壤类型栅格的符号为[唯一值渲染]，设置图层StudyArea的边界和填充，并调整各图层的顺序得到如下下效：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/11.png"></li>
<li>保存地图文档</li>
<li>在ArcMap中，打开Arctoolbox，执行菜单命令:Tool→Options 在Options设置对话框中，设置Geopricessing选项页中My Toolboxs，将其指定为某个路径，比如C:\Users\Jiangyayu\Desktop\操作数据\Ex8<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/12.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/12.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/13.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/13.png"></a></div></div></div></div>
</li>
</ol>
<h2 id="建立模型"><a href="#建立模型" class="headerlink" title="建立模型"></a>建立模型</h2><ol>
<li>在Arctoolbox中，右键点击根目标Arctoolbox,在右键菜单中执行New Toolbox命令，创建一个工具箱，将新建工具箱改名，比如geosptial</li>
<li>右键点击新建的工具箱geosptial,在右键菜单中，执行命令：New→Model，将打开ModelBuilder应用程序窗口：<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/14.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/14.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/15.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/15.png"></a></div></div></div></div></li>
<li>在ModelBuilder窗口中，执行菜单命令 ：Model→Model Properties<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/16.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/16.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/17.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/17.png"></a></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 100%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-3/18.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/18.png" style="zoom:60%"></a></div></div></div></div></li>
<li>在ModelBuilder窗口中，执行菜单命令 ：Model→Diagram Properties<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/19.png" style="zoom:60%"></li>
<li>设计ModelBuilder中各个模块的参数，并最终完成模型构造：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/20.png"></li>
</ol>
<h2 id="运行模型"><a href="#运行模型" class="headerlink" title="运行模型"></a>运行模型</h2><p>在[ModelBuilder]窗口中执行菜单命令：Model→Run  Entire Model。<br>右键点击土壤侵蚀栅格，选择Add to Display。显示最终结果：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/21.png"></p>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p><img src="http://source.jiangyayu.cn/ArcGIS-practice-3/result3.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文将简单记述如何应用ArcGIS实现一个空间分析功能。&lt;br&gt;
    
    </summary>
    
      <category term="GIS" scheme="https://blog.jiangyayu.cn/categories/GIS/"/>
    
    
      <category term="ArcGIS" scheme="https://blog.jiangyayu.cn/tags/ArcGIS/"/>
    
      <category term="空间分析" scheme="https://blog.jiangyayu.cn/tags/%E7%A9%BA%E9%97%B4%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>ArcGIS练习2：地图投影与编辑</title>
    <link href="https://blog.jiangyayu.cn//archives/ArcGIS-practice-2.html"/>
    <id>https://blog.jiangyayu.cn//archives/ArcGIS-practice-2.html</id>
    <published>2012-12-16T13:58:08.000Z</published>
    <updated>2017-03-04T21:30:55.349Z</updated>
    
    <content type="html"><![CDATA[<p>本文将简单记述如何应用ArcGIS软件对天津地形图进行校正和矢量化操作，并作必要的统计分析和数据处理工作。<br><a id="more"></a></p>
<h1 id="投影与配准"><a href="#投影与配准" class="headerlink" title="投影与配准"></a>投影与配准</h1><h2 id="地图数据"><a href="#地图数据" class="headerlink" title="地图数据"></a>地图数据</h2><p><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/1.%E5%A4%A9%E6%B4%A5%E5%B8%82%E6%BB%A8%E6%B5%B7%E6%96%B0%E5%8C%BA%E5%9B%BE.jpg" alt="天津市滨海新区图" style="zoom:15%"></p>
<h2 id="打开图像，设置地图单位"><a href="#打开图像，设置地图单位" class="headerlink" title="打开图像，设置地图单位"></a>打开图像，设置地图单位</h2><ol>
<li>添加“天津市滨海新区图.jpg”</li>
<li>在ArcMap主菜单下选择View→Data Frame Properties，打开的Data Frame Properties窗口，在General标签中设置地图单位为Meters。</li>
</ol>
<h2 id="地图配准"><a href="#地图配准" class="headerlink" title="地图配准"></a>地图配准</h2><ol>
<li>选择投影坐标：在Data Frame Properties窗口的Coordinate System的标签中，设置地图的投影为Gauss Kruger →Xian 1980→Xian1980 GK CM 117E。</li>
<li>采取控制点：添加实验一中已配准的塘沽地形图，找出两幅地图中的同名地物作为采取的控制点。本实验中采取的控制点为：塘沽火站、北塘站、以及部分铁路和公路的交点。至少选取四个点，采用一次多项式，删除误差较大的点并使最后误差小于1。<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/2.png" alt="采取控制点" style="zoom:70%"></li>
<li>地图矫正：选择Georeferencing→rectify对“天津市滨海新区图.jpg”进行矫正，保存名为“天津市滨海新区图”，设置保存格式为TIFF。<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/3.png" alt="地图矫正" style="zoom:50%"></li>
</ol>
<h1 id="地图编辑"><a href="#地图编辑" class="headerlink" title="地图编辑"></a>地图编辑</h1><ol>
<li>创建shape<br>打开ArcCatalog，在左侧目录树中选择指定的位置，然后在Contents框中右击鼠标，选择New→Shapfile打开Creat New Shapeflie窗口，在Name中输入lake，FeatureType选择Polygon，然后点击Edit，选择Import导入“天津滨海新区图.tif”的坐标系统。<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-2/4.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/4.png" alt="导入坐标系统" style="zoom:60%"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-2/5.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/5.png" alt="导入坐标系统" style="zoom:120%"></a></div></div></div></div></li>
<li>添加字段<br>双击刚刚新建好的Shapefile文件，在Shapefile Properties窗口中，为lake图层增加一个字段name，类型为Text。</li>
<li>加载数据<br>回到ArcMap中，添加图层“天津滨海新区图.tif”和“lake.shp”。</li>
<li>编辑数据</li>
</ol>
<ul>
<li>选中lake图层，在Editor工具条上选择Editor→Start Editing开始对lake图层进行编辑。</li>
<li>在地图中找到一个水库，如钱圈水库，将地图放大到合适比例，然后沿着水库的周围提取图形。待跟踪完一周后，右击鼠标，选择Finish Sketch。然后在打开lake的属性窗口输入水库的name：钱圈水库。</li>
<li>完成其他水库、盐田等的矢量化。最后Stop Editing，保存文件。</li>
<li>参照lake图层的矢量化，完成其他几个图层的矢量化。并参照天津滨海新新区图的地图符号，为矢量化后的各要素设置相应的地图符号。最终矢量化得到的图层如图所示：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/6.png" alt="矢量化的图层"></li>
</ul>
<h1 id="统计分析"><a href="#统计分析" class="headerlink" title="统计分析"></a>统计分析</h1><ol>
<li>创建统计图</li>
</ol>
<ul>
<li>选中river图层，Start Editing，打开属性表，右击length字段，选中Calculate Geometry，计算出河流长度。</li>
<li>点击Options，选择Creat Graph，设计河流统计表的样式<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/7.png" alt="设置统计图" style="zoom:60%"></li>
<li>点击Next生成河流统计图：<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/8.png" alt="生成统计图" style="zoom:60%"></li>
<li>在统计图上右击选择Add to Layout将统计图添加到制版上，调整至合适的大小和位置。</li>
</ul>
<h1 id="地图制版"><a href="#地图制版" class="headerlink" title="地图制版"></a>地图制版</h1><ul>
<li>在ArcGis的主菜单下选择Insert→Tltle插入地图名：天津市滨海新区，设计合适的大小和位置；</li>
<li>选择Insert→Legend，在对话框中为必要的图层建立图例，右击新建的图例，选择Properties，设置图例的格式，将图例放置在合适位置；</li>
<li>选择Insert→Legend，选择Scale Bar为地图选择一个合适的比例尺，设置好其大小和位置；</li>
<li>为地图设置合适的图标；</li>
<li>在ArcGis主菜单下选择File→Export Map，选择输出格式为jpg，输出地图。</li>
</ul>
<h1 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h1><p><img src="http://source.jiangyayu.cn/ArcGIS-practice-2/9.png" alt="结果图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文将简单记述如何应用ArcGIS软件对天津地形图进行校正和矢量化操作，并作必要的统计分析和数据处理工作。&lt;br&gt;
    
    </summary>
    
      <category term="GIS" scheme="https://blog.jiangyayu.cn/categories/GIS/"/>
    
    
      <category term="ArcGIS" scheme="https://blog.jiangyayu.cn/tags/ArcGIS/"/>
    
      <category term="地图编辑" scheme="https://blog.jiangyayu.cn/tags/%E5%9C%B0%E5%9B%BE%E7%BC%96%E8%BE%91/"/>
    
  </entry>
  
  <entry>
    <title>ArcGIS练习1：地形图校正和拼接</title>
    <link href="https://blog.jiangyayu.cn//archives/ArcGIS-practice-1.html"/>
    <id>https://blog.jiangyayu.cn//archives/ArcGIS-practice-1.html</id>
    <published>2012-12-16T13:10:49.000Z</published>
    <updated>2017-03-04T21:30:49.278Z</updated>
    
    <content type="html"><![CDATA[<p>本文将简单记述如何应用ArcGIS软件对天津塘沽地形图进行配准和拼接。<br><a id="more"></a></p>
<h1 id="地形图校正和拼接"><a href="#地形图校正和拼接" class="headerlink" title="地形图校正和拼接"></a>地形图校正和拼接</h1><h2 id="原始地形图文件"><a href="#原始地形图文件" class="headerlink" title="原始地形图文件"></a>原始地形图文件</h2> <div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/2.tanggu2.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/2.tanggu2.jpg"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/1.tanggu1.jpg" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/1.tanggu1.jpg"></a></div></div></div></div>
<h2 id="打开图像，设置地图单位"><a href="#打开图像，设置地图单位" class="headerlink" title="打开图像，设置地图单位"></a>打开图像，设置地图单位</h2><p>  添加数据tanggu1，tanggu2（扫描地形图）。选中两图层，在ArcMap主菜单下选择View→Data Frame Properties，打开的Data Frame Properties窗口，在General标签中设置地图单位为Meters。</p>
<h2 id="地形图配准"><a href="#地形图配准" class="headerlink" title="地形图配准"></a>地形图配准</h2><ol>
<li><p>选择投影坐标：在Data Frame Properties窗口的Coordinate System的标签中，设置地图的投影为Gauss Kruger →Xian 1980→Xian1980 GK CM 117E。</p>
</li>
<li><p>采取控制点：打开Georeferencing工具栏，根据地形图上所提供的坐标，采取控制点。打开连接表，可以查看所采取的控制点，采集了7个以上的点的时候就可以做二次多项式变换。删除其中误差比较大的点，并重新选择。</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/4.3.tanggu1%E6%8E%A7%E5%88%B6%E7%82%B9.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/4.3.tanggu1%E6%8E%A7%E5%88%B6%E7%82%B9.png" alt="tanggu1控制点"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/4.4.tanggu2%E6%8E%A7%E5%88%B6%E7%82%B9.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/4.4.tanggu2%E6%8E%A7%E5%88%B6%E7%82%B9.png" alt="tanggu2控制点"></a></div></div></div></div>
</li>
<li><p>地图矫正：选择Georeferencing→rectify分别对tanggu1、tanggu2进行矫正，保存名分别为tanggu1<em>配准、tanggu2</em>配准，设置保存格式为TIFF。</p>
</li>
</ol>
<h2 id="地形图拼接"><a href="#地形图拼接" class="headerlink" title="地形图拼接"></a>地形图拼接</h2><ol>
<li><p>加载数据：删除图层tanggu1、tanggu2，重新加载tanggu1_配准、tanggu_2配准。可以看到此时的地图已经有了正确的位置和坐标。<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/5.%E5%9C%B0%E5%9B%BE%E6%8B%BC%E6%8E%A5.png" alt="配准后的地形图"></p>
</li>
<li><p>裁剪：为了实现地图的更好拼接，我们要将扫描过程时地图边缘部分的空白和形变给裁剪掉，这里我们使用的是ArcToolbox→Data Management Tools→Raster→Raster Processing命令。设置其X Maximum的值如图所示</p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/6.clip%E5%B7%A5%E5%85%B7.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/6.clip%E5%B7%A5%E5%85%B7.png" alt="clip工具"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/6.clip%E8%AE%BE%E7%BD%AE.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/6.clip%E8%AE%BE%E7%BD%AE.png" alt="clip设置"></a></div></div></div></div>
</li>
<li><p>拼接：同样使用ArcToolbox中的命令：ArcToolbox→Data Management Tools→Raster→Raster Dataset→Mosaic,设置输入图层和目标图层如下所示： </p>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/7.mosaic%E5%B7%A5%E5%85%B7.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/7.mosaic%E5%B7%A5%E5%85%B7.png" alt="mosaic工具" style="zoom:70%"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/ArcGIS-practice-1/7.mosaic%E8%AE%BE%E7%BD%AE.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/7.mosaic%E8%AE%BE%E7%BD%AE.png" alt="镶嵌设置"></a></div></div></div></div>
</li>
<li><p>输出：点击OK输出图像。<br><img src="http://source.jiangyayu.cn/ArcGIS-practice-1/8.%E8%BE%93%E5%87%BA%E5%9B%BE%E5%83%8F.png" alt="输出结果"></p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文将简单记述如何应用ArcGIS软件对天津塘沽地形图进行配准和拼接。&lt;br&gt;
    
    </summary>
    
      <category term="GIS" scheme="https://blog.jiangyayu.cn/categories/GIS/"/>
    
    
      <category term="ArcGIS" scheme="https://blog.jiangyayu.cn/tags/ArcGIS/"/>
    
      <category term="地图拼接" scheme="https://blog.jiangyayu.cn/tags/%E5%9C%B0%E5%9B%BE%E6%8B%BC%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>数字信号与信息处理2:数字滤波器的设计</title>
    <link href="https://blog.jiangyayu.cn//archives/Digital-filter.html"/>
    <id>https://blog.jiangyayu.cn//archives/Digital-filter.html</id>
    <published>2012-12-14T08:04:22.000Z</published>
    <updated>2017-03-02T14:50:09.100Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实验目的："><a href="#实验目的：" class="headerlink" title="实验目的："></a>实验目的：</h1><ol>
<li>实验类型：设计性实验。 </li>
<li>掌握通过零、极点设计低阶数字滤波器的设计方法。</li>
<li>掌握IIR和FIR数字滤波器的设计方法，并利用所设计滤波器解决实际问题。</li>
<li>通过分析滤波前后信号频谱的变化，深刻理解滤波的概念。</li>
<li>对两种滤波器设计方法的进行比较。<a id="more"></a>
</li>
</ol>
<h1 id="实验主要仪器设备，软件"><a href="#实验主要仪器设备，软件" class="headerlink" title="实验主要仪器设备，软件"></a>实验主要仪器设备，软件</h1><ol>
<li>硬件准备：PC机</li>
<li>软件准备：Matlab语言环境</li>
</ol>
<h1 id="实验的基本原理与内容"><a href="#实验的基本原理与内容" class="headerlink" title="实验的基本原理与内容"></a>实验的基本原理与内容</h1><h2 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h2><p>&emsp;&emsp;数字滤波器是具有某种特定频率特性的线性时不变系统。广义上，任何线性时不变离散系统都是一个数字滤波器。设计数字滤波器的任务就是需求一个因果稳定的线性是不变系统，并使系统函数H(z)具有指定的频率特性。<br><img src="http://source.jiangyayu.cn/Digital-filter/1.png" alt="公式" style="zoom:0.5"><br>&emsp;&emsp;低阶数字滤波器一般指一阶或二阶滤波器。因其阶次较低，可用零极点的分布来调控其频率特性；其好处处理速度快，硬件简单。另外，高阶滤波器在许多情况下由多个低阶滤波器组合来实现。<br>&emsp;&emsp;LTI系统可在z域中用零极点图的形式来描述。这在设计简单的滤波器时很重要，利用其可进行谱分析，只要正确地配置零极点就可达到一定的设计要求。那么，建立零极点与频率特性的关系规律：</p>
<ol>
<li>设计滤波器时，一定要保证结构的稳定，因此所有极点应该位于单位圆之内；</li>
<li>负相位越大引起系统的延时越大，为了减少系统时延，所设计的系统零点最好也在单位圆内(或上)；</li>
<li>极点在单位圆附近，对应频率幅度会出现波峰；零点在单位圆上，对应频率幅度会出现波谷。</li>
</ol>
<p>&emsp;&emsp;基于零极点的低阶数据滤波器模型：</p>
<p><img src="http://source.jiangyayu.cn/Digital-filter/2.png" alt="公式" style="zoom:0.5"></p>
<p>&emsp;&emsp;数字滤波器从实现的网络结构或者从单位冲激响应分类，可以分为无限长单位冲激响应（IIR）数字滤波器和有限长单位冲激响应（FIR）数字滤波器。<br>&emsp;&emsp;数字滤波器设计的基本问题：</p>
<ol>
<li>根据实际要求确定数字滤波器的性能指标。</li>
<li>用一个稳定的系统函数去逼近这个指标。</li>
<li>用一个有限精度的运算去实现这个传输函数。</li>
</ol>
<p>&emsp;&emsp;其中IIR数字滤波器主要是借助于模拟滤波器的设计方法。模拟滤波器已有一套成熟的设计方法，充分利用这些资源为IIR数字滤波器设计提供很大方便。但IIR数字滤波器的相位特征一般为非线性的。而在有些实际应用场合，如图像处理，对滤波器线性相位特性要求颇为严格，因此需要选择FIR数字滤波器，且FIR数字滤波器的幅度特征可任意设计，比较IIR数字滤波器的设计更灵活。</p>
<h2 id="实验内容（一）："><a href="#实验内容（一）：" class="headerlink" title="实验内容（一）："></a>实验内容（一）：</h2><p>&emsp;&emsp;设有一连续信号x(t)=sin(15t)+cos(40t)+cos(200t)，基于零、极点低阶数字滤波器模型，分别设计二阶数字波器和一阶数字滤波器，分别提取三个频率分量。设采样周期T=0.005秒。<br><strong>基本流程：</strong><br>a）    构造连续信号x(t)并显示波形，信号的作用时间设定为：0~10s;<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; t = <span class="number">0</span>:<span class="number">0.005</span>:<span class="number">10</span>;</div><div class="line">&gt;&gt; x=<span class="built_in">sin</span>(<span class="number">15</span>*t)+<span class="built_in">cos</span>(<span class="number">40</span>*t)+<span class="built_in">cos</span>(<span class="number">200</span>*t);</div><div class="line">&gt;&gt; plot(x);   <span class="comment">%% 绘出原始信号</span></div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/Digital-filter/3.png" style="zoom:0.7"><br>b）    需求分析并选定滤波的类型【低通，高通，带通，带阻】；基于二阶数字波器和一阶数字滤波器的模型传递函数设计其参数，并画出零、极点分布图及滤波器的频响；<br>c）    用设计出的滤波器分别提取x(t)信号各频率成分；并与参考信号相比。<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">b=[<span class="number">1</span> <span class="number">1</span>];</div><div class="line">a=[<span class="number">20</span> <span class="number">-18</span>];</div><div class="line">y0=filter(b,a,x);  <span class="comment">%%用低通滤除cos（200t）</span></div><div class="line">a1 = poly([<span class="number">0.9</span>,<span class="number">0.9</span>]);</div><div class="line">b1 = poly([exp(<span class="number">0.2</span>j),exp(<span class="number">-0.2</span>j)]);</div><div class="line">w0 = <span class="number">0.2</span>;</div><div class="line">alpha1 = <span class="built_in">sin</span>(w0);</div><div class="line">k1 = (<span class="number">1</span>+alpha1)/<span class="number">2</span> ;</div><div class="line">b1 = k1.*b1;</div><div class="line">y1=filter(b1,a1,y0); <span class="comment">%%用带阻滤除cos（40t）</span></div><div class="line">figure,subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>),zplane(b1,a1); <span class="comment">%%绘制零极点</span></div><div class="line">[H,w] = freqz(b1,a1);</div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>), plot(w,<span class="built_in">abs</span>(H)); <span class="comment">%%绘制滤波器   </span></div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>),plot(y1); <span class="comment">%%绘制提取的sin（15t）</span></div><div class="line">hold on ;</div><div class="line">plot(<span class="built_in">sin</span>(<span class="number">15</span>*t),<span class="string">'g'</span>); <span class="comment">%%绘出sin（15t）</span></div></pre></td></tr></table></figure></p>
<p><img src="http://source.jiangyayu.cn/Digital-filter/4.png" style="zoom:0.7"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">alpha2 = <span class="number">0.98</span>;</div><div class="line">beta2 = <span class="built_in">cos</span>(<span class="number">0.2</span>);</div><div class="line">a2 = [<span class="number">1</span> -beta2*(<span class="number">1</span>+alpha2) alpha2];</div><div class="line">k2 = (<span class="number">1</span>-alpha2)/<span class="number">2</span>;</div><div class="line">b2 = k2.*[<span class="number">1</span> <span class="number">0</span> <span class="number">-1</span>];</div><div class="line">y3 =filter(b2,a2,x);</div><div class="line">figure,subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>),zplane(b2,a2);<span class="comment">%%绘制零极点</span></div><div class="line">[H,w] = freqz(b2,a2);</div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>), plot(w,<span class="built_in">abs</span>(H)); <span class="comment">%%绘制滤波器</span></div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>),plot(y3);<span class="comment">%%绘制提取的cos（40t）</span></div><div class="line">hold on;</div><div class="line">plot(<span class="built_in">cos</span>(<span class="number">40</span>*t),<span class="string">'g'</span>);   <span class="comment">%%绘出cos（40t）</span></div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-filter/5.png" style="zoom:0.7"></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">alpha3 = <span class="number">0.98</span>;</div><div class="line">beta3 = <span class="built_in">cos</span>(<span class="number">1</span>);</div><div class="line">a3 = [<span class="number">1</span> -beta3*(<span class="number">1</span>+alpha3) alpha3];</div><div class="line">k3 = (<span class="number">1</span>-alpha2)/<span class="number">2</span>;</div><div class="line">b3 = k3.*[<span class="number">1</span> <span class="number">0</span> <span class="number">-1</span>];</div><div class="line">y4 =filter(b3,a3,x);</div><div class="line">figure,subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>),zplane(b3,a3);<span class="comment">%%绘制零极点</span></div><div class="line">[H,w] = freqz(b3,a3);</div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>),plot(w,<span class="built_in">abs</span>(H));<span class="comment">%%绘制滤波器</span></div><div class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>),plot(y4);  <span class="comment">%%绘制提取的cos（200t）</span></div><div class="line">hold on;</div><div class="line">plot(<span class="built_in">cos</span>(<span class="number">200</span>*t),<span class="string">'g'</span>);     <span class="comment">%%绘制cos（200t）</span></div><div class="line">axis([<span class="number">0</span>,<span class="number">300</span>,<span class="number">-1.1</span>,<span class="number">1.1</span>]);<span class="comment">%%设置显示范围</span></div><div class="line">hold off;</div></pre></td></tr></table></figure>
<p><img src="http://source.jiangyayu.cn/Digital-filter/6.png" style="zoom:0.7"></p>
<h2 id="实验内容（二）"><a href="#实验内容（二）" class="headerlink" title="实验内容（二）"></a>实验内容（二）</h2><p><strong>实验背景:</strong><br>&emsp;&emsp;心电( Electrocardiograph, ECG) 信号是心脏电活动在人体体表的表现，它一般比较微弱，正常的心电信号在0.01Hz-100Hz频带范围内。而90%的ECG频谱能量又集中在0.25-35Hz之间。因此, 心电信号在提取的过程中极易受到内、 外环境的干扰, 而其中最而其中最主要的干扰是近场 50 Hz工频干扰源。因此, 如何消除 50 Hz工频干扰, 成为处理心电信号的首要任务。<br><strong>实验数据：</strong><br>&emsp;&emsp;实验数据是从美国麻省理工学院提供的MIT-BIH数据库下载的212文件格式带工频干扰的心电信号。该212文件格式包括头、数据和注释三个文件，以ASCll码方式存储。其采样率为360Hz，共有30000个样本点，数据文件<a href="http://source.jiangyayu.cn/Digital-filter/xindiandata.xls" target="_blank" rel="external">xindiantu.xls</a>。<br><strong>实验任务：</strong><br>&emsp;&emsp;分别设计IIR数字带阻滤波器（陷波器）和FIR数字带阻滤波器（陷波器），陷波器的模拟指标如下图所示：阻带从49-51Hz间，其中心频率为f 0=50 Hz，过渡带宽B=2Hz，通带的波动控制在1dB内，而阻带的衰减至少到45dB，采样频率为fs=360Hz；并将所设计滤波器对实际被50Hz干扰后的心电图信号进行滤波处理仿真实验，滤除其中的干扰成分。观察总结滤波作用与效果。<br><img src="http://source.jiangyayu.cn/Digital-filter/7.png"></p>
<p><strong>实验步骤：</strong><br>（1）读取给定心电图信号的数据文件xidiantu.xls，并绘出心电图信号波形图；</p>
<ul>
<li>将xindiantu.xls导入matlab，并转换成行向量data。</li>
<li>运行以下程序绘出原始心电图<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">T=<span class="number">1</span>/<span class="number">360</span>;</div><div class="line">t=<span class="number">0</span>:T:<span class="number">29999</span>*T;</div><div class="line">plot(t,data)；</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-filter/8.png" style="zoom:0.7"></p>
<p>（2）对心电图信号的频谱进行分析，得出滤波器的设计指标参数；并绘制其模拟域频谱图。<br>根据实验要求，所设计的滤波器阻带为49-51Hz，其中心频率为f 0=50 Hz，过渡带宽B=2Hz，通带的波动控制在1dB内，而阻带的衰减至少到45dB，采样频率为fs=360Hz；所以设计滤波器的阻带为60dB。<br>（3）根据所分析的指标参数，<strong>设计50Hz IIR数字陷波器（带阻滤波器）</strong>；</p>
<ul>
<li><p>将数字域频率转化成模拟域频率</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Rp=<span class="number">1</span>;</div><div class="line">As=<span class="number">60</span>;</div><div class="line">fs=<span class="number">360</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>设定滤波器各项参数</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wpl=fs*<span class="number">2</span>*<span class="built_in">tan</span>((<span class="number">47</span>*<span class="built_in">pi</span>/<span class="number">360</span>));</div><div class="line">wph=fs*<span class="number">2</span>*<span class="built_in">tan</span>((<span class="number">53</span>*<span class="built_in">pi</span>/<span class="number">360</span>));</div><div class="line">wsl=fs*<span class="number">2</span>*<span class="built_in">tan</span>((<span class="number">49</span>*<span class="built_in">pi</span>/<span class="number">360</span>));</div><div class="line">wsh=fs*<span class="number">2</span>*<span class="built_in">tan</span>((<span class="number">51</span>*<span class="built_in">pi</span>/<span class="number">360</span>));</div><div class="line">wp=[wpl,wph];</div><div class="line">ws=[wsl,wsh];</div></pre></td></tr></table></figure>
</li>
<li><p>设置巴特沃思(Butterworth)低通滤波器原型</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[N,wc]=buttord(wp,ws,rp,as,<span class="string">'s'</span>);</div><div class="line">[z,p,k]=buttap(N);</div><div class="line">[b0,a0]=zp2tf(z,p,k);</div><div class="line">[H,w] = freqs(b0,a0);</div><div class="line">plot(w,<span class="built_in">abs</span>(H));</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-filter/9.png" style="zoom:0.7"></p>
<ul>
<li><p>低通滤波器转换成带阻滤波器</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">B=wc(<span class="number">2</span>)-wc(<span class="number">1</span>);</div><div class="line">wz=(wc(<span class="number">2</span>).*wc(<span class="number">1</span>)).^(<span class="number">1</span>/<span class="number">2</span>);</div><div class="line">[bt,at]=lp2bs(b0,a0,wz,B);</div></pre></td></tr></table></figure>
</li>
<li><p>绘制滤波器形状</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[b,a]=bilinear(bt,at,fs); </div><div class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>) ,zplane(b,a);</div><div class="line">[H,w]=freqz(b,a);</div><div class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>),plot(w*<span class="number">360</span>/(<span class="number">2</span>*<span class="built_in">pi</span>),<span class="number">20</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(H)));</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-filter/10.png" style="zoom:0.7"></p>
<ul>
<li>开始滤波<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">y=filter(b,a,data);</div><div class="line">plot(t,data);</div><div class="line">figure,plot(t,y);</div></pre></td></tr></table></figure>
</li>
</ul>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/11.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/11.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/12.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/12.png"></a></div></div></div></div>
<p>(4)根据所分析的指标参数，<strong>设计50Hz FIR数字陷波器（带阻滤波器）</strong>；用给定指标进行验证设计的合理性。</p>
<ul>
<li><p>将信号转到换数字域</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rp=<span class="number">1</span>;</div><div class="line">As=<span class="number">60</span>;</div><div class="line">fs=<span class="number">360</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>设置滤波器参数</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wp1=<span class="number">47</span>*<span class="number">2</span>*<span class="built_in">pi</span>/<span class="number">360</span>;</div><div class="line">wph=<span class="number">53</span>*<span class="number">2</span>*<span class="built_in">pi</span>/<span class="number">360</span>;</div><div class="line">ws1=<span class="number">49</span>*<span class="number">2</span>*<span class="built_in">pi</span>/<span class="number">360</span>;</div><div class="line">wsh=<span class="number">51</span>*<span class="number">2</span>*<span class="built_in">pi</span>/<span class="number">360</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>生成滤波器并绘制出滤波器形状</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">deltaw=<span class="number">2</span>*<span class="number">2</span>*<span class="built_in">pi</span>/<span class="number">360</span>;</div><div class="line">N0=<span class="built_in">ceil</span>(<span class="number">6.6</span>*<span class="built_in">pi</span>/deltaw);</div><div class="line">N=N0+<span class="built_in">mod</span>(N0+<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">wd=(hamming(N));</div><div class="line">wc1=(ws1+wp1)/<span class="number">2</span>; wc2=(wph+wsh)/<span class="number">2</span>;</div><div class="line">hd=[zeros(<span class="number">1</span>,(N<span class="number">-1</span>)/<span class="number">2</span>),<span class="number">1</span>,zeros(<span class="number">1</span>,(N<span class="number">-1</span>)/<span class="number">2</span>)]-ideallp(wc2,N)+ideallp(wc1,N)</div><div class="line"></div><div class="line">h=hd.*wd';</div><div class="line">a=<span class="number">1</span>;</div><div class="line">H=freqz(h,a,<span class="number">0</span>:<span class="number">0.01</span>:<span class="built_in">pi</span>);</div><div class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>), zplane(h,a);</div><div class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>), plot([<span class="number">0</span>:<span class="number">0.01</span>:pi]*<span class="number">360</span>/(<span class="number">2</span>*<span class="built_in">pi</span>),<span class="built_in">abs</span>(H)) ;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://source.jiangyayu.cn/Digital-filter/13.png" style="zoom:0.7"></p>
<ul>
<li>进行滤波<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">T=<span class="number">1</span>/<span class="number">360</span>;</div><div class="line">t=<span class="number">0</span>:T:<span class="number">29999</span>*T;</div><div class="line">y=filter(h,a,data);</div><div class="line">plot(t,data);</div><div class="line">figure,plot(t,y);</div></pre></td></tr></table></figure>
</li>
</ul>
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/14.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/14.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/15.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/15.png"></a></div></div></div></div>
<p>（5）分别利用两种所设计的数字陷波器对给定的心电图信号进行滤波，滤除50Hz的工频干扰；<br>（6）绘制滤波后信号的频谱图，并原始心电信号的频谱进行比对，分析结果；<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/16.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/16.png"></a></div><div class="group-picture-column" style="width: 50%;"><a href="http://source.jiangyayu.cn/Digital-filter/17.png" data-fancybox="fancyboxgroup" class="fancybox" target="_blank" rel="external"><img src="http://source.jiangyayu.cn/Digital-filter/17.png"></a></div></div></div></div><br>（7）两种滤波器设计结果的比对，分析其原因。<br>IIR数字滤波器的设计方法简单方便，但其相位特征一般为非线性的。FIR数字滤波器，具有系统稳定、其幅度特征可任意设计等优点。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;实验目的：&quot;&gt;&lt;a href=&quot;#实验目的：&quot; class=&quot;headerlink&quot; title=&quot;实验目的：&quot;&gt;&lt;/a&gt;实验目的：&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;实验类型：设计性实验。 &lt;/li&gt;
&lt;li&gt;掌握通过零、极点设计低阶数字滤波器的设计方法。&lt;/li&gt;
&lt;li&gt;掌握IIR和FIR数字滤波器的设计方法，并利用所设计滤波器解决实际问题。&lt;/li&gt;
&lt;li&gt;通过分析滤波前后信号频谱的变化，深刻理解滤波的概念。&lt;/li&gt;
&lt;li&gt;对两种滤波器设计方法的进行比较。
    
    </summary>
    
      <category term="数字信号" scheme="https://blog.jiangyayu.cn/categories/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7/"/>
    
    
      <category term="数字信号" scheme="https://blog.jiangyayu.cn/tags/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7/"/>
    
      <category term="matlab" scheme="https://blog.jiangyayu.cn/tags/matlab/"/>
    
      <category term="数字滤波器" scheme="https://blog.jiangyayu.cn/tags/%E6%95%B0%E5%AD%97%E6%BB%A4%E6%B3%A2%E5%99%A8/"/>
    
  </entry>
  
</feed>
